

<!doctype html>

<html lang="en" data-content_root="../">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>6.4. Standard output / Standard error output / Standard input &#8212; Supercomputer Fugaku User Guide - Use and job execution -  documentation</title>
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=649a27d8" />
    <link rel="stylesheet" type="text/css" href="../_static/bizstyle.css?v=532c1bf3" />
    <link rel="stylesheet" type="text/css" href="../_static/custom.css?v=f85107c5" />
    
    <script src="../_static/documentation_options.js?v=5929fcd5"></script>
    <script src="../_static/doctools.js?v=888ff710"></script>
    <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/bizstyle.js"></script>
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="6.5. Specification when submitting an MPI job" href="SpecificationsForMPIJob.html" />
    <link rel="prev" title="6.3. How to execute back ground job" href="HowToExecuteABackgroundJob.html" />
    <meta name="viewport" content="width=device-width,initial-scale=1.0" />
    <!--[if lt IE 9]>
    <script src="_static/css3-mediaqueries.js"></script>
    <![endif]-->
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="SpecificationsForMPIJob.html" title="6.5. Specification when submitting an MPI job"
             accesskey="N">next</a></li>
        <li class="right" >
          <a href="HowToExecuteABackgroundJob.html" title="6.3. How to execute back ground job"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">Supercomputer Fugaku User Guide - Use and job execution -  documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="index.html" accesskey="U"><span class="section-number">6. </span>MPI job execution</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href=""><span class="section-number">6.4. </span>Standard output / Standard error output / Standard input</a></li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <section id="standard-output-standard-error-output-standard-input">
<span id="stdoutstderroutstdin"></span><h1><span class="section-number">6.4. </span>Standard output / Standard error output / Standard input<a class="headerlink" href="#standard-output-standard-error-output-standard-input" title="Link to this heading">¶</a></h1>
<p>This indicates the specification dirextion of MPI program standard output / standard error output / standard input.</p>
<section id="how-to-specify-standard-output-standard-error-output-standard-input">
<span id="stdspecmethod"></span><h2><span class="section-number">6.4.1. </span>How to specify standard output / standard error output / standard input<a class="headerlink" href="#how-to-specify-standard-output-standard-error-output-standard-input" title="Link to this heading">¶</a></h2>
<p>At  <strong class="program">mpiexec</strong>, an option to output standard output / standard error output to a file and an option to read standard input from a file are provided.</p>
<ul>
<li><div class="line-block">
<div class="line">On each parallel process and  <strong class="program">mpiexec</strong> command standard output standard error output, normally, it is output to the <strong class="program">mpiexec</strong> command execution result file generated by the job operation software.</div>
<div class="line">By default (no output option specified), a standard output/standard error output file is generated in the current directory using the following naming convention.</div>
<div class="line"><br /></div>
<div class="line">[Standard Output File Naming Conventions]</div>
<div class="line-block">
<div class="line">./output.<em>jobid</em>/<em>1000_ranks</em>/<em>mpiexec</em>/stdout.<em>mpiexec</em>.<em>rank</em></div>
</div>
<div class="line">[Standard Error Output File Naming Conventions]</div>
<div class="line-block">
<div class="line">./output.<em>jobid</em>/<em>1000_ranks</em>/<em>mpiexec</em>/stderr.<em>mpiexec</em>.<em>rank</em></div>
<div class="line"><br /></div>
</div>
<div class="line">Create a directory in the “./output.<em>jobid</em>/” directory divided into 1000 ranks. In the directory divided into 1000 ranks, create a directory for the number of times the mpiexec command is executed.</div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p><em>jobid</em> strings line is showing the jobid.</p>
<p><em>1000_ranks</em> strings line is showing rounds a rank or spawn number down to the nearest 1000.</p>
<p><em>mpiexec</em> strings line is showing  how many times of  <strong class="program">mpiexec</strong> command execution in job script.</p>
<p><em>rank</em> strings line is showing a rank at the actual MPI_COMM_WORLD.</p>
</div>
<div class="line-block">
<div class="line">Example1 : JOBID=9999, Run the mpiexec command once, Standard output file path for rank number 100</div>
<div class="line-block">
<div class="line">./output.9999/0/1/stdout.1.100</div>
</div>
<div class="line">Example2 : JOBID=9999, Execute the mpiexec command twice, Standard output file path for rank number 1500</div>
<div class="line-block">
<div class="line">./output.9999/1000/2/stdout.2.1500</div>
</div>
</div>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>mpiexec ./a.out
</pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">[_LNlogin]$ </span>ls<span class="w"> </span>-F<span class="w"> </span>output.9999/
<span class="go">0/  1000/  2000/  3000/  ...</span>
<span class="gp">[_LNlogin]$ </span>ls<span class="w"> </span>-F<span class="w"> </span>output.jobid/0/
<span class="go">1/  2/</span>
<span class="gp">[_LNlogin]$ </span>ls<span class="w"> </span>-F<span class="w"> </span>output.jobid/0/1/
<span class="go">stderr.1.0 stderr.1.1 ... stderr.1.999</span>
<span class="go">stdout.1.0 stdout.1.1 ... stdout.1.999</span>
</pre></div>
</div>
</li>
<li><p>If you change the output destination of standard output / standard error output by specifying <strong class="program">mpiexec</strong> command option(<code class="docutils literal notranslate"><span class="pre">-std-proc/-of-proc</span></code>,<code class="docutils literal notranslate"><span class="pre">-stdout-proc/-ofout-proc</span></code>,<code class="docutils literal notranslate"><span class="pre">-stderr-proc/-oferr-proc</span></code>), valid only for the executable file executed by the <strong class="program">mpiexec</strong> command with the option specified.</p></li>
<li><p>Standard input by  <strong class="program">mpiexec</strong> command redirection specification cannnot be used as each parallel process standard input.</p></li>
</ul>
<blockquote>
<div><div class="admonition attention">
<p class="admonition-title">Attention</p>
<ul>
<li><div class="line-block">
<div class="line">You cannot specify the output options <code class="docutils literal notranslate"><span class="pre">-of/-std</span></code>,<code class="docutils literal notranslate"><span class="pre">-ofout/-stdout</span></code> and <code class="docutils literal notranslate"><span class="pre">-oferr/-stderr</span></code>for the <strong class="program">mpiexec</strong> command.</div>
<div class="line">If specified, the default settings apply (job acceptance is possible).</div>
<div class="line">The following error is output when executing the <strong class="program">mpiexec</strong> command.</div>
<div class="line">[WARN] PLE 0605 plexec ignore option -ofout/-stdout(stdout outputs to &lt;file_path&gt;).</div>
</div>
</li>
<li><div class="line-block">
<div class="line">You can specify the output options <code class="docutils literal notranslate"><span class="pre">-std-proc/-of-proc</span></code>,<code class="docutils literal notranslate"><span class="pre">-stdout-proc/-ofout-proc</span></code> and <code class="docutils literal notranslate"><span class="pre">-stderr-proc/-oferr-proc</span></code> for the <strong class="program">mpiexec</strong> command. See section 1-3 below for the operation when specified.</div>
</div>
</li>
</ul>
</div>
</div></blockquote>
<ol class="arabic">
<li><p>Output the standard output of each parallel process to a separate file.</p>
<p>The standard output from each parallel process is output to the file name specified in  <code class="docutils literal notranslate"><span class="pre">-stdout-proc</span></code> with the mpiexec execution count and rank number added.</p>
</li>
</ol>
<blockquote>
<div><div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>mpiexec<span class="w"> </span>-stdout-proc<span class="w"> </span>file_stdout<span class="w"> </span>-n<span class="w"> </span><span class="m">8</span><span class="w"> </span>./a.out
</pre></div>
</div>
<figure class="align-center">
<img alt="../_images/InputOutputRedirection_04.png" src="../_images/InputOutputRedirection_04.png" />
</figure>
<div class="admonition attention">
<p class="admonition-title">Attention</p>
<p>In the above example, the standard error output option is omitted, so the default file path is used for standard error output.</p>
</div>
</div></blockquote>
<ol class="arabic" start="2">
<li><p>Output the standard error output of each parallel process to a separate file.</p>
<p>The standard error output from each parallel process is output to the file name specified in  <code class="docutils literal notranslate"><span class="pre">-stderr-proc</span></code> with the mpiexec execution count and rank number added.</p>
</li>
</ol>
<blockquote>
<div><div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>mpiexec<span class="w"> </span>-stderr-proc<span class="w"> </span>file_stderr<span class="w"> </span>-n<span class="w"> </span><span class="m">8</span><span class="w"> </span>./a.out
</pre></div>
</div>
<figure class="align-center">
<img alt="../_images/InputOutputRedirection_05.png" src="../_images/InputOutputRedirection_05.png" />
</figure>
<div class="admonition attention">
<p class="admonition-title">Attention</p>
<p>In the above example, the standard output option is omitted, so the default file path is used for standard output.</p>
</div>
</div></blockquote>
<ol class="arabic" start="3">
<li><p>Output the standard output and standard error output of each parallel process to separate files.</p>
<p>The standard output / standard error output from each parallel process is output to the file name specified in  <code class="docutils literal notranslate"><span class="pre">-std-proc</span></code> with the mpiexec execution count and rank number added.</p>
</li>
</ol>
<blockquote>
<div><div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>mpiexec<span class="w"> </span>-std-proc<span class="w"> </span>file_outfile<span class="w"> </span>-n<span class="w"> </span><span class="m">8</span><span class="w"> </span>./a.out
</pre></div>
</div>
<figure class="align-center">
<img alt="../_images/InputOutputRedirection_06.png" src="../_images/InputOutputRedirection_06.png" />
</figure>
</div></blockquote>
<ol class="arabic" start="4">
<li><p>Input the standard input of the parallel process from the specified file.</p>
<p>This indicates the example of inputting standard input from  <code class="docutils literal notranslate"><span class="pre">file_stdin</span></code>.</p>
</li>
</ol>
<blockquote>
<div><div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>mpiexec<span class="w"> </span>-stdin<span class="w"> </span>file_stdin<span class="w"> </span>-n<span class="w"> </span><span class="m">8</span><span class="w"> </span>./a.out
</pre></div>
</div>
<figure class="align-center">
<img alt="../_images/InputOutputRedirection_07.png" src="../_images/InputOutputRedirection_07.png" />
</figure>
</div></blockquote>
</section>
<section id="output-list-by-option-specification">
<h2><span class="section-number">6.4.2. </span>Output list by option specification<a class="headerlink" href="#output-list-by-option-specification" title="Link to this heading">¶</a></h2>
<p>The table below lists the output destinations of the standard output and standard error output for parallel processes, depending on whether the output options for the <strong class="program">mpiexec</strong> command are specified.</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 26.3%" />
<col style="width: 21.1%" />
<col style="width: 26.3%" />
<col style="width: 26.3%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>mpiexec option specification</p></th>
<th class="head"><p>permission to use</p></th>
<th class="head"><p>Standard output</p></th>
<th class="head"><p>Standard error output</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>No -of/-std option specification</p></td>
<td><p>-</p></td>
<td><p>See “Standard Output File Naming Conventions” in <a class="reference internal" href="#stdspecmethod"><span class="std std-ref">How to specify standard output / standard error output / standard input</span></a>. (*1)</p></td>
<td><p>See “Standard Error Output File Naming Conventions” in <a class="reference internal" href="#stdspecmethod"><span class="std std-ref">How to specify standard output / standard error output / standard input</span></a>. (*2)</p></td>
</tr>
<tr class="row-odd"><td><p>Specified -of/-std</p></td>
<td><p>Unavailable</p></td>
<td><p>Same as *1 (Ignore option)</p></td>
<td><p>Same as *2 (Ignore option)</p></td>
</tr>
<tr class="row-even"><td><p>Specified -ofout/-stdout</p></td>
<td><p>Unavailable</p></td>
<td><p>Same as *1 (Ignore option)</p></td>
<td><p>Same as *2 (Ignore option)</p></td>
</tr>
<tr class="row-odd"><td><p>Specified -oferr/-stderr</p></td>
<td><p>Unavailable</p></td>
<td><p>Same as *1 (Ignore option)</p></td>
<td><p>Same as *2 (Ignore option)</p></td>
</tr>
<tr class="row-even"><td><p>Specified -of-proc/-std-proc</p></td>
<td><p>Available</p></td>
<td><p>Specified file name.<em>mpiexec.rank</em></p></td>
<td><p>Specified file name.<em>mpiexec.rank</em></p></td>
</tr>
<tr class="row-odd"><td><p>Specified -ofout-proc/-stdout-proc</p></td>
<td><p>Available</p></td>
<td><p>Specified file name.<em>mpiexec.rank</em></p></td>
<td><p>Same as *2</p></td>
</tr>
<tr class="row-even"><td><p>Specified -oferr-proc/-stderr-proc</p></td>
<td><p>Available</p></td>
<td><p>Same as *1</p></td>
<td><p>Specified file name.<em>mpiexec.rank</em></p></td>
</tr>
</tbody>
</table>
<div class="admonition attention">
<p class="admonition-title">Attention</p>
<p>The option settings for the <strong class="program">mpiexec</strong> command can be found in the <strong class="program">pjacl</strong> command.</p>
<p>You cannot change the option settings for the <strong class="program">mpiexec</strong> command.</p>
</div>
</section>
<section id="about-standard-output-standard-error-output-when-executing-large-scale-jobs">
<span id="stdoutstderroutforlargejobs"></span><h2><span class="section-number">6.4.3. </span>About standard output / standard error output when executing large-scale jobs<a class="headerlink" href="#about-standard-output-standard-error-output-when-executing-large-scale-jobs" title="Link to this heading">¶</a></h2>
<p>When running large jobs with more than 10,000 processes with   the Fugaku, You must prevent a large number of processes from concentrating access to a single file or to the same directory.</p>
<div class="line-block">
<div class="line">Even if the user program limits the output rank, when an error occurs, a message may be output from all ranks. So, please set the standard output / standard error output files separately for each rank.</div>
<div class="line">(*) The default is to split the directory every 1000 ranks and every mpiexec executions.</div>
</div>
<p>The default is not to create a file if there is no output to standard output/standard error output.
Whether or not to create an empty file can be set by the environment variable <code class="docutils literal notranslate"><span class="pre">PLE_MPI_STD_EMPTYFILE={on|off}</span></code> (default value is off).</p>
<p>Also, you can separate the output destination directory by using meta characters. Please devide directories to prevent increse of the mumber of files in one directory.
The directory is created even if you specify <code class="docutils literal notranslate"><span class="pre">PLE_MPI_STD_EMPTYFILE=off</span></code> (default value is off).</p>
<div class="line-block">
<div class="line">This example outputs a file according to the following conditions.</div>
<div class="line">- generate directory per job id</div>
<div class="line">- mpiexec Generate directories for each execution count</div>
<div class="line">- Generate directory by 500 ranks</div>
</div>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>mpiexec -stdout-proc ./output.%j/%m/%/500r/stdout -stderr-proc ./output.%j/%m/%/500r/stderr ./a.out
</pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">[_LNlogin]$ </span>ls<span class="w"> </span>-F<span class="w"> </span>output.jobid/
<span class="go">1/  2/</span>
<span class="gp">[_LNlogin]$ </span>ls<span class="w"> </span>-F<span class="w"> </span>output.jobid/1/
<span class="go">0/  500/  1000/  1500/  ...</span>
<span class="gp">[_LNlogin]$ </span>ls<span class="w"> </span>-F<span class="w"> </span>output.jobid/1/0/
<span class="go">stderr.1.0 stderr.1.1 ... stderr.1.499</span>
<span class="go">stdout.1.0 stdout.1.1 ... stdout.1.499</span>
</pre></div>
</div>
<p>The meanings of the meta characters used here are shown below.</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 20.0%" />
<col style="width: 80.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Meta characters</p></th>
<th class="head"><p>Meaning</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>%j</p></td>
<td><p>Job ID</p></td>
</tr>
<tr class="row-odd"><td><p>%m</p></td>
<td><p>Number of mpiexec command executions</p></td>
</tr>
<tr class="row-even"><td><p>%r</p></td>
<td><div class="line-block">
<div class="line">Rank number and spawn number</div>
<div class="line">For static process: rank number</div>
<div class="line">For dynamic process: rank number &#64;spawn number</div>
<div class="line">If the destination is for each mpiexec command, this is replaced with empty.</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><p>%/Nr</p></td>
<td><div class="line-block">
<div class="line">Rounds a rank or spawn number down to the nearest N.</div>
<div class="line">We use N=1000 in the above example.</div>
</div>
</td>
</tr>
</tbody>
</table>
<p>Please refer to ‘2.3.6.9 The standard output and standard error output of mpiexec command [FX]’ of manual ‘Job Operation Software End-user’s Guide’ for the details on the meta characters that can be used in the output destination file name of the mpiexec command.</p>
</section>
</section>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <div>
    <h3><a href="../index.html">Table of Contents</a></h3>
    <ul>
<li><a class="reference internal" href="#">6.4. Standard output / Standard error output / Standard input</a><ul>
<li><a class="reference internal" href="#how-to-specify-standard-output-standard-error-output-standard-input">6.4.1. How to specify standard output / standard error output / standard input</a></li>
<li><a class="reference internal" href="#output-list-by-option-specification">6.4.2. Output list by option specification</a></li>
<li><a class="reference internal" href="#about-standard-output-standard-error-output-when-executing-large-scale-jobs">6.4.3. About standard output / standard error output when executing large-scale jobs</a></li>
</ul>
</li>
</ul>

  </div>
  <div>
    <h4>Previous topic</h4>
    <p class="topless"><a href="HowToExecuteABackgroundJob.html"
                          title="previous chapter"><span class="section-number">6.3. </span>How to execute back ground job</a></p>
  </div>
  <div>
    <h4>Next topic</h4>
    <p class="topless"><a href="SpecificationsForMPIJob.html"
                          title="next chapter"><span class="section-number">6.5. </span>Specification when submitting an MPI job</a></p>
  </div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>document.getElementById('searchbox').style.display = "block"</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="SpecificationsForMPIJob.html" title="6.5. Specification when submitting an MPI job"
             >next</a></li>
        <li class="right" >
          <a href="HowToExecuteABackgroundJob.html" title="6.3. How to execute back ground job"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">Supercomputer Fugaku User Guide - Use and job execution -  documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="index.html" ><span class="section-number">6. </span>MPI job execution</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href=""><span class="section-number">6.4. </span>Standard output / Standard error output / Standard input</a></li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2025, RIKEN Center for Computational Science.
    &nbsp;&nbsp;<a href="https://www.fugaku.r-ccs.riken.jp/en/">Fugaku website Top</a>
    </div>
  </body>
</html>