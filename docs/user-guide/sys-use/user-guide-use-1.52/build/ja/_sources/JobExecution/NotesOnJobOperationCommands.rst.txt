ジョブ操作の留意事項
================================

ジョブの操作を行うコマンドは、ジョブの状態によって、オプションの要否や使用可否が変わります。

以下の各項の表では、ジョブに対する操作が、ジョブの状態やジョブの種類によって可能かどうかを示します。


.. seealso::

   表内の記号の意味は以下のとおりです。
   
    | 可　： ジョブに対する操作は可能
    | 不可： ジョブに対する操作は不可
    | －　： ジョブがその状態になることはない
   
   バルクジョブやステップジョブに関して、2段になっているセルは以下の意味になります。
   
    | 上段：バルクジョブやステップジョブに対する操作（操作対象としてジョブIDを指定する）
    | 下段：バルクジョブやステップジョブのサブジョブに対する操作（操作対象としてサブジョブIDを指定する）

   2段になっていないセルは、バルクジョブやステップジョブとそのサブジョブのどちらにも共通であることを示します。

ジョブの削除 (pjdel)
---------------------

ジョブの削除（\ :program:`pjdel`\ ）については以下のとおりです。

.. list-table:: 
   :widths: 2 2 2 2 2
   :header-rows: 1

   * - ジョブの状態
     - 通常ジョブ、マスタ・ワーカ型ジョブ
     - バルクジョブ
     - ステップジョブ
     - 会話型ジョブ

   * - ACCEPT
     - 可
     - 可
     - 可
     - 可

   * - REJECT
     - 不可
     - 不可
     - 不可
     - 不可

   * - QUEUED
     - 可
     - 可
     - 可
     - 可

   * - RUNNING-A
     - 可
     - | \－
       | 可（サブジョブ）
     - | \－
       | 可（サブジョブ）
     - 可

   * - RUNNING-P
     - 不可 :superscript:`*1`
     - | \－
       | 不可 :superscript:`*1` （サブジョブ）
     - 不可 :superscript:`*1`
     - 不可 :superscript:`*1`

   * - RUNNING
     - 可
     - 可
     - 可
     - 可

   * - RUNNING-E
     - 不可 :superscript:`*1`
     - | \－
       | 不可 :superscript:`*1` （サブジョブ）
     - 不可 :superscript:`*1`
     - 不可 :superscript:`*1`

   * - RUNOUT
     - 不可
     - | 可
       | 不可（サブジョブ）
     - | \－
       | 不可（サブジョブ）
     - 可

   * - CANCEL
     - 不可
     - 不可
     - 不可
     - 不可

   * - ERROR
     - 可
     - 可
     - 可
     - －

   * - EXIT
     - 不可
     - 不可
     - 不可
     - 不可

   * - HOLD
     - 可
     - 可
     - 可
     - －

   * - SUSPEND
     - 可
     - 可
     - 可
     - －

   * - SUSPENDED
     - 可
     - 可
     - 可
     - －

   * - RESUME
     - 可
     - 可
     - 可
     - －

.. note::

   (:superscript:`*1`) ``--enforce``\ オプションを指定すれば、操作が可能です。ただし、``--enforce``\ オプションを指定する権限が必要です。

ジョブの固定 (pjhold)
----------------------

ジョブの固定（\ :program:`pjhold`\ ）については以下のとおりです。

.. list-table:: 
   :widths: 2 2 2 2 2
   :header-rows: 1

   * - ジョブの状態
     - 通常ジョブ、マスタ・ワーカ型ジョブ
     - バルクジョブ
     - ステップジョブ
     - 会話型ジョブ

   * - ACCEPT
     - 不可
     - 不可
     - 不可
     - 不可

   * - REJECT
     - 不可
     - 不可
     - 不可
     - 不可

   * - QUEUED
     - 可
     - 可
     - 可
     - 不可

   * - RUNNING-A
     - 可 :superscript:`*1`
     - | －
       | 可 :superscript:`*1` （サブジョブ）
     - | －
       | 可 :superscript:`*1` （サブジョブ）
     - 不可

   * - RUNNING-P
     - 不可 :superscript:`*2`
     - | －
       | 不可 :superscript:`*2` （サブジョブ）
     - 不可 :superscript:`*2`
     - 不可

   * - RUNNING
     - 可 :superscript:`*1`
     - | 可 :superscript:`*3`
       | 可 :superscript:`*1` （サブジョブ）
     - 可 :superscript:`*1`
     - 不可

   * - RUNNING-E
     - 不可 :superscript:`*2`
     - | －
       | 不可 :superscript:`*2` （サブジョブ）
     - 不可 :superscript:`*2`
     - 不可

   * - RUNOUT
     - 不可
     - 不可
     - | －
       | 不可（サブジョブ）
     - 不可

   * - CANCEL
     - 不可
     - 不可
     - 不可
     - 不可

   * - ERROR
     - 不可
     - 不可
     - 不可
     - －

   * - EXIT
     - 不可
     - 不可
     - 不可
     - 不可

   * - HOLD
     - 不可
     - 不可
     - 不可
     - －

   * - SUSPEND
     - 可
     - 可
     - 可
     - －

   * - SUSPENDED
     - 可
     - 可
     - 可
     - －

   * - RESUME
     - 可
     - 可
     - 可
     - －

.. note::

  (:superscript:`*1`) ジョブやサブジョブの投入時に\ :program:`pjsub`\ コマンドの\ ``--norestart``\ オプションを指定している場合は、操作できません。
  
  (:superscript:`*2`) ``--enforce`` オプションを指定すれば、操作が可能です。ただし、\ ``--enforce``\ オプションを指定する権限が必要です。
  
  (:superscript:`*3`) バルクジョブ内の固定可能な状態のサブジョブが対象になります。固定できない状態のサブジョブは無視します。


ジョブの固定解除 (pjrls)
-------------------------

ジョブの固定解除（\ :program:`pjrls`\ ）については以下のとおりです。

.. list-table:: 
   :widths: 2 2 2 2 2
   :header-rows: 1

   * - ジョブの状態
     - 通常ジョブ、マスタ・ワーカ型ジョブ
     - バルクジョブ
     - ステップジョブ
     - 会話型ジョブ

   * - ACCEPT
     - 不可
     - 不可
     - 不可
     - 不可

   * - REJECT
     - 不可
     - 不可
     - 不可
     - 不可

   * - QUEUED
     - 不可
     - 不可
     - 不可
     - 不可

   * - RUNNING-A
     - 不可
     - | －
       | 不可（サブジョブ）
     - | －
       | 不可（サブジョブ）
     - 不可

   * - RUNNING-P
     - 不可
     - | －
       | 不可（サブジョブ）
     - 不可
     - 不可

   * - RUNNING
     - 不可
     - | 可 :superscript:`*1`
       | 不可（サブジョブ）
     - 不可
     - 不可

   * - RUNNING-E
     - 不可
     - | －
       | 不可（サブジョブ）
     - 不可
     - 不可

   * - RUNOUT
     - 不可
     - | 可 :superscript:`*1`
       | 不可（サブジョブ）
     - 不可
     - 不可

   * - CANCEL
     - 不可
     - 不可
     - 不可
     - 不可

   * - ERROR
     - 不可
     - 不可
     - 不可
     - －

   * - EXIT
     - 不可
     - 不可
     - 不可
     - 不可

   * - HOLD
     - 可
     - 可
     - 可
     - －

   * - SUSPEND
     - 不可
     - 不可
     - 不可
     - －

   * - SUSPENDED
     - 不可
     - 不可
     - 不可
     - －

   * - RESUME
     - 不可
     - 不可
     - 不可
     - －

.. note::

   (:superscript:`*1`) バルクジョブ内の固定解除可能な状態のサブジョブが対象になります。固定解除できない状態のサブジョブは無視します。

ジョブの待ち合わせ (pjwait)
----------------------------

ジョブの待ち合わせ（\ :program:`pjwait`\ ）については以下のとおりです。

.. list-table:: 
   :widths: 2 2 2 2 2
   :header-rows: 1

   * - ジョブの状態
     - 通常ジョブ、マスタ・ワーカ型ジョブ
     - バルクジョブ
     - ステップジョブ
     - 会話型ジョブ

   * - ACCEPT
     - 可
     - 可
     - 可
     - 可 :superscript:`*1`

   * - REJECT
     - 可
     - 可
     - 可
     - 可 :superscript:`*1`

   * - QUEUED
     - 可
     - 可
     - 可
     - 可 :superscript:`*1`

   * - RUNNING-A
     - 可
     - | －
       | 可（サブジョブ）
     - | －
       | 可（サブジョブ）
     - 可 :superscript:`*1`

   * - RUNNING-P
     - 可
     - | －
       | 可（サブジョブ）
     - 可
     - 可 :superscript:`*1`

   * - RUNNING
     - 可
     - 可
     - 可
     - 可 :superscript:`*1`

   * - RUNNING-E
     - 可
     - | －
       | 可（サブジョブ）
     - 可
     - 可 :superscript:`*1`

   * - RUNOUT
     - 可
     - 可
     - | －
       | 可（サブジョブ）
     - 可 :superscript:`*1`

   * - CANCEL
     - 可
     - 可
     - 可
     - 可 :superscript:`*1`

   * - ERROR
     - 可
     - 可
     - 可
     - －

   * - EXIT
     - 可
     - 可
     - 可
     - 可 :superscript:`*1`

   * - HOLD
     - 可
     - 可
     - 可
     - －

   * - SUSPEND
     - 可
     - 可
     - 可
     - －

   * - SUSPENDED
     - 可
     - 可
     - 可
     - －

   * - RESUME
     - 可
     - 可
     - 可
     - －

.. note::

   (:superscript:`*1`) :program:`pjwait`\ コマンドは、会話型ジョブの終了は待ち合わせず、また情報を何も表示せずに正常終了します。

ジョブに対するシグナル送信 (pjsig)
-----------------------------------

ジョブに対するシグナル送信（\ :program:`pjsig`\ ）については以下のとおりです。

.. list-table:: 
   :widths: 2 2 2 2 2
   :header-rows: 1

   * - ジョブの状態
     - 通常ジョブ、マスタ・ワーカ型ジョブ
     - バルクジョブ
     - ステップジョブ
     - 会話型ジョブ

   * - ACCEPT
     - 不可
     - 不可
     - 不可
     - 不可

   * - REJECT
     - 不可
     - 不可
     - 不可
     - 不可

   * - QUEUED
     - 不可
     - 不可
     - 不可
     - 不可

   * - RUNNING-A
     - 不可
     - | －
       | 不可（サブジョブ）
     - | －
       | 不可（サブジョブ）
     - 不可

   * - RUNNING-P
     - 不可
     - | －
       | 不可（サブジョブ）
     - 不可
     - 不可

   * - RUNNING
     - 可
     - 可
     - 可
     - 可

   * - RUNNING-E
     - 不可
     - | －
       | 不可（サブジョブ）
     - 不可
     - 不可

   * - RUNOUT
     - 不可
     - 不可
     - | －
       | 不可（サブジョブ）
     - 不可

   * - CANCEL
     - 不可
     - 不可
     - 不可
     - 不可

   * - ERROR
     - 不可
     - 不可
     - 不可
     - －

   * - EXIT
     - 不可
     - 不可
     - 不可
     - 不可

   * - HOLD
     - 不可
     - 不可
     - 不可
     - －

   * - SUSPEND
     - 不可
     - 不可
     - 不可
     - －

   * - SUSPENDED
     - 不可
     - 不可
     - 不可
     - －

   * - RESUME
     - 不可
     - 不可
     - 不可
     - －

ジョブのパラメーター変更 (pjalter)
-----------------------------------

ジョブのパラメーター変更（\ :program:`pjalter`\ ）については以下のとおりです。

.. list-table:: 
   :widths: 2 2 2 2 2
   :header-rows: 1

   * - ジョブの状態
     - 通常ジョブ、マスタ・ワーカ型ジョブ
     - バルクジョブ
     - ステップジョブ
     - 会話型ジョブ

   * - ACCEPT
     - 不可
     - 不可
     - 不可
     - 不可

   * - REJECT
     - 不可
     - 不可
     - 不可
     - 不可

   * - QUEUED
     - 可
     - | 可
       | 不可（サブジョブ）
     - 可 :superscript:`*1`
     - 不可

   * - RUNNING-A
     - 不可
     - | －
       | 不可（サブジョブ）
     - | －
       | 不可（サブジョブ）
     - 不可

   * - RUNNING-P
     - 不可
     - | －
       | 不可（サブジョブ）
     - 不可
     - 不可

   * - RUNNING
     - 可 :superscript:`*2`
     - 可 :superscript:`*2`
     - 可 :superscript:`*2`
     - 不可

   * - RUNNING-E
     - 不可
     - | －
       | 不可（サブジョブ）
     - 不可
     - 不可

   * - RUNOUT
     - 不可
     - 不可
     - | －
       | 不可（サブジョブ）
     - 不可

   * - CANCEL
     - 不可
     - 不可
     - 不可
     - 不可

   * - ERROR
     - 可
     - | 可
       | 不可（サブジョブ）
     - 可 :superscript:`*1`
     - －

   * - EXIT
     - 不可
     - 不可
     - 不可
     - 不可

   * - HOLD
     - 可
     - | 可
       | 不可（サブジョブ）
     - 可 :superscript:`*1`
     - －

   * - SUSPEND
     - 不可
     - 不可
     - 不可
     - －

   * - SUSPENDED
     - 不可
     - 不可
     - 不可
     - －

   * - RESUME
     - 不可
     - 不可
     - 不可
     - －

.. note::

   (:superscript:`*1`) サブジョブに対する操作の場合、リソースユニット名の変更はできません。
   
   (:superscript:`*2`) 管理者がジョブ運用管理機能の設定で許可している場合、実行中のジョブに対する経過時間制限値の変更だけができます。ただし、エンドユーザの権限では、経過時間制限値の変更は短縮だけができます。
   

