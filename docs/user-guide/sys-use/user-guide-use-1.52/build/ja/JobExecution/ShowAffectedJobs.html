

<!doctype html>

<html lang="ja" data-content_root="../">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>5.19. 障害の影響を受けたジョブ一覧表示コマンド &#8212; 利用手引書 利用およびジョブ実行編  ドキュメント</title>
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=649a27d8" />
    <link rel="stylesheet" type="text/css" href="../_static/bizstyle.css?v=532c1bf3" />
    <link rel="stylesheet" type="text/css" href="../_static/custom.css?v=89e52957" />
    
    <script src="../_static/documentation_options.js?v=c033477b"></script>
    <script src="../_static/doctools.js?v=888ff710"></script>
    <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/translations.js?v=4dbe4bdc"></script>
    <script src="../_static/bizstyle.js"></script>
    <link rel="search" title="検索" href="../search.html" />
    <link rel="next" title="5.20. 留意事項" href="JobExecConsiderpoints.html" />
    <link rel="prev" title="5.18. TofuD TNR 統計情報の取得" href="TofuStatistics.html" />
    <meta name="viewport" content="width=device-width,initial-scale=1.0" />
    <!--[if lt IE 9]>
    <script src="_static/css3-mediaqueries.js"></script>
    <![endif]-->
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>ナビゲーション</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="JobExecConsiderpoints.html" title="5.20. 留意事項"
             accesskey="N">次へ</a></li>
        <li class="right" >
          <a href="TofuStatistics.html" title="5.18. TofuD TNR 統計情報の取得"
             accesskey="P">前へ</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">利用手引書 利用およびジョブ実行編  ドキュメント</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="index.html" accesskey="U"><span class="section-number">5. </span>ジョブ実行</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href=""><span class="section-number">5.19. </span>障害の影響を受けたジョブ一覧表示コマンド</a></li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <section id="id1">
<h1><span class="section-number">5.19. </span>障害の影響を受けたジョブ一覧表示コマンド<a class="headerlink" href="#id1" title="Link to this heading">¶</a></h1>
<section id="job-events">
<h2><span class="section-number">5.19.1. </span>job_events<a class="headerlink" href="#job-events" title="Link to this heading">¶</a></h2>
<p><strong class="program">job_events</strong> コマンドにて、以下を確認できます</p>
<ul class="simple">
<li><p>LLIO（第2階層ストレージキャッシュ）とFEFS（第2階層ストレージ）にてevictの影響を受けたジョブ</p></li>
<li><p>パワーキャッピングが発生したジョブ</p></li>
<li><p>OOM（Out of memory）が発生したジョブ</p></li>
<li><p>ハード故障の影響を受けたジョブ</p></li>
<li><p>LLIO利用制限超過が発生したジョブ</p></li>
<li><p>その他、システム障害の影響を受けたジョブ</p></li>
</ul>
<blockquote>
<div><dl>
<dt>evict</dt><dd><p>Lustre系ファイルシステムがもつ機能で、異常と判断したクライアントを切り離す処理です。</p>
<p>ファイルシステムを利用可能な状態に保つために行われます。</p>
</dd>
<dt>パワーキャッピング</dt><dd><p>制限電力を超えた場合にCPU周波数をNormalモードより低く抑え、消費電力を削減します。</p>
<p>詳細は<a class="reference internal" href="../PowerControlFunction/index.html#powermodeusage"><span class="std std-ref">使用例</span></a>を参照ください。</p>
</dd>
<dt>OOM（Out of memory）</dt><dd><p>ジョブ実行時に計算ノードでメモリ不足が発生した場合です。この場合、ジョブが異常終了します。</p>
</dd>
<dt>ハード故障</dt><dd><p>ハード故障です。</p>
</dd>
<dt>LLIO利用制限超過</dt><dd><p>LLIO利用制限を超過した場合です。</p>
</dd>
</dl>
</div></blockquote>
<p>[名前]</p>
<p><strong class="program">job_events</strong></p>
<p>[書式]</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>job_events [-g GROUP_NAME] [-c] [-h]
job_events [-g GROUP_NAME] --llio [-j JOBID]
</pre></div>
</div>
<p>[オプション]</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 18.2%" />
<col style="width: 81.8%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>オプション名</p></th>
<th class="head"><p>機能</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>-g GROUP_NAME</p></td>
<td><div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">-g</span></code> オプションで指定したグループのジョブが表示対象となります。ただし参照権限がない場合ジョブは表示されません。</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">-g</span></code> オプションはグループ名の指定が必須です。</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">-g</span></code> オプションがない場合は、実行者が所属する全グループのジョブが表示対象となります。</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><p>-c</p></td>
<td><div class="line-block">
<div class="line">検索結果をCSV形式で出力します。</div>
</div>
</td>
</tr>
<tr class="row-even"><td><p>--llio</p></td>
<td><div class="line-block">
<div class="line">LLIO利用制限超過が発生したファイルパスを表示します。</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><p>-j JOBID</p></td>
<td><div class="line-block">
<div class="line">表示対象が[JOBID]に指定したジョブとなります。※ <code class="docutils literal notranslate"><span class="pre">--llio</span></code> オプション指定時のみ使用可能</div>
</div>
</td>
</tr>
<tr class="row-even"><td><p>-h</p></td>
<td><p>ヘルプを表示します。</p></td>
</tr>
</tbody>
</table>
<p>[表示例]</p>
<ul class="simple">
<li><p>例1. 自身が所属する全てのグループを対象に、障害の影響を受けたジョブを確認する場合(デフォルト)</p></li>
</ul>
<blockquote>
<div><div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">[_LNlogin]$ </span>job_events
<span class="go">JOBID           RETRY MD USER    GROUP     ST  JOB_START           JOB_END             MESSAGES</span>
<span class="go">1111111             0 NM user01  group01   EXT 2024/04/12 13:21:50 2024/04/12 14:24:46 Filesystem I/O error</span>
<span class="go">2222222[2]          0 BU user02  group01   EXT 2024/05/17 14:47:49 2024/05/17 14:57:51 POWER CAPPING:2024/05/17 14:50:00</span>
<span class="go">2222222[3]          0 BU user02  group01   EXT 2024/05/17 14:47:49 2024/05/17 14:57:51 POWER CAPPING:2024/05/17 14:50:00,Filesystem I/O error</span>
<span class="go">3333333             0 NM user03  group01   EXT 2024/06/11 14:49:04 2024/06/11 14:53:11 CN high load</span>
<span class="go">4444444             0 NM user01  group02   EXT 2024/07/10 13:53:56 2024/07/10 13:54:18 Out Of Memory</span>
<span class="go">5555555             0 NM user02  group02   EXT 2024/08/02 18:21:36 2024/08/02 18:37:56 POWER CAPPING:2024/08/02 18:30:00,Filesystem I/O error,Out Of Memory</span>
<span class="go">5555555             1 NM user02  group02   EXT 2024/08/02 18:50:33 2024/08/02 19:42:12 Hardware error</span>
<span class="go">6666666             0 NM user04  group01   EXT 2024/09/13 10:41:36 2024/09/13 14:25:02 Out Of Memory,CN high load</span>
<span class="go">7777777             0 NM user05  group02   EXT 2024/10/04 12:11:14 2024/10/04 13:05:01 Job scheduler hang</span>
<span class="go">8888888             0 NM user01  group03   EXT 2024/10/18 20:07:15 2024/10/18 21:21:44 LLIO Limit Over</span>
</pre></div>
</div>
<p>各状況に応じ、メッセージが表示されます。</p>
<ul class="simple">
<li><p>evictの場合は &quot;Filesystem I/O error&quot; が表示されます。</p></li>
<li><p>パワーキャッピングの場合は &quot;POWER CAPPING:発生日時&quot; が表示されます。</p></li>
<li><p>OOMの場合は &quot;Out Of Memory&quot; が表示されます。</p></li>
<li><p>ハード故障の場合は &quot;Hardware error&quot; が表示されます。</p></li>
<li><p>LLIO利用制限超過が発生した場合は &quot;LLIO Limit Over&quot; と表示され、<strong class="program">job_events --llio</strong>コマンドで超過したファイルパスを確認できます。</p></li>
<li><p>上記以外の障害の影響を受けた場合は、その障害に応じたメッセージが表示されます。</p></li>
<li><p>影響を受けたジョブが存在しなかった場合は、&quot;There are no affected jobs.&quot; が表示されます。</p></li>
</ul>
</div></blockquote>
<ul class="simple">
<li><p>例2. 自身が所属するグループ(group01)を対象に、障害の影響を受けたジョブを確認する場合</p></li>
</ul>
<blockquote>
<div><div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">[_LNlogin]$ </span>job_events<span class="w"> </span>-g<span class="w"> </span>group01
<span class="go">JOBID           RETRY MD USER    GROUP     ST  JOB_START           JOB_END             MESSAGES</span>
<span class="go">1111111             0 NM user01  group01   EXT 2024/04/12 13:21:50 2024/04/12 14:24:46 Filesystem I/O error</span>
<span class="go">2222222[2]          0 BU user02  group01   EXT 2024/05/17 14:47:49 2024/05/17 14:57:51 POWER CAPPING:2024/05/17 14:50:00</span>
<span class="go">2222222[3]          0 BU user02  group01   EXT 2024/05/17 14:47:49 2024/05/17 14:57:51 POWER CAPPING:2024/05/17 14:50:00,Filesystem I/O error</span>
<span class="go">3333333             0 NM user03  group01   EXT 2024/06/11 14:49:04 2024/06/11 14:53:11 CN high load</span>
<span class="go">6666666             0 NM user04  group01   EXT 2024/09/13 10:41:36 2024/09/13 14:25:02 Out Of Memory,CN high load</span>
</pre></div>
</div>
</div></blockquote>
<ul class="simple">
<li><p>例3. 障害の影響を受けたジョブの情報を、CSV形式で表示する場合</p></li>
</ul>
<blockquote>
<div><div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">[_LNlogin]$ </span>job_events<span class="w"> </span>-c
<span class="go">JOBID,RETRY,MD,USER,GROUP,ST,JOB_START,JOB_END,MESSAGES</span>
<span class="go">1111111,0,NM,user01,group01,EXT,2024/04/12 13:21:50,2024/04/12 14:24:46,&quot;Filesystem I/O error&quot;</span>
<span class="go">2222222[2],0,BU,user02,group01,EXT,2024/05/17 14:47:49,2024/05/17 14:57:51,&quot;POWER CAPPING:2024/05/17 14:50:00&quot;</span>
<span class="go">2222222[3],0,BU,user02,group01,EXT,2024/05/17 14:47:49,2024/05/17 14:57:51,&quot;POWER CAPPING:2024/05/17 14:50:00,Filesystem I/O error&quot;</span>
<span class="go">3333333,0,NM,user03,group01,EXT,2024/06/11 14:49:04,2024/06/11 14:53:11,&quot;CN high load&quot;</span>
<span class="go">4444444,0,NM,user01,group02,EXT,2024/07/10 13:53:56,2024/07/10 13:54:18,&quot;Out Of Memory&quot;</span>
<span class="go">5555555,0,NM,user02,group02,EXT,2024/08/02 18:21:36,2024/08/02 18:37:56,&quot;POWER CAPPING:2024/08/02 18:30:00,Filesystem I/O error,Out Of Memory&quot;</span>
<span class="go">5555555,1,NM,user02,group02,EXT,2024/08/02 18:50:33,2024/08/02 19:42:12,&quot;Hardware error&quot;</span>
<span class="go">6666666,0,NM,user04,group01,EXT,2024/09/13 10:41:36,2024/09/13 14:25:02,&quot;Out Of Memory,CN high load&quot;</span>
<span class="go">7777777,0,NM,user05,group02,EXT,2024/10/04 12:11:14,2024/10/04 13:05:01,&quot;Job scheduler hang&quot;</span>
<span class="go">8888888,0,NM,user01,group03,EXT,2024/10/18 20:07:15,2024/10/18 21:21:44,&quot;LLIO Limit Over&quot;</span>
</pre></div>
</div>
</div></blockquote>
<ul class="simple">
<li><p>例4. LLIO利用制限超過が発生したファイルパスを確認する場合</p></li>
</ul>
<blockquote>
<div><div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">[_LNlogin]$ </span>job_events<span class="w"> </span>--llio
<span class="go">JOBID            FILEPATH</span>
<span class="go">123456789_1      /vol000?/groupA/data/AAAA/BBBB/CCCC/fileA</span>
<span class="go">123456789_1      /vol000?/groupA/data/AAAA/BBBB/CCCC/fileB</span>
<span class="go">123456789_2      /vol000?/groupA/data/AAAA/BBBB/CCCC/fileC</span>
<span class="go">123456800        /vol000?/groupB/data/DDDD/EEEE/FFFF/fileG</span>
<span class="go">123456801[1]     /vol000?/groupC/data/HHHH/IIII/JJJJ/fileK</span>
<span class="go">123456802        The path could not be found.</span>
</pre></div>
</div>
<ul class="simple">
<li><p>LLIO利用制限超過が発生したファイルパスを表示します。</p></li>
<li><p>一部のジョブではファイルパスが確認できない場合があり、その場合は &quot;The path could not be found.&quot; と表示されます。</p></li>
<li><p>影響を受けたジョブが存在しなかった場合は &quot;No jobs exceed the LLIO limit.&quot; が表示されます。</p></li>
</ul>
</div></blockquote>
<div class="admonition attention">
<p class="admonition-title">注意</p>
<p>evictの影響を受けた場合は、ジョブを再投入してください。</p>
<p>本コマンドは <strong class="program">pjstata</strong> コマンドの実行結果を利用しています。ジョブを大量に実行していると、出力まで時間を要する場合があります。</p>
<p>パワーキャッピングは、.statsファイル や <strong class="program">pjstat -s</strong>オプション でも発生有無を確認できます。</p>
<p>LLIO利用制限超過が発生した場合は、<a class="reference internal" href="../LayeredStorageAndLLIO/LLIOconsiderpoints.html#llioconsiderpoints"><span class="std std-ref">留意事項</span></a>を参照の上、対処をお願いします。</p>
</div>
<div class="admonition attention">
<p class="admonition-title">注意</p>
<p>障害が発生してから<strong class="program">job_events</strong> コマンドでその情報が反映されるまでにはタイムラグがあり、各機能によって異なります。</p>
<p>以下に各機能のタイムラグを示します。</p>
<blockquote>
<div><table class="docutils align-default">
<colgroup>
<col style="width: 71.4%" />
<col style="width: 28.6%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>機能</p></th>
<th class="head"><p>タイムラグ</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>evictの影響を受けたジョブ</p></td>
<td><div class="line-block">
<div class="line">2時間</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><p>パワーキャッピングが発生したジョブ</p></td>
<td><div class="line-block">
<div class="line">1日</div>
</div>
</td>
</tr>
<tr class="row-even"><td><p>OOM（Out of memory）が発生したジョブ</p></td>
<td><div class="line-block">
<div class="line">2時間</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><p>ハード故障の影響を受けたジョブ</p></td>
<td><div class="line-block">
<div class="line">1時間</div>
</div>
</td>
</tr>
<tr class="row-even"><td><p>LLIO利用制限超過が発生したジョブ</p></td>
<td><div class="line-block">
<div class="line">20分</div>
</div>
</td>
</tr>
</tbody>
</table>
</div></blockquote>
</div>
</section>
<section id="show-evict-node">
<h2><span class="section-number">5.19.2. </span>show_evict_node<a class="headerlink" href="#show-evict-node" title="Link to this heading">¶</a></h2>
<p>ログインノード、およびプリポスト環境で、ファイルシステムにてIOエラーが発生した可能性のある時間を表示する<strong class="program">show_evict_node</strong> コマンドについて説明します。</p>
<p>[名前]</p>
<p><strong class="program">show_evict_node</strong></p>
<p>[書式]</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>show_evict_node [--hostname HOSTNAME]
                [--start yyyy/mm/dd hh:mm:ss]
                [--end  yyyy/mm/dd hh:mm:ss]
</pre></div>
</div>
<p>[オプション]</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 18.2%" />
<col style="width: 81.8%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>オプション名</p></th>
<th class="head"><p>機能</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>--hostname HOSTNAME</p></td>
<td><div class="line-block">
<div class="line">表示対象とするノードを、 HOSTNAME で指定します。</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><p>--start yyyy/mm/dd hh:mm:ss</p></td>
<td><div class="line-block">
<div class="line">表示対象とする開始日時を、&quot;yyyy/mm/dd hh:mm:ss&quot;形式で指定します。</div>
</div>
</td>
</tr>
<tr class="row-even"><td><p>--end  yyyy/mm/dd hh:mm:ss</p></td>
<td><div class="line-block">
<div class="line">表示対象とする終了日時を、&quot;yyyy/mm/dd hh:mm:ss&quot;形式で指定します。</div>
</div>
</td>
</tr>
</tbody>
</table>
<p>[表示例]</p>
<blockquote>
<div><div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">[_LNlogin]$ </span>show_evict_node
<span class="go">NODE    FSNAME  DATE</span>
<span class="go">ppm02   vol0006 2021/10/14 19:22:04 - 2021/10/14 19:26:14</span>
<span class="go">csgw1   vol0004 2021/10/14 03:00:06 - 2021/10/14 03:01:42</span>
<span class="go">ppm02   vol0003 2021/10/16 16:08:16 - 2021/10/16 16:10:14</span>
<span class="go">login6  vol0004 2021/10/25 12:35:28</span>
<span class="go">login3  vol0005 2021/11/07 13:37:53 - 2021/11/07 13:38:06</span>
<span class="go">login3  vol0001 2021/11/07 14:08:28 - 2021/11/07 14:09:05</span>
</pre></div>
</div>
</div></blockquote>
</section>
</section>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <div>
    <h3><a href="../index.html">目次</a></h3>
    <ul>
<li><a class="reference internal" href="#">5.19. 障害の影響を受けたジョブ一覧表示コマンド</a><ul>
<li><a class="reference internal" href="#job-events">5.19.1. job_events</a></li>
<li><a class="reference internal" href="#show-evict-node">5.19.2. show_evict_node</a></li>
</ul>
</li>
</ul>

  </div>
  <div>
    <h4>前のトピックへ</h4>
    <p class="topless"><a href="TofuStatistics.html"
                          title="前の章へ"><span class="section-number">5.18. </span>TofuD TNR 統計情報の取得</a></p>
  </div>
  <div>
    <h4>次のトピックへ</h4>
    <p class="topless"><a href="JobExecConsiderpoints.html"
                          title="次の章へ"><span class="section-number">5.20. </span>留意事項</a></p>
  </div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">クイック検索</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="検索" />
    </form>
    </div>
</div>
<script>document.getElementById('searchbox').style.display = "block"</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>ナビゲーション</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="JobExecConsiderpoints.html" title="5.20. 留意事項"
             >次へ</a></li>
        <li class="right" >
          <a href="TofuStatistics.html" title="5.18. TofuD TNR 統計情報の取得"
             >前へ</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">利用手引書 利用およびジョブ実行編  ドキュメント</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="index.html" ><span class="section-number">5. </span>ジョブ実行</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href=""><span class="section-number">5.19. </span>障害の影響を受けたジョブ一覧表示コマンド</a></li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2025, 理化学研究所計算科学研究センター.
    &nbsp;&nbsp;<a href="https://www.fugaku.r-ccs.riken.jp/">Fugaku website Top</a>
    </div>
  </body>
</html>