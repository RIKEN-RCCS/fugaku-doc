

<!doctype html>

<html lang="ja" data-content_root="../../../">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>3.1.11.4. CPU性能解析レポート &#8212; 利用手引書 言語開発環境編  ドキュメント</title>
    <link rel="stylesheet" type="text/css" href="../../../_static/pygments.css?v=649a27d8" />
    <link rel="stylesheet" type="text/css" href="../../../_static/bizstyle.css?v=532c1bf3" />
    <link rel="stylesheet" type="text/css" href="../../../_static/custom.css?v=89e52957" />
    
    <script src="../../../_static/documentation_options.js?v=c033477b"></script>
    <script src="../../../_static/doctools.js?v=888ff710"></script>
    <script src="../../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../../../_static/translations.js?v=4dbe4bdc"></script>
    <script src="../../../_static/bizstyle.js"></script>
    <link rel="search" title="検索" href="../../../search.html" />
    <link rel="next" title="3.1.11.5. 注意事項" href="ImportantPoints.html" />
    <link rel="prev" title="3.1.11.3. 基本プロファイラ" href="InstantProfiler.html" />
    <meta name="viewport" content="width=device-width,initial-scale=1.0" />
    <!--[if lt IE 9]>
    <script src="_static/css3-mediaqueries.js"></script>
    <![endif]-->
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>ナビゲーション</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="ImportantPoints.html" title="3.1.11.5. 注意事項"
             accesskey="N">次へ</a></li>
        <li class="right" >
          <a href="InstantProfiler.html" title="3.1.11.3. 基本プロファイラ"
             accesskey="P">前へ</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../../index.html">利用手引書 言語開発環境編  ドキュメント</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../../index.html" ><span class="section-number">3. </span>計算ノード向けバイナリを生成するコンパイラ</a> &#187;</li>
          <li class="nav-item nav-item-2"><a href="../index.html" ><span class="section-number">3.1. </span>富士通コンパイラ</a> &#187;</li>
          <li class="nav-item nav-item-3"><a href="index.html" accesskey="U"><span class="section-number">3.1.11. </span>プロファイラ</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href=""><span class="section-number">3.1.11.4. </span>CPU性能解析レポート</a></li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <section id="cpu">
<h1><span class="section-number">3.1.11.4. </span>CPU性能解析レポート<a class="headerlink" href="#cpu" title="Link to this heading">¶</a></h1>
<p>CPU性能解析レポートは、複数の実行により計測した多数のCPU性能解析情報を集約し、表と付随するグラフを用いて可視化するものです。</p>
<section id="id1">
<h2><span class="section-number">3.1.11.4.1. </span>概要<a class="headerlink" href="#id1" title="Link to this heading">¶</a></h2>
<p>CPU性能解析レポートは、印刷時にA3サイズ1枚に収まるよう設計されており、表示する情報の種類や粒度によって以下のレポートを用意しています。</p>
<ul class="simple">
<li><p>単体レポート</p></li>
<li><p>簡易レポート</p></li>
<li><p>標準レポート</p></li>
<li><p>詳細レポート</p></li>
</ul>
<p>また、CPU性能解析レポートの作成手順は以下のとおりです。</p>
<figure class="align-default">
<img alt="../../../_images/CPUPerformanceAnalysisReport_01.png" src="../../../_images/CPUPerformanceAnalysisReport_01.png" />
</figure>
<div class="admonition seealso">
<p class="admonition-title">参考</p>
<p>CPU性能解析情報の計測には、詳細プロファイラを使用します。</p>
</div>
</section>
<section id="id2">
<h2><span class="section-number">3.1.11.4.2. </span>CPU性能解析レポート種別<a class="headerlink" href="#id2" title="Link to this heading">¶</a></h2>
<p>CPU性能解析レポートは、表示する情報の種類や粒度によって、単体レポート、簡易レポート、標準レポート、詳細レポートを用意しています。
CPU性能解析レポートのファイルはMicrosoft Excelのファイル形式(.xlsm)です。</p>
<p>各レポートの概要は以下のとおりです。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 20.0%" />
<col style="width: 80.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>レポート種別</p></th>
<th class="head"><p>説明</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>単体レポート</p></td>
<td><div class="line-block">
<div class="line">作成に必要な計測回数がもっとも少ないCPU性能解析レポートです。</div>
<div class="line">実行時間、演算性能、メモリースループット、命令数についてのおおまかな情報を出力します。</div>
<div class="line">単体レポートを使用する場合、詳細プロファイラによる計測を1回実施してください。</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><p>簡易レポート</p></td>
<td><div class="line-block">
<div class="line">作成に必要な計測回数が少ないCPU性能解析レポートです。</div>
<div class="line">手軽にCPU性能解析レポートを使用したい場合、簡易レポートを推奨します。情報量は標準レポートより少なくなりますが、レポート作成のための計測回数は標準レポートよりも削減できます。</div>
<div class="line">簡易レポートを使用する場合、詳細プロファイラによる計測を5回実施してください。</div>
</div>
</td>
</tr>
<tr class="row-even"><td><p>標準レポート</p></td>
<td><div class="line-block">
<div class="line">標準的なCPU性能解析レポートです。通常の使用では標準レポートを推奨します。</div>
<div class="line">標準レポートを使用する場合、詳細プロファイラによる計測を11回実施してください。</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><p>詳細レポート</p></td>
<td><div class="line-block">
<div class="line">もっとも詳細なCPU性能解析レポートです。</div>
<div class="line">標準レポートでは情報量に不足がある場合、詳細レポートを推奨します。レポート作成のための計測回数はもっとも多くなりますが、CPU性能解析レポートの全情報を表示します。</div>
<div class="line">詳細レポートを表示する場合、詳細プロファイラによる計測を17回実施してください。</div>
</div>
</td>
</tr>
</tbody>
</table>
<div class="admonition seealso">
<p class="admonition-title">参考</p>
<p>各レポートで使用する入力ファイルは共通です。そのため、例えば標準レポートを作成後に詳細レポートに変更したい場合、追加の計測は差分の6回分だけ必要となります。</p>
</div>
<p>各CPU性能解析レポートで参照可能な情報の一覧を以下に示します。</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 21.4%" />
<col style="width: 7.1%" />
<col style="width: 7.1%" />
<col style="width: 7.1%" />
<col style="width: 7.1%" />
<col style="width: 50.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>表タイトル</p></th>
<th class="head"><p>単体</p></th>
<th class="head"><p>簡易</p></th>
<th class="head"><p>標準</p></th>
<th class="head"><p>詳細</p></th>
<th class="head"><p>表の概要</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Information</p></td>
<td><p>○</p></td>
<td><p>○</p></td>
<td><p>○</p></td>
<td><p>○</p></td>
<td><p>計測環境の情報およびユーザーの指定内容を表示します。</p></td>
</tr>
<tr class="row-odd"><td><p>Statistics</p></td>
<td><p>△</p></td>
<td><p>○</p></td>
<td><p>○</p></td>
<td><p>○</p></td>
<td><dl class="simple">
<dt>[単体]</dt><dd><p>メモリースループット、命令数、演算数などCPUの動作状況に関係する情報を表示します。</p>
</dd>
<dt>[簡易・標準・詳細]</dt><dd><p>単体レポートの内容に加えて、浮動小数点演算における Active element の比率を表示します。</p>
</dd>
</dl>
</td>
</tr>
<tr class="row-even"><td><p>Cycle Accounting</p></td>
<td><p>×</p></td>
<td><p>△</p></td>
<td><p>○</p></td>
<td><p>○</p></td>
<td><p>プログラムの実行時間の内訳を表示します。</p>
<dl class="simple">
<dt>[簡易]</dt><dd><p>プログラムの実行時間を9種類に分類して表示します。</p>
</dd>
<dt>[標準・詳細]</dt><dd><p>プログラムの実行時間を20種類に分類して表示します。</p>
</dd>
</dl>
</td>
</tr>
<tr class="row-odd"><td><p>Busy</p></td>
<td><p>×</p></td>
<td><p>△</p></td>
<td><p>○</p></td>
<td><p>○</p></td>
<td><p>プログラムのメモリ・キャッシュおよび演算パイプラインのビジー率に関する情報を表示します。</p>
<dl class="simple">
<dt>[簡易]</dt><dd><p>1次キャッシュ、2次キャッシュ、メモリー、浮動小数点演算パイプラインなどのビジー率、および、SFI(Store Fetch Interlock)の発生率を表示します。</p>
</dd>
<dt>[標準]</dt><dd><p>簡易レポートの内容に加えて、整数演算パイプライン、アドレス計算用演算パイプライン、および、Predicate演算用演算パイプラインのビジー率を表示します</p>
</dd>
<dt>[詳細]</dt><dd><p>標準レポートの内容に加えて、L1パイプラインにおける Active element の比率を表示します。</p>
</dd>
</dl>
</td>
</tr>
<tr class="row-even"><td><p>Cache</p></td>
<td><p>×</p></td>
<td><p>△</p></td>
<td><p>○</p></td>
<td><p>○</p></td>
<td><p>キャッシュミスに関する情報を表示します。</p>
<dl class="simple">
<dt>[簡易]</dt><dd><p>簡易レポートの場合、1次データキャッシュ、2次キャッシュのキャッシュミス数、および、ロードストア命令数との比率を表示します。</p>
</dd>
<dt>[標準・詳細]</dt><dd><p>標準レポート、または、詳細レポートの場合、簡易レポートの内容に加えてキャッシュミス数の内訳を追加します。</p>
</dd>
</dl>
</td>
</tr>
<tr class="row-odd"><td><p>Instruction</p></td>
<td><p>×</p></td>
<td><p>△</p></td>
<td><p>△</p></td>
<td><p>○</p></td>
<td><p>命令ミックスに関する情報を表示します。</p>
<dl class="simple">
<dt>[簡易]</dt><dd><p>命令ミックスに関する情報を9種類に分類して表示します。</p>
</dd>
<dt>[標準]</dt><dd><p>命令ミックスに関する情報を25種類に分類して表示します。</p>
</dd>
<dt>[詳細]</dt><dd><p>命令ミックスに関する情報を28種類に分類して表示します。</p>
</dd>
</dl>
</td>
</tr>
<tr class="row-even"><td><p>FLOPS</p></td>
<td><p>×</p></td>
<td><p>△</p></td>
<td><p>○</p></td>
<td><p>○</p></td>
<td><p>浮動小数点演算に関する情報を表示します。</p>
<dl class="simple">
<dt>[簡易]</dt><dd><p>Active elementの比率を加味した浮動小数点演算性能を表示します。</p>
</dd>
<dt>[標準・詳細]</dt><dd><p>簡易レポートの内容に加えて各精度浮動小数点演算数の比率を表示します。</p>
</dd>
</dl>
</td>
</tr>
<tr class="row-odd"><td><p>Extra</p></td>
<td><p>×</p></td>
<td><p>×</p></td>
<td><p>×</p></td>
<td><p>○</p></td>
<td><p>ギャザー命令の内訳、および、命令ミックスに含まれない命令に関する情報を表示します</p></td>
</tr>
<tr class="row-even"><td><p>Hardware Prefetch Rate (%) (/HardwarePrefetch)</p></td>
<td><p>×</p></td>
<td><p>×</p></td>
<td><p>×</p></td>
<td><p>○</p></td>
<td><p>ハードウェアプリフェッチの内訳を表示します。</p></td>
</tr>
<tr class="row-odd"><td><p>Data Transfer CMGs</p></td>
<td><p>×</p></td>
<td><p>×</p></td>
<td><p>×</p></td>
<td><p>○</p></td>
<td><p>ユーザーが指定したCMGに対する、全CMG、メモリ、Tofu、およびPCI間のスループット情報を表示します。</p></td>
</tr>
<tr class="row-even"><td><p>Power Consumption (W)</p></td>
<td><p>×</p></td>
<td><p>×</p></td>
<td><p>○</p></td>
<td><p>○</p></td>
<td><p>コア、L2キャッシュ、および、メモリの消費電力を表示します。</p></td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="admonition-title">注釈</p>
<p>表内の見出し、記号の略称と説明は以下のとおりです。</p>
<ul class="simple">
<li><p>単体：単体レポート</p></li>
<li><p>簡易：簡易レポート</p></li>
<li><p>標準：標準レポート</p></li>
<li><p>詳細：詳細レポート</p></li>
<li><p>○：すべての情報が出力される</p></li>
<li><p>△：一部の情報が出力される</p></li>
<li><p>×：情報が出力されない</p></li>
</ul>
</div>
</section>
<section id="id3">
<h2><span class="section-number">3.1.11.4.3. </span>計測区間指定ルーチンの追加<a class="headerlink" href="#id3" title="Link to this heading">¶</a></h2>
<p>プロファイルデータを計測する区間の指定に必要な計測区間指定ルーチン／関数をソースコードに追加します。</p>
<p>計測区間指定機能は、Fortran言語のサブルーチン、C／C++の関数として使用可能です。
C／C++の関数を使用する場合は、関数のプロトタイプを宣言するか、または、プロファイラサブルーチンのヘッダファイルをインクルードする必要があります。</p>
<blockquote>
<div><table class="docutils align-default">
<colgroup>
<col style="width: 11.1%" />
<col style="width: 22.2%" />
<col style="width: 22.2%" />
<col style="width: 22.2%" />
<col style="width: 22.2%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>言語種別</p></th>
<th class="head"><p>ヘッダファイル</p></th>
<th class="head"><p>サブルーチン／関数名</p></th>
<th class="head"><p>引数</p></th>
<th class="head"><p>機能</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Fortran</p></td>
<td><p>なし</p></td>
<td><div class="line-block">
<div class="line">fapp_start</div>
<div class="line">fapp_stop</div>
</div>
</td>
<td><p>(name, number, level)</p></td>
<td><div class="line-block">
<div class="line">情報測定開始</div>
<div class="line">情報測定終了</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><p>C/C++</p></td>
<td><p>fj_tool/fapp.h</p></td>
<td><div class="line-block">
<div class="line">void fapp_start</div>
<div class="line">void fapp_stop</div>
</div>
</td>
<td><p>(const char *name, int number, int level)</p></td>
<td><div class="line-block">
<div class="line">情報測定開始</div>
<div class="line">情報測定終了</div>
</div>
</td>
</tr>
</tbody>
</table>
<p>[引数の詳細]</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 20.0%" />
<col style="width: 80.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>引数</p></th>
<th class="head"><p>説明</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>name</p></td>
<td><p>グループ名（基本文字スカラ）。グループ名は、英字、数字、および下線から構成されます。他の文字は使用できません。</p></td>
</tr>
<tr class="row-odd"><td><p>number</p></td>
<td><p>詳細番号（4バイトの整数型）</p></td>
</tr>
<tr class="row-even"><td><p>level</p></td>
<td><p>プライオリティレベル（4バイトの整数型で0以上の整数）</p></td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="admonition-title">注釈</p>
<p>グループ名と詳細番号を組み合わせ、測定範囲名として区別します。プライオリティレベルが、<strong class="program">fapp</strong>コマンドの<code class="docutils literal notranslate"><span class="pre">-L</span></code>オプションの値より大きい場合は測定を行いません。</p>
</div>
<div class="admonition attention">
<p class="admonition-title">注意</p>
<ul class="simple">
<li><p>同じ計測区間名のサブルーチン／関数を複数回呼び出す場合、必ず fapp_start、fapp_stop の順番で呼び出してください。fapp_stop を呼び出す前に再度 fapp_start を呼び出した場合、または、fapp_start を呼び出す前に fapp_stop を呼び出した場合、警告メッセージを出力し、その呼び出しを無視します。</p></li>
<li><p>計測区間名が異なる場合、fapp_start、または、fapp_stopが連続しても問題ありません。</p></li>
<li><p>fapp_stop を呼び出さずにプロセスが終了した場合、その区間のプロファイルデータは計測しません。</p></li>
<li><p>同一の計測区間名に対する計測を複数回実施した場合、全ての計測結果を合算します。</p></li>
<li><p>引数 level の値は、fapp_start と fapp_stop で同じ値を指定してください。異なる値を指定した場合、 <strong class="program">fapp</strong>コマンドの <code class="docutils literal notranslate"><span class="pre">-L</span></code> オプションの指定によっては意図しない結果となる可能性があります。</p></li>
<li><p>引数<code class="docutils literal notranslate"><span class="pre">name</span></code>に &quot;all&quot; かつ、<code class="docutils literal notranslate"><span class="pre">number</span></code>に 0 を指定した場合、プログラム全体が対象になります。</p></li>
<li><p>スレッド情報の計測はマスタースレッドで処理を開始します。マスタースレッド以外のスレッドが呼び出される範囲を計測する場合、マスタースレッドが動作する区間を含めた計測範囲にしてください。</p></li>
<li><p>MPIプログラムの場合、計測対象とするすべてのプロセスで同じ計測区間名のサブルーチン／関数を呼び出してください。呼び出しが行われなかったプロセスのプロファイルデータは計測されません。</p></li>
</ul>
</div>
</div></blockquote>
<p>計測区間指定ルーチンの使用例を示します。</p>
<ul>
<li><p>Fortranの例</p>
<ol class="arabic simple">
<li><p>サンプル指定例</p></li>
</ol>
<blockquote>
<div><div class="highlight-fortran notranslate"><div class="highlight"><pre><span></span><span class="k">program </span><span class="n">main</span>
<span class="p">...</span>
<span class="k">call </span><span class="n">fapp_start</span><span class="p">(</span><span class="s2">&quot;foo&quot;</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span><span class="w">         </span><span class="c">! 計測区間名&quot;foo1&quot;の計測を開始する</span>
<span class="k">do </span><span class="n">i</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span><span class="mi">10000</span>
<span class="w">  </span><span class="p">...</span>
<span class="w">  </span><span class="k">call </span><span class="n">fapp_start</span><span class="p">(</span><span class="s2">&quot;bar&quot;</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span><span class="w">       </span><span class="c">! 計測区間名&quot;bar1&quot;の計測を開始する</span>
<span class="w">  </span><span class="k">do </span><span class="n">j</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span><span class="mi">10000</span>
<span class="w">   </span><span class="p">...</span>
<span class="w">  </span><span class="k">end do</span>
<span class="k">  call </span><span class="n">fapp_stop</span><span class="p">(</span><span class="s2">&quot;bar&quot;</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span><span class="w">        </span><span class="c">! 計測区間名&quot;bar1&quot;の計測を終了する</span>
<span class="k">end do</span>
<span class="k">call </span><span class="n">fapp_stop</span><span class="p">(</span><span class="s2">&quot;foo&quot;</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span><span class="w">          </span><span class="c">! 計測区間名&quot;foo1&quot;の計測を終了する</span>
<span class="k">end program </span><span class="n">main</span>
</pre></div>
</div>
</div></blockquote>
<ol class="arabic simple" start="2">
<li><p>すべてのプロセスを計測対象とする例(mpi_initサブルーチンを呼び出す前に計測を開始する)</p></li>
</ol>
<blockquote>
<div><div class="highlight-fortran notranslate"><div class="highlight"><pre><span></span><span class="k">call </span><span class="n">fapp_start</span><span class="p">(</span><span class="s2">&quot;foo&quot;</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span><span class="w">         </span><span class="c">! 計測を開始する</span>
<span class="k">call </span><span class="n">mpi_init</span><span class="p">(</span><span class="n">err</span><span class="p">)</span>
<span class="p">...</span>
<span class="k">call </span><span class="n">mpi_finalize</span><span class="p">(</span><span class="n">err</span><span class="p">)</span>
<span class="k">call </span><span class="n">fapp_stop</span><span class="p">(</span><span class="s2">&quot;foo&quot;</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span><span class="w">          </span><span class="c">! 計測を終了する</span>
</pre></div>
</div>
</div></blockquote>
<ol class="arabic simple" start="3">
<li><p>すべてのプロセスを計測対象とする例(mpi_initサブルーチンを呼び出した直後に計測を開始する)</p></li>
</ol>
<blockquote>
<div><div class="highlight-fortran notranslate"><div class="highlight"><pre><span></span><span class="k">call </span><span class="n">mpi_init</span><span class="p">(</span><span class="n">err</span><span class="p">)</span>
<span class="k">call </span><span class="n">fapp_start</span><span class="p">(</span><span class="s2">&quot;foo&quot;</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span><span class="w">         </span><span class="c">! 計測を開始する</span>
<span class="p">...</span>
<span class="k">call </span><span class="n">fapp_stop</span><span class="p">(</span><span class="s2">&quot;foo&quot;</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span><span class="w">          </span><span class="c">! 計測を終了する</span>
<span class="k">call </span><span class="n">mpi_finalize</span><span class="p">(</span><span class="n">err</span><span class="p">)</span>
</pre></div>
</div>
</div></blockquote>
<ol class="arabic simple" start="4">
<li><p>プロセス0のみ計測対象とする例</p></li>
</ol>
<blockquote>
<div><div class="highlight-fortran notranslate"><div class="highlight"><pre><span></span><span class="k">call </span><span class="n">mpi_init</span><span class="p">(</span><span class="n">err</span><span class="p">)</span>
<span class="k">call </span><span class="n">mpi_comm_rank</span><span class="p">(</span><span class="n">mpi_comm_world</span><span class="p">,</span><span class="n">rank</span><span class="p">,</span><span class="n">err</span><span class="p">)</span>
<span class="k">if</span><span class="p">(</span><span class="n">rank</span><span class="o">==</span><span class="mi">0</span><span class="p">)</span><span class="w"> </span><span class="k">then</span>
<span class="k">  call </span><span class="n">fapp_start</span><span class="p">(</span><span class="s2">&quot;foo&quot;</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span><span class="w">       </span><span class="c">! プロセス0のみ、計測を開始する</span>
<span class="k">end if</span>
<span class="w">  </span><span class="p">...</span>
<span class="k">if</span><span class="p">(</span><span class="n">rank</span><span class="o">==</span><span class="mi">0</span><span class="p">)</span><span class="w"> </span><span class="k">then</span>
<span class="k">  call </span><span class="n">fapp_stop</span><span class="p">(</span><span class="s2">&quot;foo&quot;</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span><span class="w">        </span><span class="c">! プロセス0のみ、計測を終了する</span>
<span class="k">end if</span>
<span class="k">call </span><span class="n">mpi_finalize</span><span class="p">(</span><span class="n">err</span><span class="p">)</span>
</pre></div>
</div>
</div></blockquote>
</li>
<li><p>C/C++の例</p>
<ol class="arabic simple">
<li><p>サンプル指定例</p></li>
</ol>
<blockquote>
<div><div class="highlight-C notranslate"><div class="highlight"><pre><span></span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&quot;fj_tool/fapp.h&quot;</span><span class="c1">          // ヘッダーファイルのインクルード</span>
<span class="p">...</span>
<span class="kt">int</span><span class="w"> </span><span class="n">main</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span>
<span class="p">{</span>
<span class="w">  </span><span class="kt">int</span><span class="w"> </span><span class="n">i</span><span class="p">,</span><span class="n">j</span><span class="p">;</span>
<span class="w">  </span><span class="n">fapp_start</span><span class="p">(</span><span class="s">&quot;foo&quot;</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">);</span><span class="w">           </span><span class="c1">// 計測区間名&quot;foo1&quot;の計測を開始する</span>
<span class="w">  </span><span class="k">for</span><span class="p">(</span><span class="n">i</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span><span class="n">i</span><span class="o">&lt;</span><span class="mi">10000</span><span class="p">;</span><span class="n">i</span><span class="o">++</span><span class="p">){</span>
<span class="w">    </span><span class="p">...</span>
<span class="w">    </span><span class="n">fapp_start</span><span class="p">(</span><span class="s">&quot;bar&quot;</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">);</span><span class="w">         </span><span class="c1">// 計測区間名&quot;bar1&quot;の計測を開始する</span>
<span class="w">    </span><span class="k">for</span><span class="p">(</span><span class="n">j</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span><span class="n">j</span><span class="o">&lt;</span><span class="mi">10000</span><span class="p">;</span><span class="n">j</span><span class="o">++</span><span class="p">){</span>
<span class="w">       </span><span class="p">...</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="n">fapp_stop</span><span class="p">(</span><span class="s">&quot;bar&quot;</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">);</span><span class="w">          </span><span class="c1">// 計測区間名&quot;bar1&quot;の計測を終了する</span>
<span class="w">  </span><span class="p">}</span>
<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="w">  </span><span class="n">fapp_stop</span><span class="p">(</span><span class="s">&quot;foo&quot;</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">);</span><span class="w">            </span><span class="c1">// 計測区間名&quot;foo1&quot;の計測を終了する</span>
<span class="p">}</span>
</pre></div>
</div>
</div></blockquote>
<ol class="arabic simple" start="2">
<li><p>すべてのプロセスを計測対象とする例(MPI_Init関数を呼び出す前に計測を開始する)</p></li>
</ol>
<blockquote>
<div><div class="highlight-C notranslate"><div class="highlight"><pre><span></span><span class="n">fapp_start</span><span class="p">(</span><span class="s">&quot;foo&quot;</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">);</span><span class="w">             </span><span class="c1">// 計測を開始する</span>
<span class="n">MPI_Init</span><span class="p">(</span><span class="o">&amp;</span><span class="n">argc</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">argv</span><span class="p">);</span>
<span class="p">...</span>
<span class="n">MPI_Finalize</span><span class="p">();</span>
<span class="n">fapp_stop</span><span class="p">(</span><span class="s">&quot;foo&quot;</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">);</span><span class="w">              </span><span class="c1">// 計測を終了する</span>
</pre></div>
</div>
</div></blockquote>
<ol class="arabic simple" start="3">
<li><p>すべてのプロセスを計測対象とする例(MPI_Init関数を呼び出した直後に計測を開始する)</p></li>
</ol>
<blockquote>
<div><div class="highlight-C notranslate"><div class="highlight"><pre><span></span><span class="n">MPI_Init</span><span class="p">(</span><span class="o">&amp;</span><span class="n">argc</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">argv</span><span class="p">);</span>
<span class="n">fapp_start</span><span class="p">(</span><span class="s">&quot;foo&quot;</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">);</span><span class="w">             </span><span class="c1">// 計測を開始する</span>
<span class="p">...</span>
<span class="n">fapp_stop</span><span class="p">(</span><span class="s">&quot;foo&quot;</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">);</span><span class="w">              </span><span class="c1">// 計測を終了する</span>
<span class="n">MPI_Finalize</span><span class="p">();</span>
</pre></div>
</div>
</div></blockquote>
<ol class="arabic simple" start="4">
<li><p>プロセス0のみ計測対象とする例</p></li>
</ol>
<blockquote>
<div><div class="highlight-C notranslate"><div class="highlight"><pre><span></span><span class="n">MPI_Init</span><span class="p">(</span><span class="o">&amp;</span><span class="n">argc</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">argv</span><span class="p">);</span>
<span class="n">MPI_Comm_rank</span><span class="p">(</span><span class="n">MPI_COMM_WORLD</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">rank</span><span class="p">);</span>
<span class="k">if</span><span class="p">(</span><span class="n">rank</span><span class="o">==</span><span class="mi">0</span><span class="p">){</span>
<span class="w">  </span><span class="n">fapp_start</span><span class="p">(</span><span class="s">&quot;foo&quot;</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">);</span><span class="w">           </span><span class="c1">// プロセス0のみ、計測を開始する</span>
<span class="p">}</span>
<span class="p">...</span>
<span class="k">if</span><span class="p">(</span><span class="n">rank</span><span class="o">==</span><span class="mi">0</span><span class="p">){</span>
<span class="w">  </span><span class="n">fapp_stop</span><span class="p">(</span><span class="s">&quot;foo&quot;</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">);</span><span class="w">            </span><span class="c1">// プロセス0のみ、計測を終了する</span>
<span class="p">}</span>
<span class="n">MPI_Finalize</span><span class="p">();</span>
</pre></div>
</div>
</div></blockquote>
</li>
</ul>
</section>
<section id="id4">
<h2><span class="section-number">3.1.11.4.4. </span>コンパイル／リンク<a class="headerlink" href="#id4" title="Link to this heading">¶</a></h2>
<div class="line-block">
<div class="line">詳細プロファイラ機能を利用するために必要なツールライブラリはコンパイル／リンク時にデフォルトでリンクされます。</div>
<div class="line">したがって、コンパイル／リンク時にプロファイラ用のオプション等はありません。</div>
<div class="line">なお、コンパイル／リンクは、ログインノード、または、計算ノードで行います。</div>
</div>
<ul class="simple">
<li><p>コンパイル／リンク例（MPIプログラムの場合）</p></li>
</ul>
<blockquote>
<div><div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">[_LNlogin]$ </span>mpifrtpx<span class="w"> </span>-Kfast,parallel<span class="w"> </span><span class="s2">&quot;ソースファイル名&quot;</span>
</pre></div>
</div>
</div></blockquote>
<ul class="simple">
<li><p>コンパイル／リンク例（逐次／スレッド並列プログラムの場合）</p></li>
</ul>
<blockquote>
<div><div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">[_LNlogin]$ </span>frtpx<span class="w"> </span>-Kfast,parallel<span class="w"> </span><span class="s2">&quot;ソースファイル名&quot;</span>
</pre></div>
</div>
<div class="admonition attention">
<p class="admonition-title">注意</p>
<p>分割コンパイルを行う場合は、適切なプロファイラのライブラリがリンクされるように、原則としてコンパイル時に指定した最適化オプションは、リンク時にも指定してください。</p>
<p>例）OpenMPを利用するプログラムは、リンク時にも<code class="docutils literal notranslate"><span class="pre">-Kopenmp</span></code>オプションを指定する。</p>
</div>
</div></blockquote>
<section id="fortran">
<h3><span class="section-number">3.1.11.4.4.1. </span>Fortranの翻訳時オプションについて<a class="headerlink" href="#fortran" title="Link to this heading">¶</a></h3>
<div class="line-block">
<div class="line">Fortranプログラムを翻訳する際に使用するプロファイラ向け翻訳時オプションを以下に示します。</div>
<div class="line">本オプションはリンク時に有効になります。</div>
</div>
<blockquote>
<div><table class="docutils align-default">
<colgroup>
<col style="width: 20.0%" />
<col style="width: 80.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>オプション</p></th>
<th class="head"><p>説明</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>-Nfjprof</p></td>
<td><p>ツールライブラリを結合します。
省略時は<code class="docutils literal notranslate"><span class="pre">-Nfjprof</span></code>が有効になります。</p></td>
</tr>
<tr class="row-odd"><td><p>-Nnofjprof</p></td>
<td><p>ツールライブラリを結合しません。
プロファイラを使用できません。</p></td>
</tr>
</tbody>
</table>
</div></blockquote>
</section>
<section id="c-c">
<h3><span class="section-number">3.1.11.4.4.2. </span>C/C++の翻訳時オプションについて<a class="headerlink" href="#c-c" title="Link to this heading">¶</a></h3>
<div class="line-block">
<div class="line">C／C++言語の場合、tradモードとclangモードという2種類のモードが存在します。</div>
<div class="line">それぞれのモードでプログラムを翻訳する際に使用するプロファイラ向け翻訳時オプションを以下に示します。</div>
<div class="line">本オプションはリンク時に有効になります。</div>
</div>
<blockquote>
<div><table class="docutils align-default">
<colgroup>
<col style="width: 10.0%" />
<col style="width: 20.0%" />
<col style="width: 70.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>モード</p></th>
<th class="head"><p>オプション</p></th>
<th class="head"><p>説明</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>trad</p></td>
<td><p>-Nfjprof</p></td>
<td><p>ツールライブラリを結合します。
省略時は<code class="docutils literal notranslate"><span class="pre">-Nfjprof</span></code>が有効になります。</p></td>
</tr>
<tr class="row-odd"><td><p>trad</p></td>
<td><p>-Nnofjprof</p></td>
<td><p>ツールライブラリを結合しません。
プロファイラは使用できません。</p></td>
</tr>
<tr class="row-even"><td><p>clang</p></td>
<td><p>-ffj-fjprof</p></td>
<td><p>ツールライブラリを結合します。
省略時は<code class="docutils literal notranslate"><span class="pre">-ffj-fjprof</span></code>が有効になります。</p></td>
</tr>
<tr class="row-odd"><td><p>clang</p></td>
<td><p>-ffj-no-fjprof</p></td>
<td><p>ツールライブラリを結合しません。
プロファイラは使用できません。</p></td>
</tr>
</tbody>
</table>
</div></blockquote>
</section>
</section>
<section id="cpuperformanceanalysisreportusageprocedure">
<span id="id5"></span><h2><span class="section-number">3.1.11.4.5. </span>プロファイルデータの計測<a class="headerlink" href="#cpuperformanceanalysisreportusageprocedure" title="Link to this heading">¶</a></h2>
<div class="line-block">
<div class="line">詳細プロファイラの<strong class="program">fapp</strong>コマンドを使用して計測します。CPU性能解析レポート用にプロファイルデータを計測する場合、<strong class="program">fapp</strong>コマンドに<code class="docutils literal notranslate"><span class="pre">-Hevent</span></code>オプションを指定する必要があります。</div>
<div class="line">本操作は計算ノードで実施します。</div>
</div>
<p>以下に、レポートごとの実行例を示します。</p>
<ul>
<li><p>単体レポート</p>
<p>単体レポートを作成する場合、<code class="docutils literal notranslate"><span class="pre">-Hevent=pa1</span></code> を指定した1回の計測を実施してください。</p>
</li>
</ul>
<blockquote>
<div><div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp"># </span>単体レポート作成時の計測例
<span class="go">fapp -C -d ./rep1 -Hevent=pa1 ./a.out</span>
</pre></div>
</div>
</div></blockquote>
<ul>
<li><p>簡易レポート</p>
<p>簡易レポートを作成する場合、<code class="docutils literal notranslate"><span class="pre">-Hevent=pa1</span></code>から<code class="docutils literal notranslate"><span class="pre">-Hevent=pa5</span></code>を指定した5回の計測を実施してください。</p>
</li>
</ul>
<blockquote>
<div><div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp"># </span>簡易レポート作成時の計測例
<span class="go">fapp -C -d ./rep1 -Hevent=pa1 ./a.out</span>
<span class="go">fapp -C -d ./rep2 -Hevent=pa2 ./a.out</span>
<span class="go">fapp -C -d ./rep3 -Hevent=pa3 ./a.out</span>
<span class="go">fapp -C -d ./rep4 -Hevent=pa4 ./a.out</span>
<span class="go">fapp -C -d ./rep5 -Hevent=pa5 ./a.out</span>
</pre></div>
</div>
</div></blockquote>
<ul>
<li><p>標準レポート</p>
<p>標準レポートを作成する場合、<code class="docutils literal notranslate"><span class="pre">-Hevent=pa1</span></code>から<code class="docutils literal notranslate"><span class="pre">-Hevent=pa11</span></code>を指定した11回の計測を実施してください。</p>
</li>
</ul>
<blockquote>
<div><div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp"># </span>標準レポート作成時の計測例
<span class="go">fapp -C -d ./rep1  -Hevent=pa1  ./a.out</span>
<span class="go">fapp -C -d ./rep2  -Hevent=pa2  ./a.out</span>
<span class="go">fapp -C -d ./rep3  -Hevent=pa3  ./a.out</span>
<span class="go">fapp -C -d ./rep4  -Hevent=pa4  ./a.out</span>
<span class="go">fapp -C -d ./rep5  -Hevent=pa5  ./a.out</span>
<span class="go">fapp -C -d ./rep6  -Hevent=pa6  ./a.out</span>
<span class="go">fapp -C -d ./rep7  -Hevent=pa7  ./a.out</span>
<span class="go">fapp -C -d ./rep8  -Hevent=pa8  ./a.out</span>
<span class="go">fapp -C -d ./rep9  -Hevent=pa9  ./a.out</span>
<span class="go">fapp -C -d ./rep10 -Hevent=pa10 ./a.out</span>
<span class="go">fapp -C -d ./rep11 -Hevent=pa11 ./a.out</span>
</pre></div>
</div>
</div></blockquote>
<ul>
<li><p>詳細レポート</p>
<p>詳細レポートを作成する場合、<code class="docutils literal notranslate"><span class="pre">-Hevent=pa1</span></code>から<code class="docutils literal notranslate"><span class="pre">-Hevent=pa17</span></code>を指定した17回の計測を実施してください。</p>
</li>
</ul>
<blockquote>
<div><div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp"># </span>詳細レポート作成時の計測例
<span class="go">fapp -C -d ./rep1  -Hevent=pa1  ./a.out</span>
<span class="go">fapp -C -d ./rep2  -Hevent=pa2  ./a.out</span>
<span class="go">fapp -C -d ./rep3  -Hevent=pa3  ./a.out</span>
<span class="go">fapp -C -d ./rep4  -Hevent=pa4  ./a.out</span>
<span class="go">fapp -C -d ./rep5  -Hevent=pa5  ./a.out</span>
<span class="go">fapp -C -d ./rep6  -Hevent=pa6  ./a.out</span>
<span class="go">fapp -C -d ./rep7  -Hevent=pa7  ./a.out</span>
<span class="go">fapp -C -d ./rep8  -Hevent=pa8  ./a.out</span>
<span class="go">fapp -C -d ./rep9  -Hevent=pa9  ./a.out</span>
<span class="go">fapp -C -d ./rep10 -Hevent=pa10 ./a.out</span>
<span class="go">fapp -C -d ./rep11 -Hevent=pa11 ./a.out</span>
<span class="go">fapp -C -d ./rep12 -Hevent=pa12 ./a.out</span>
<span class="go">fapp -C -d ./rep13 -Hevent=pa13 ./a.out</span>
<span class="go">fapp -C -d ./rep14 -Hevent=pa14 ./a.out</span>
<span class="go">fapp -C -d ./rep15 -Hevent=pa15 ./a.out</span>
<span class="go">fapp -C -d ./rep16 -Hevent=pa16 ./a.out</span>
<span class="go">fapp -C -d ./rep17 -Hevent=pa17 ./a.out</span>
</pre></div>
</div>
</div></blockquote>
<div class="admonition attention">
<p class="admonition-title">注意</p>
<ul class="simple">
<li><p><strong class="program">fapp</strong>コマンドに<code class="docutils literal notranslate"><span class="pre">-Inocpupa</span></code>オプションを指定しないでください。<code class="docutils literal notranslate"><span class="pre">-Inocpupa</span></code>を指定すると、<code class="docutils literal notranslate"><span class="pre">-Hevent</span></code>オプションが無効になります。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">-Hevent</span></code>オプションは、1回の計測で1つだけ指定できます。複数個指定した場合は、最後に指定した<code class="docutils literal notranslate"><span class="pre">-Hevent</span></code> オプションが有効になります。</p></li>
<li><p>計測は、順不同です。例えば、<code class="docutils literal notranslate"><span class="pre">-Hevent=pa2</span></code>を指定して計測した後に<code class="docutils literal notranslate"><span class="pre">-Hevent=pa1</span></code>を指定して計測しても問題ありません。</p></li>
<li><p>計測した<code class="docutils literal notranslate"><span class="pre">-Hevent</span></code>オプションによって「<a class="reference internal" href="#cpuperformanceanalysisreportoutputprofileresults"><span class="std std-ref">プロファイル結果の出力</span></a>」で出力するCSV形式ファイルの名前が決まっています。そのため、計測したプロファイルデータを格納するディレクトリ名は、指定した引数が判断できるよう命名することを推奨します。</p></li>
</ul>
</div>
</section>
<section id="id6">
<h2><span class="section-number">3.1.11.4.6. </span>プロファイラのオプション<a class="headerlink" href="#id6" title="Link to this heading">¶</a></h2>
<p><strong class="program">fapp</strong>コマンドのオプションについて説明します。</p>
<blockquote>
<div><table class="docutils align-default">
<colgroup>
<col style="width: 30.0%" />
<col style="width: 70.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>オプション</p></th>
<th class="head"><p>説明</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><div class="line-block">
<div class="line">-C</div>
<div class="line">(必須オプション)</div>
</div>
</td>
<td><p>プロファイルデータの計測を指示します。本オプションを省略した場合、エラーメッセージを出力しプログラムの実行を終了します。</p></td>
</tr>
<tr class="row-odd"><td><div class="line-block">
<div class="line">-d  <em>profile_data</em></div>
<div class="line">(必須オプション)</div>
</div>
</td>
<td><div class="line-block">
<div class="line">プロファイルデータを格納するディレクトリを指定します。</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">profile_data</span></code>にはプロファイルデータを格納するディレクトリ名を、相対、または、絶対パスで指定します。指定したディレクトリは新規作成、または、空のディレクトリでなければいけません。</div>
<div class="line">実行中にカレントディレクトリを移動するプログラムを解析する場合、<code class="docutils literal notranslate"><span class="pre">profile_data</span></code>は絶対パスで指定してください。</div>
<div class="line">プロファイラは<code class="docutils literal notranslate"><span class="pre">profile_data</span></code>の下に1000ファイルごとのサブディレクトリを作成します。このため、大規模ジョブが対象の場合も<code class="docutils literal notranslate"><span class="pre">profile_data</span></code>を指定するだけで使用できます。</div>
</div>
</td>
</tr>
<tr class="row-even"><td><p>-H<em>item</em></p></td>
<td><div class="line-block">
<div class="line">CPU性能解析情報の計測オプションを指定します。</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">-Inocpupa</span></code>オプションが指定されていた場合、警告メッセージを出力して本オプションは無効になります。</div>
<div class="line">サブオプション<code class="docutils literal notranslate"><span class="pre">event=event</span></code>、または、<code class="docutils literal notranslate"><span class="pre">event_raw=event_raw</span></code>はどちらか1つを必ず指定してください。</div>
<div class="line"><em>item</em>：{event=<em>event</em> | event_raw=<em>event_raw</em> } [,method={fast | normal},mode={all | user}]</div>
</div>
<dl>
<dt>event=<em>event</em></dt><dd><p>CPU性能解析レポートに使用する情報を計測します。<em>event</em>には以下のいずれか1つを指定します。<code class="docutils literal notranslate"><span class="pre">pa1</span></code>と<code class="docutils literal notranslate"><span class="pre">statistics</span></code>は同値です。</p>
<p>{ pa1 | pa2 | pa3 | pa4 | pa5 | pa6 | pa7 | pa8 | pa9 | pa10 | pa11 | pa12 | pa13 | pa14 | pa15 | pa16 | pa17 | statistics}</p>
</dd>
<dt>event_raw=<em>event_raw</em></dt><dd><p>PMUイベント情報のイベント番号を指定して、CPU性能解析情報を計測します。<em>event_raw</em> には、CPUに対応したイベント番号を10進数または16進数表記で指定します。<em>event_raw</em> は、コンマ(,)で区切ることで、最大8個まで指定できます。</p>
</dd>
<dt>method=fast</dt><dd><p>CPU性能解析情報の計測方式を指定します。本サブオプションを指定した場合、ハードウェアの情報を直接計測する方式により、高精度のCPU性能解析情報の計測を行います。</p>
</dd>
<dt>method=normal</dt><dd><p>CPU性能解析情報の計測方式を指定します。本サブオプションを指定した場合、OSを経由して計測する方法によりCPU性能解析情報の計測を行います。省略時は、<code class="docutils literal notranslate"><span class="pre">method=normal</span></code>になります。</p>
</dd>
<dt>mode=all</dt><dd><p>CPU性能解析情報の計測モードを指定します。本サブオプションを指定した場合、カーネルモードおよびユーザーモードにおける性能計測を行います。<code class="docutils literal notranslate"><span class="pre">mode=</span></code>の省略時は、<code class="docutils literal notranslate"><span class="pre">mode=all</span></code>が有効になります。</p>
</dd>
<dt>mode=user</dt><dd><p>CPU性能解析情報の計測モードを指定します。本サブオプションを指定した場合、ユーザーモードにおける性能計測を行います。</p>
</dd>
</dl>
</td>
</tr>
<tr class="row-odd"><td><div class="line-block">
<div class="line">-I<em>item</em></div>
<div class="line">（ハイフン＋大文字アイ）</div>
</div>
</td>
<td><div class="line-block">
<div class="line">詳細プロファイラで計測する項目を指定します。複数の<em>item</em>を指定する場合は、カンマで区切ってください。</div>
<div class="line"><em>item</em> ：{{<code class="docutils literal notranslate"><span class="pre">cpupa</span></code> | <code class="docutils literal notranslate"><span class="pre">nocpupa</span></code>} | {<code class="docutils literal notranslate"><span class="pre">cputime</span></code> | <code class="docutils literal notranslate"><span class="pre">nocputime</span></code>} | {<code class="docutils literal notranslate"><span class="pre">mpi</span></code> | <code class="docutils literal notranslate"><span class="pre">nompi</span></code>}}</div>
</div>
<div class="line-block">
<div class="line">本オプション省略時の動作は、計測する項目により異なります。</div>
<div class="line">CPU動作状況の計測は、<code class="docutils literal notranslate"><span class="pre">-H</span></code>オプションが指定されている場合は、 <code class="docutils literal notranslate"><span class="pre">-Icpupa</span></code>が有効になり、<code class="docutils literal notranslate"><span class="pre">-H</span></code>オプションが指定されていない場合は、 <code class="docutils literal notranslate"><span class="pre">-Inocpupa</span></code>が有効になります。</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">-I{cputime|nocputime}</span></code>オプション省略時は、<code class="docutils literal notranslate"><span class="pre">-Icputime</span></code>オプションが有効になります。<code class="docutils literal notranslate"><span class="pre">-Icpupa</span></code>オプションが有効な場合のみ、<code class="docutils literal notranslate"><span class="pre">-Inocputime</span></code>が指定できます。</div>
<div class="line">MPIコスト情報の計測は、対象がMPIプログラムの場合は、<code class="docutils literal notranslate"><span class="pre">mpi</span></code>が有効になり、対象が非MPIプログラムの場合は、<code class="docutils literal notranslate"><span class="pre">nompi</span></code>が有効になります。</div>
</div>
<dl class="simple">
<dt>cpupa：</dt><dd><p>CPU動作状況を計測します。</p>
</dd>
<dt>nocpupa：</dt><dd><p>CPU動作状況を計測しません。</p>
</dd>
<dt>cputime：</dt><dd><p>ユーザCPU時間およびシステムCPU時間を計測します。</p>
</dd>
<dt>nocputime：</dt><dd><p>ユーザCPU時間およびシステムCPU時間を計測しないかわりに、CPU性能解析情報の計測にかかる時間を短縮します。</p>
</dd>
<dt>mpi：</dt><dd><p>MPIコスト情報を計測します。</p>
</dd>
<dt>nompi：</dt><dd><p>MPIコスト情報を計測しません。</p>
</dd>
</dl>
</td>
</tr>
<tr class="row-even"><td><p>-L <em>level</em></p></td>
<td><div class="line-block">
<div class="line">計測対象の起動レベルを指定します。</div>
<div class="line">level には 0 から 2,147,483,647 の範囲の整数値を指定します。本オプションは計測区間指定ルーチンの第3引数 level に対して意味を持ちます。 &quot;level&quot;&gt;=&quot;計測区間指定ルーチンの第3引数level&quot;の区間のみ計測対象として有効にします。</div>
<div class="line">本オプション省略時は、<code class="docutils literal notranslate"><span class="pre">-L</span> <span class="pre">0</span></code> が有効になります。</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><p>exec-file [ exec_option ... ]</p></td>
<td><p>プロファイルデータの計測対象となる実行ファイルとオプションを指定します。MPIプログラムの場合、<strong class="program">mpiexec</strong>から指定します。</p></td>
</tr>
</tbody>
</table>
</div></blockquote>
</section>
<section id="cpuperformanceanalysisreportoutputprofileresults">
<span id="id7"></span><h2><span class="section-number">3.1.11.4.7. </span>プロファイル結果の出力<a class="headerlink" href="#cpuperformanceanalysisreportoutputprofileresults" title="Link to this heading">¶</a></h2>
<div class="line-block">
<div class="line">詳細プロファイラの<code class="docutils literal notranslate"><span class="pre">fapppx</span></code>コマンドを使用して、CPU性能解析レポートに使用するCSV形式ファイルを出力します。CPU性能解析レポートの入力となるCSV形式ファイルを出力する場合、<code class="docutils literal notranslate"><span class="pre">fapppx</span></code>コマンドに<code class="docutils literal notranslate"><span class="pre">-tcsv</span></code>オプションを指定してください。</div>
</div>
<div class="line-block">
<div class="line">以下に、レポートごとの実行例を示します。</div>
<div class="line">なお、入力となるプロファイルデータについては「<a class="reference internal" href="AdvancedProfiler.html#advancedprofileroutputprofileresults"><span class="std std-ref">プロファイル結果の出力</span></a>」および「<a class="reference internal" href="#cpuperformanceanalysisreportusageprocedure"><span class="std std-ref">プロファイルデータの計測</span></a>」を参考にしてください。</div>
</div>
<ul>
<li><p>単体レポート</p>
<p>単体レポートを作成する場合、<code class="docutils literal notranslate"><span class="pre">-Hevent=pa1</span></code>のプロファイルデータを使用して、<code class="file docutils literal notranslate"><span class="pre">pa1.csv</span></code>の1個のCSV形式ファイルを出力してください。</p>
</li>
</ul>
<blockquote>
<div><div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp"># </span><span class="s2">&quot;rep1&quot;</span>ディレクトリに格納したプロファイルデータを、
<span class="gp"># </span>CPU性能解析レポート用にCSV形式で出力する例

<span class="gp">$ </span>fapppx<span class="w"> </span>-A<span class="w"> </span>-d<span class="w"> </span>./rep1<span class="w"> </span>-Icpupa<span class="w"> </span>-tcsv<span class="w"> </span>-o<span class="w"> </span>pa1.csv
</pre></div>
</div>
</div></blockquote>
<ul>
<li><p>簡易レポート</p>
<p>簡易レポートを作成する場合、<code class="docutils literal notranslate"><span class="pre">-Hevent=pa1</span></code>から<code class="docutils literal notranslate"><span class="pre">-Hevent=pa5</span></code>のプロファイルデータを使用して、<code class="file docutils literal notranslate"><span class="pre">pa1.csv</span></code>から<code class="file docutils literal notranslate"><span class="pre">pa5.csv</span></code>の5個のCSV形式ファイルを出力してください。</p>
</li>
</ul>
<blockquote>
<div><div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp"># </span><span class="s2">&quot;rep1&quot;</span>から<span class="s2">&quot;rep5&quot;</span>ディレクトリに格納したプロファイルデータを、
<span class="gp">#  </span>CPU性能解析レポート用にCSV形式で出力する例

<span class="gp">$ </span>fapppx<span class="w"> </span>-A<span class="w"> </span>-d<span class="w"> </span>./rep1<span class="w"> </span>-Icpupa<span class="w"> </span>-tcsv<span class="w"> </span>-o<span class="w"> </span>pa1.csv
<span class="gp">$ </span>fapppx<span class="w"> </span>-A<span class="w"> </span>-d<span class="w"> </span>./rep2<span class="w"> </span>-Icpupa<span class="w"> </span>-tcsv<span class="w"> </span>-o<span class="w"> </span>pa2.csv
<span class="gp">$ </span>fapppx<span class="w"> </span>-A<span class="w"> </span>-d<span class="w"> </span>./rep3<span class="w"> </span>-Icpupa<span class="w"> </span>-tcsv<span class="w"> </span>-o<span class="w"> </span>pa3.csv
<span class="gp">$ </span>fapppx<span class="w"> </span>-A<span class="w"> </span>-d<span class="w"> </span>./rep4<span class="w"> </span>-Icpupa<span class="w"> </span>-tcsv<span class="w"> </span>-o<span class="w"> </span>pa4.csv
<span class="gp">$ </span>fapppx<span class="w"> </span>-A<span class="w"> </span>-d<span class="w"> </span>./rep5<span class="w"> </span>-Icpupa<span class="w"> </span>-tcsv<span class="w"> </span>-o<span class="w"> </span>pa5.csv
</pre></div>
</div>
</div></blockquote>
<ul>
<li><p>標準レポート</p>
<p>標準レポートを作成する場合、<code class="docutils literal notranslate"><span class="pre">-Hevent=pa1</span></code>から<code class="docutils literal notranslate"><span class="pre">-Hevent=pa11</span></code>のプロファイルデータを使用して、<code class="file docutils literal notranslate"><span class="pre">pa1.csv</span></code>から<code class="file docutils literal notranslate"><span class="pre">pa11.csv</span></code>の11個のCSV形式ファイルを出力してください。</p>
</li>
</ul>
<blockquote>
<div><div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp"># </span><span class="s2">&quot;rep1&quot;</span>から<span class="s2">&quot;rep11&quot;</span>ディレクトリに格納したプロファイルデータを、
<span class="gp">#  </span>CPU性能解析レポート用にCSV形式で出力する例

<span class="gp">$ </span>fapppx<span class="w"> </span>-A<span class="w"> </span>-d<span class="w"> </span>./rep1<span class="w">  </span>-Icpupa<span class="w"> </span>-tcsv<span class="w"> </span>-o<span class="w"> </span>pa1.csv
<span class="gp">$ </span>fapppx<span class="w"> </span>-A<span class="w"> </span>-d<span class="w"> </span>./rep2<span class="w">  </span>-Icpupa<span class="w"> </span>-tcsv<span class="w"> </span>-o<span class="w"> </span>pa2.csv
<span class="gp">$ </span>fapppx<span class="w"> </span>-A<span class="w"> </span>-d<span class="w"> </span>./rep3<span class="w">  </span>-Icpupa<span class="w"> </span>-tcsv<span class="w"> </span>-o<span class="w"> </span>pa3.csv
<span class="gp">$ </span>fapppx<span class="w"> </span>-A<span class="w"> </span>-d<span class="w"> </span>./rep4<span class="w">  </span>-Icpupa<span class="w"> </span>-tcsv<span class="w"> </span>-o<span class="w"> </span>pa4.csv
<span class="gp">$ </span>fapppx<span class="w"> </span>-A<span class="w"> </span>-d<span class="w"> </span>./rep5<span class="w">  </span>-Icpupa<span class="w"> </span>-tcsv<span class="w"> </span>-o<span class="w"> </span>pa5.csv
<span class="gp">$ </span>fapppx<span class="w"> </span>-A<span class="w"> </span>-d<span class="w"> </span>./rep6<span class="w">  </span>-Icpupa<span class="w"> </span>-tcsv<span class="w"> </span>-o<span class="w"> </span>pa6.csv
<span class="gp">$ </span>fapppx<span class="w"> </span>-A<span class="w"> </span>-d<span class="w"> </span>./rep7<span class="w">  </span>-Icpupa<span class="w"> </span>-tcsv<span class="w"> </span>-o<span class="w"> </span>pa7.csv
<span class="gp">$ </span>fapppx<span class="w"> </span>-A<span class="w"> </span>-d<span class="w"> </span>./rep8<span class="w">  </span>-Icpupa<span class="w"> </span>-tcsv<span class="w"> </span>-o<span class="w"> </span>pa8.csv
<span class="gp">$ </span>fapppx<span class="w"> </span>-A<span class="w"> </span>-d<span class="w"> </span>./rep9<span class="w">  </span>-Icpupa<span class="w"> </span>-tcsv<span class="w"> </span>-o<span class="w"> </span>pa9.csv
<span class="gp">$ </span>fapppx<span class="w"> </span>-A<span class="w"> </span>-d<span class="w"> </span>./rep10<span class="w"> </span>-Icpupa<span class="w"> </span>-tcsv<span class="w"> </span>-o<span class="w"> </span>pa10.csv
<span class="gp">$ </span>fapppx<span class="w"> </span>-A<span class="w"> </span>-d<span class="w"> </span>./rep11<span class="w"> </span>-Icpupa<span class="w"> </span>-tcsv<span class="w"> </span>-o<span class="w"> </span>pa11.csv
</pre></div>
</div>
</div></blockquote>
<ul>
<li><p>詳細レポート</p>
<p>詳細レポートを作成する場合、<code class="docutils literal notranslate"><span class="pre">-Hevent=pa1</span></code>から<code class="docutils literal notranslate"><span class="pre">-Hevent=pa17</span></code>のプロファイルデータを使用して、<code class="file docutils literal notranslate"><span class="pre">pa1.csv</span></code>から<code class="file docutils literal notranslate"><span class="pre">pa17.csv</span></code>の11個のCSV形式ファイルを出力してください。</p>
</li>
</ul>
<blockquote>
<div><div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp"># </span><span class="s2">&quot;rep1&quot;</span>から<span class="s2">&quot;rep17&quot;</span>ディレクトリに格納したプロファイルデータを、
<span class="gp">#  </span>CPU性能解析レポート用にCSV形式で出力する例

<span class="gp">$ </span>fapppx<span class="w"> </span>-A<span class="w"> </span>-d<span class="w"> </span>./rep1<span class="w">  </span>-Icpupa<span class="w"> </span>-tcsv<span class="w"> </span>-o<span class="w"> </span>pa1.csv
<span class="gp">$ </span>fapppx<span class="w"> </span>-A<span class="w"> </span>-d<span class="w"> </span>./rep2<span class="w">  </span>-Icpupa<span class="w"> </span>-tcsv<span class="w"> </span>-o<span class="w"> </span>pa2.csv
<span class="gp">$ </span>fapppx<span class="w"> </span>-A<span class="w"> </span>-d<span class="w"> </span>./rep3<span class="w">  </span>-Icpupa<span class="w"> </span>-tcsv<span class="w"> </span>-o<span class="w"> </span>pa3.csv
<span class="gp">$ </span>fapppx<span class="w"> </span>-A<span class="w"> </span>-d<span class="w"> </span>./rep4<span class="w">  </span>-Icpupa<span class="w"> </span>-tcsv<span class="w"> </span>-o<span class="w"> </span>pa4.csv
<span class="gp">$ </span>fapppx<span class="w"> </span>-A<span class="w"> </span>-d<span class="w"> </span>./rep5<span class="w">  </span>-Icpupa<span class="w"> </span>-tcsv<span class="w"> </span>-o<span class="w"> </span>pa5.csv
<span class="gp">$ </span>fapppx<span class="w"> </span>-A<span class="w"> </span>-d<span class="w"> </span>./rep6<span class="w">  </span>-Icpupa<span class="w"> </span>-tcsv<span class="w"> </span>-o<span class="w"> </span>pa6.csv
<span class="gp">$ </span>fapppx<span class="w"> </span>-A<span class="w"> </span>-d<span class="w"> </span>./rep7<span class="w">  </span>-Icpupa<span class="w"> </span>-tcsv<span class="w"> </span>-o<span class="w"> </span>pa7.csv
<span class="gp">$ </span>fapppx<span class="w"> </span>-A<span class="w"> </span>-d<span class="w"> </span>./rep8<span class="w">  </span>-Icpupa<span class="w"> </span>-tcsv<span class="w"> </span>-o<span class="w"> </span>pa8.csv
<span class="gp">$ </span>fapppx<span class="w"> </span>-A<span class="w"> </span>-d<span class="w"> </span>./rep9<span class="w">  </span>-Icpupa<span class="w"> </span>-tcsv<span class="w"> </span>-o<span class="w"> </span>pa9.csv
<span class="gp">$ </span>fapppx<span class="w"> </span>-A<span class="w"> </span>-d<span class="w"> </span>./rep10<span class="w"> </span>-Icpupa<span class="w"> </span>-tcsv<span class="w"> </span>-o<span class="w"> </span>pa10.csv
<span class="gp">$ </span>fapppx<span class="w"> </span>-A<span class="w"> </span>-d<span class="w"> </span>./rep11<span class="w"> </span>-Icpupa<span class="w"> </span>-tcsv<span class="w"> </span>-o<span class="w"> </span>pa11.csv
<span class="gp">$ </span>fapppx<span class="w"> </span>-A<span class="w"> </span>-d<span class="w"> </span>./rep12<span class="w"> </span>-Icpupa<span class="w"> </span>-tcsv<span class="w"> </span>-o<span class="w"> </span>pa12.csv
<span class="gp">$ </span>fapppx<span class="w"> </span>-A<span class="w"> </span>-d<span class="w"> </span>./rep13<span class="w"> </span>-Icpupa<span class="w"> </span>-tcsv<span class="w"> </span>-o<span class="w"> </span>pa13.csv
<span class="gp">$ </span>fapppx<span class="w"> </span>-A<span class="w"> </span>-d<span class="w"> </span>./rep14<span class="w"> </span>-Icpupa<span class="w"> </span>-tcsv<span class="w"> </span>-o<span class="w"> </span>pa14.csv
<span class="gp">$ </span>fapppx<span class="w"> </span>-A<span class="w"> </span>-d<span class="w"> </span>./rep15<span class="w"> </span>-Icpupa<span class="w"> </span>-tcsv<span class="w"> </span>-o<span class="w"> </span>pa15.csv
<span class="gp">$ </span>fapppx<span class="w"> </span>-A<span class="w"> </span>-d<span class="w"> </span>./rep16<span class="w"> </span>-Icpupa<span class="w"> </span>-tcsv<span class="w"> </span>-o<span class="w"> </span>pa16.csv
<span class="gp">$ </span>fapppx<span class="w"> </span>-A<span class="w"> </span>-d<span class="w"> </span>./rep17<span class="w"> </span>-Icpupa<span class="w"> </span>-tcsv<span class="w"> </span>-o<span class="w"> </span>pa17.csv
</pre></div>
</div>
</div></blockquote>
<div class="admonition attention">
<p class="admonition-title">注意</p>
<ul class="simple">
<li><p><strong class="program">fapppx</strong>コマンドに、<code class="docutils literal notranslate"><span class="pre">-Inocpupa</span></code>オプションを指定した場合、CPU性能解析レポートに必要な情報が出力されません。</p></li>
<li><p>出力は順不同です。例えば、pa2.csv を出力した後に、pa1.csv を出力しても問題ありません。</p></li>
</ul>
</div>
<div class="admonition attention">
<p class="admonition-title">注意</p>
<p>計測区間が多く、プロセス数も多い場合に、csvファイルがExcelの扱える最大行数（1048576行）を超える場合があります。
最大行数を越えた場合はExcelで読み込むことができないため<code class="docutils literal notranslate"><span class="pre">The</span> <span class="pre">file</span> <span class="pre">format</span> <span class="pre">is</span> <span class="pre">not</span> <span class="pre">supported</span></code>のメッセージを出力してCPU性能解析レポートが作成されません。</p>
<p>このような場合はcsvファイルへの出力を削減するように対処してください。</p>
<p>対処方法の例を次に示します。</p>
<ol class="arabic">
<li><dl class="simple">
<dt>fapp_start/fapp_stopの計測区間を削減</dt><dd><p>プログラム修正により計測区間を適宜削減します。</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>fapp_start(name,number,level)/fapp_stop(name,number,level)の引数levelの使用</dt><dd><p>プログラム修正を伴いますが、fapp_start/fapp_stopの記述はそのままで、引数levelで計測区間をレベル分けし、<strong class="program">fapp</strong>のオプション<code class="docutils literal notranslate"><span class="pre">-L</span></code>を用いることで必要としないレベルの区間の出力を抑止します。</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>fapppx -A -Icpupa,nompi によるMPI情報の出力抑止</dt><dd><p>MPI情報が不要な場合に有効です。</p>
</dd>
</dl>
</li>
<li><dl>
<dt>fapppx -A -p オプションによる出力プロセスの指定</dt><dd><p>採取対象のプロセスが判明している場合に有効です。</p>
<p>fapppx -A -p&lt;n&gt;,limit=&lt;m&gt;</p>
<p>nは出力するプロセスを指定します。複数のプロセスを指定する場合はカンマで区切ります。例えば<code class="docutils literal notranslate"><span class="pre">-p3,5,limit=10</span></code>のような指定ができます。
mは出力するプロセス数を指定します。nで指定したプロセスを含むコスト上位m件のプロセスを出力します。</p>
</dd>
</dl>
</li>
</ol>
</div>
</section>
<section id="id8">
<h2><span class="section-number">3.1.11.4.8. </span>CPU性能解析レポートの作成<a class="headerlink" href="#id8" title="Link to this heading">¶</a></h2>
<p>詳細プロファイラの<code class="docutils literal notranslate"><span class="pre">fapppx</span></code>コマンドにより出力したCSVファイルを、以下の手順でCPU性能解析レポートに取り込みます。</p>
<ol class="arabic simple">
<li><p>CSVファイルと、CPU性能解析レポートファイル（cpu_pa_report.xlsm）を同一ディレクトリ内に格納します。</p></li>
</ol>
<blockquote>
<div><div class="admonition seealso">
<p class="admonition-title">参考</p>
<p>CPU性能解析レポートファイルは以下に格納されています。</p>
<p><code class="file docutils literal notranslate"><span class="pre">$</span><em><span class="pre">FJSVXTCLANGA</span></em><span class="pre">/misc/cpupa/cpu_pa_report.xlsm</span></code></p>
</div>
</div></blockquote>
<ol class="arabic simple" start="2">
<li><p>1.で準備したディレクトリを、Microsoft Excelが実行できる環境にコピーします。</p></li>
<li><p>CPU性能解析レポートファイル（cpu_pa_report.xlsm）を起動します。</p></li>
</ol>
<blockquote>
<div><div class="admonition seealso">
<p class="admonition-title">参考</p>
<p>CPU性能解析レポートはMicrosoft Execlのマクロ機能を使用しています。セキュリティ設定によってマクロが無効化された場合、手動でマクロを有効にしてください。</p>
</div>
</div></blockquote>
<ol class="arabic simple" start="4">
<li><p>CPU性能解析レポートに出力する内容を選択するためのダイアログが表示されます。必要な情報を入力してください。</p></li>
</ol>
<blockquote>
<div><ol class="loweralpha simple">
<li><p>CSV形式ファイル内に複数プロセスのデータが存在する場合、プロセス番号入力画面で、参照したいプロセス番号を入力してください。プロセスが1つしかない場合は、プロセス番号入力画面を表示しません。</p></li>
</ol>
<blockquote>
<div><figure class="align-default">
<img alt="../../../_images/CPUPerformanceAnalysisReportCreateReport_01.png" src="../../../_images/CPUPerformanceAnalysisReportCreateReport_01.png" />
</figure>
</div></blockquote>
<ol class="loweralpha simple" start="2">
<li><p>指定したプロセス内が複数のCMGで実行された場合、CMG番号入力画面で、参照したいCMG番号を入力してください。CMGが1つしかない場合は、CMG番号入力画面を表示しません。</p></li>
</ol>
<blockquote>
<div><figure class="align-default">
<img alt="../../../_images/CPUPerformanceAnalysisReportCreateReport_02.png" src="../../../_images/CPUPerformanceAnalysisReportCreateReport_02.png" />
</figure>
</div></blockquote>
<ol class="loweralpha simple" start="3">
<li><p>指定したプロセス内に計測区間指定ルーチンで指定した計測区間が複数存在する場合、計測区間選択画面で、参照したい計測区間名を選択してください。計測区間が1つしかない場合は、計測区間選択画面を表示しません。</p></li>
</ol>
<blockquote>
<div><figure class="align-default">
<img alt="../../../_images/CPUPerformanceAnalysisReportCreateReport_03.png" src="../../../_images/CPUPerformanceAnalysisReportCreateReport_03.png" />
</figure>
</div></blockquote>
</div></blockquote>
<ol class="arabic simple" start="5">
<li><p>CSV形式ファイルの読み込みを開始します。読み込み対象となるファイルは、CPU性能解析レポートファイルと同一ディレクトリ内にあるpa1.csvからpa17.csvという名前のファイルのみです。正常終了した場合、作成したレポートごとに以下のメッセージを表示します。</p></li>
</ol>
<blockquote>
<div><table class="docutils align-default">
<colgroup>
<col style="width: 50.0%" />
<col style="width: 50.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>メッセージ</p></th>
<th class="head"><p>メッセージ内容</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>CPU Performance Analysis Report (Single Report) created</p></td>
<td><p>CPU性能解析レポート(単体レポート)を作成しました。</p></td>
</tr>
<tr class="row-odd"><td><p>CPU Performance Analysis Report (Brief Report) created.</p></td>
<td><p>CPU性能解析レポート(簡易レポート)を作成しました。</p></td>
</tr>
<tr class="row-even"><td><p>CPU Performance Analysis Report (Standard Report) created.</p></td>
<td><p>CPU性能解析レポート(標準レポート)を作成しました。</p></td>
</tr>
<tr class="row-odd"><td><p>CPU Performance Analysis Report (Detail Report) created.</p></td>
<td><p>CPU性能解析レポート(詳細レポート)を作成しました。</p></td>
</tr>
</tbody>
</table>
</div></blockquote>
<div class="admonition seealso">
<p class="admonition-title">参考</p>
<ul class="simple">
<li><p>作成したCPU性能解析レポートの出力結果の概要、詳細については、「プロファイラ使用手引書」-「4.2 CPU性能解析レポート出力結果」を参照してください。</p></li>
<li><p>StatisticsのFloating-point operation peak ratio (%)は、2.2GHzの性能（「富岳」におけるピーク性能）に対する比率を表しています。</p></li>
<li><p>作成するCPU性能解析レポートの種別は、ディレクトリ内のCSV形式のファイルの有無によって決定します。優先順位は以下のとおりです。</p>
<ol class="arabic simple">
<li><p>pa1.csv～pa17.csvファイルが全て存在する場合、詳細レポートを作成します。</p></li>
<li><p>pa1.csv～pa11.csvファイルが全て存在する場合、標準レポートを作成します。</p></li>
<li><p>pa1.csv～pa5.csvファイルが全て存在する場合、簡易レポートを作成します。</p></li>
<li><p>pa1.csvファイルが存在する場合、単体レポートを作成します。</p></li>
</ol>
</li>
</ul>
</div>
</section>
</section>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <div>
    <h3><a href="../../../index.html">目次</a></h3>
    <ul>
<li><a class="reference internal" href="#">3.1.11.4. CPU性能解析レポート</a><ul>
<li><a class="reference internal" href="#id1">3.1.11.4.1. 概要</a></li>
<li><a class="reference internal" href="#id2">3.1.11.4.2. CPU性能解析レポート種別</a></li>
<li><a class="reference internal" href="#id3">3.1.11.4.3. 計測区間指定ルーチンの追加</a></li>
<li><a class="reference internal" href="#id4">3.1.11.4.4. コンパイル／リンク</a><ul>
<li><a class="reference internal" href="#fortran">3.1.11.4.4.1. Fortranの翻訳時オプションについて</a></li>
<li><a class="reference internal" href="#c-c">3.1.11.4.4.2. C/C++の翻訳時オプションについて</a></li>
</ul>
</li>
<li><a class="reference internal" href="#cpuperformanceanalysisreportusageprocedure">3.1.11.4.5. プロファイルデータの計測</a></li>
<li><a class="reference internal" href="#id6">3.1.11.4.6. プロファイラのオプション</a></li>
<li><a class="reference internal" href="#cpuperformanceanalysisreportoutputprofileresults">3.1.11.4.7. プロファイル結果の出力</a></li>
<li><a class="reference internal" href="#id8">3.1.11.4.8. CPU性能解析レポートの作成</a></li>
</ul>
</li>
</ul>

  </div>
  <div>
    <h4>前のトピックへ</h4>
    <p class="topless"><a href="InstantProfiler.html"
                          title="前の章へ"><span class="section-number">3.1.11.3. </span>基本プロファイラ</a></p>
  </div>
  <div>
    <h4>次のトピックへ</h4>
    <p class="topless"><a href="ImportantPoints.html"
                          title="次の章へ"><span class="section-number">3.1.11.5. </span>注意事項</a></p>
  </div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">クイック検索</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="検索" />
    </form>
    </div>
</div>
<script>document.getElementById('searchbox').style.display = "block"</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>ナビゲーション</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="ImportantPoints.html" title="3.1.11.5. 注意事項"
             >次へ</a></li>
        <li class="right" >
          <a href="InstantProfiler.html" title="3.1.11.3. 基本プロファイラ"
             >前へ</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../../index.html">利用手引書 言語開発環境編  ドキュメント</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../../index.html" ><span class="section-number">3. </span>計算ノード向けバイナリを生成するコンパイラ</a> &#187;</li>
          <li class="nav-item nav-item-2"><a href="../index.html" ><span class="section-number">3.1. </span>富士通コンパイラ</a> &#187;</li>
          <li class="nav-item nav-item-3"><a href="index.html" ><span class="section-number">3.1.11. </span>プロファイラ</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href=""><span class="section-number">3.1.11.4. </span>CPU性能解析レポート</a></li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2025, 理化学研究所計算科学研究センター.
    &nbsp;&nbsp;<a href="https://www.fugaku.r-ccs.riken.jp/">Fugaku website Top</a>
    </div>
  </body>
</html>