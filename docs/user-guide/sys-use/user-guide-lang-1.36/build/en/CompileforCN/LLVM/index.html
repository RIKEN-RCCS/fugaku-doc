

<!doctype html>

<html lang="en" data-content_root="../../">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>3.3. LLVM &#8212; Supercomputer Fugaku User Guide －Language and development environment－  documentation</title>
    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=649a27d8" />
    <link rel="stylesheet" type="text/css" href="../../_static/bizstyle.css?v=532c1bf3" />
    <link rel="stylesheet" type="text/css" href="../../_static/custom.css?v=f85107c5" />
    
    <script src="../../_static/documentation_options.js?v=5929fcd5"></script>
    <script src="../../_static/doctools.js?v=888ff710"></script>
    <script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../../_static/bizstyle.js"></script>
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="4. Compilers that generate binaries for login nodes" href="../../CompileforLN/index.html" />
    <link rel="prev" title="3.2. Combination of GNU Compiler Collection and Fujitsu MPI" href="../GCC_MPI/index.html" />
    <meta name="viewport" content="width=device-width,initial-scale=1.0" />
    <!--[if lt IE 9]>
    <script src="_static/css3-mediaqueries.js"></script>
    <![endif]-->
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../CompileforLN/index.html" title="4. Compilers that generate binaries for login nodes"
             accesskey="N">next</a></li>
        <li class="right" >
          <a href="../GCC_MPI/index.html" title="3.2. Combination of GNU Compiler Collection and Fujitsu MPI"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../index.html">Supercomputer Fugaku User Guide －Language and development environment－  documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../index.html" accesskey="U"><span class="section-number">3. </span>Compilers that generate binaries for compute nodes</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href=""><span class="section-number">3.3. </span>LLVM</a></li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <section id="llvm">
<span id="compilerforcnllvm"></span><h1><span class="section-number">3.3. </span>LLVM<a class="headerlink" href="#llvm" title="Link to this heading">¶</a></h1>
<p>This section describes how to use the C/C++/Fortran compilers based on LLVM.
LLVM, which generates binaries for compute nodes, is available on both the login nodes (Intel) and the compute nodes.</p>
<section id="usage-of-llvm-compilers">
<h2><span class="section-number">3.3.1. </span>Usage of LLVM compilers<a class="headerlink" href="#usage-of-llvm-compilers" title="Link to this heading">¶</a></h2>
<section id="environment-setting">
<h3><span class="section-number">3.3.1.1. </span>Environment setting<a class="headerlink" href="#environment-setting" title="Link to this heading">¶</a></h3>
<p>These compiler is located at:</p>
<p>On login node (cross environment) /vol0004/apps/r/OSS_CN/llvm-21.1.0/cross_clangfx
On compute node (native environment) /vol0004/apps/r/OSS_CN/llvm-21.1.0/own_clangfx</p>
<p>(If you prefer to use the previous version, ‘<a class="reference internal" href="index_v19.1.4.html#compilerforllvm19"><span class="std std-ref">lvm-v19.1.4</span></a>’ remains available.)</p>
<p>Execute the following command to setup the environment before running compilers.</p>
<p>login node</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">[_LNIlogin]$ </span>module<span class="w"> </span>load<span class="w"> </span>LLVM/llvmorg-21.1.0
</pre></div>
</div>
<p>compute node</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">[_CNlogin]$ </span>module<span class="w"> </span>load<span class="w"> </span>LLVM/llvmorg-21.1.0
</pre></div>
</div>
<p>Available languages are following</p>
<blockquote>
<div><table class="docutils align-default">
<colgroup>
<col style="width: 20.0%" />
<col style="width: 13.3%" />
<col style="width: 13.3%" />
<col style="width: 53.3%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Software</p></th>
<th class="head"><p>Language</p></th>
<th class="head"><p>Version</p></th>
<th class="head"><p>Command</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Clang</p></td>
<td><p>C</p></td>
<td><p>21.1.0</p></td>
<td><p>clang</p></td>
</tr>
<tr class="row-odd"><td><p>Clang++</p></td>
<td><p>C++</p></td>
<td><p>21.1.0</p></td>
<td><p>clang++</p></td>
</tr>
<tr class="row-even"><td><p>Flang</p></td>
<td><p>Fortran</p></td>
<td><p>21.1.0</p></td>
<td><p>flang</p></td>
</tr>
</tbody>
</table>
</div></blockquote>
</section>
<section id="how-to-use">
<h3><span class="section-number">3.3.1.2. </span>How to Use<a class="headerlink" href="#how-to-use" title="Link to this heading">¶</a></h3>
<p>Here is an example of how to compile C. The commands are common for both nodes.
For compilation options, please refer to those provided by LLVM’s Clang/Flang.</p>
<p>In particular, with flang, the compile process may sometimes take longer.
In such cases, please allocate a larger cache size on the compute node, as described below.</p>
<p>[Sequential execution]</p>
<dl>
<dt>login node</dt><dd><div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">[_LNIlogin]$ </span>clang<span class="w"> </span>-O3<span class="w"> </span>source_file
</pre></div>
</div>
</dd>
<dt>compute node</dt><dd><div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">[_CNlogin]$ </span>clang<span class="w"> </span>-O3<span class="w"> </span>source_file
</pre></div>
</div>
</dd>
</dl>
<p>[OpenMP]</p>
<p>Please add “-fopenmp” option for OpenMP library.</p>
<dl>
<dt>login node</dt><dd><div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">[_LNIlogin]$ </span>clang<span class="w"> </span>-O3<span class="w"> </span>-fopenmp<span class="w"> </span>source_file
</pre></div>
</div>
</dd>
<dt>compute node</dt><dd><div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">[_CNlogin]$ </span>clang<span class="w"> </span>-O3<span class="w"> </span>-fopenmp<span class="w"> </span>source_file
</pre></div>
</div>
</dd>
</dl>
<p>[MPI]</p>
<p>You can use MPI library via mpiclang/mpiclang++/mpiflang commands.</p>
<dl>
<dt>login node</dt><dd><div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">[_LNIlogin]$ </span>mpiclang<span class="w"> </span>-O3<span class="w"> </span>-fopenmp<span class="w"> </span>source_file
</pre></div>
</div>
</dd>
<dt>compute node</dt><dd><div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">[_CNlogin]$ </span>mpiclang<span class="w"> </span>-O3<span class="w"> </span>-fopenmp<span class="w"> </span>source_file
</pre></div>
</div>
</dd>
</dl>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p>The same procedure applies when using C++ (mpiclang++) and Fortran (mpiflang).</p>
</div>
<p>Example: Compilation in a job script</p>
<div class="line-block">
<div class="line">When assigning a job to a compute node, specify the pjsub option –llio cn-cache-size=1Gi.</div>
<div class="line">If omitted, the translation time may increase.</div>
</div>
<blockquote>
<div><div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="ch">#!/bin/sh -x</span>
<span class="c1">#PJM -L  &quot;node=1&quot;</span>
<span class="c1">#PJM -L  &quot;rscgrp=small&quot;</span>
<span class="c1">#PJM -L  &quot;elapse=01:00:00&quot;</span>
<span class="c1">#PJM -x PJM_LLIO_GFSCACHE=/vol0004</span>
<span class="c1">#PJM -g groupname</span>
<span class="c1">#PJM --llio cn-cache-size=1Gi</span>
<span class="c1">#PJM -s</span>
<span class="c1">#</span>

module<span class="w"> </span>purge
module<span class="w"> </span>load<span class="w"> </span>LLVM/llvmorg-21.1.0

mpiclang<span class="w"> </span>-o<span class="w"> </span>sample1.out<span class="w"> </span>sample1.c
</pre></div>
</div>
</div></blockquote>
</section>
<section id="how-to-execute">
<h3><span class="section-number">3.3.1.3. </span>How to execute<a class="headerlink" href="#how-to-execute" title="Link to this heading">¶</a></h3>
<p>The compiled binary can be executed either from an interactive job or from a script. Here is an example of script.
To improve performance, transfer the executable and LLVM libraries using llio_transfer.</p>
<blockquote>
<div><div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="ch">#!/bin/sh -x</span>
<span class="c1">#PJM -L  &quot;node=128&quot;</span>
<span class="c1">#PJM --mpi &quot;max-proc-per-node=4&quot;</span>
<span class="c1">#PJM -L  &quot;rscgrp=small&quot;</span>
<span class="c1">#PJM -L  &quot;elapse=01:00:00&quot;</span>
<span class="c1">#PJM -x PJM_LLIO_GFSCACHE=/vol0004</span>
<span class="c1">#PJM -g groupname</span>
<span class="c1">#PJM -s</span>
<span class="c1">#</span>

module<span class="w"> </span>purge
module<span class="w"> </span>load<span class="w"> </span>LLVM/llvmorg-21.1.0
llio_transfer<span class="w"> </span><span class="sb">`</span>find<span class="w"> </span><span class="si">${</span><span class="nv">LLVM_BASEDIR</span><span class="si">}</span>/lib64<span class="w"> </span>-type<span class="w"> </span>f<span class="w"> </span>-name<span class="w"> </span><span class="se">\*</span>.so<span class="se">\*</span><span class="sb">`</span>
llio_transfer<span class="w"> </span><span class="sb">`</span>find<span class="w"> </span><span class="si">${</span><span class="nv">MPI_HOME</span><span class="si">}</span>/lib64<span class="w"> </span>-type<span class="w"> </span>f<span class="w"> </span>-name<span class="w"> </span><span class="se">\*</span>.so<span class="se">\*</span><span class="sb">`</span>
llio_transfer<span class="w"> </span>sample1.out

mpiexec<span class="w"> </span>./sample1.out
</pre></div>
</div>
</div></blockquote>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p>For C++ and Fortran programs, the same execution procedure should be followed.</p>
</div>
</section>
<section id="using-libraries">
<h3><span class="section-number">3.3.1.4. </span>Using Libraries<a class="headerlink" href="#using-libraries" title="Link to this heading">¶</a></h3>
<p>With this LLVM, the OpenBLAS and FFTW libraries are available for use.</p>
<p>Please note that this library cannot be used with other compilers.</p>
<section id="usage-of-openblas">
<h4><span class="section-number">3.3.1.4.1. </span>Usage of OpenBLAS<a class="headerlink" href="#usage-of-openblas" title="Link to this heading">¶</a></h4>
<dl>
<dt>The libraries are located at the following path:</dt><dd><table class="docutils align-default">
<colgroup>
<col style="width: 27.3%" />
<col style="width: 72.7%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Library</p></th>
<th class="head"><p>Path of Library</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>LP64, sequential</p></td>
<td><p>/vol0004/apps/r/OSS_CN/llvm/openblas-seq</p></td>
</tr>
<tr class="row-odd"><td><p>LP64, thread-parallel</p></td>
<td><p>/vol0004/apps/r/OSS_CN/llvm/openblas-omp</p></td>
</tr>
<tr class="row-even"><td><p>ILP64, sequential</p></td>
<td><p>/vol0004/apps/r/OSS_CN/llvm/openblas-seq-ilp64</p></td>
</tr>
<tr class="row-odd"><td><p>ILP64, thread-parallel</p></td>
<td><p>/vol0004/apps/r/OSS_CN/llvm/openblas-omp-ilp64</p></td>
</tr>
</tbody>
</table>
</dd>
</dl>
<section id="how-to-compile">
<h5><span class="section-number">3.3.1.4.1.1. </span>How to compile<a class="headerlink" href="#how-to-compile" title="Link to this heading">¶</a></h5>
<p>When compiling a program that uses OpenBLAS, please first configure the environment for LLVM.
Then, add the option -lopenblas at the linking stage.</p>
<p>For multi-threaded execution, please also add the option -fopenmp.</p>
<p>In addition, please add the following options depending on the programming language.</p>
<p>For C/C++:</p>
<ul class="simple">
<li><p>Please specify the library and header files of the OpenBLAS installation directory (${OPENBLAS_DIR}) using the -L and -I options.</p></li>
<li><p>Please add -lflang_rt.runtime.</p></li>
</ul>
<p>For Fortran:</p>
<ul class="simple">
<li><p>Please specify the library files of the OpenBLAS installation directory (${OPENBLAS_DIR}) using the -L option.</p></li>
</ul>
</section>
<section id="id1">
<h5><span class="section-number">3.3.1.4.1.2. </span>How to execute<a class="headerlink" href="#id1" title="Link to this heading">¶</a></h5>
<p>When running a program that uses OpenBLAS, please add ${OPENBLAS_DIR}/lib to the LD_LIBRARY_PATH.</p>
<p>Modifications from the original OpenBLAS</p>
<p>Compared with the original OpenBLAS 0.3.26, the following routines have been tuned for A64FX.</p>
<ul class="simple">
<li><p>DGEMM</p></li>
<li><p>SGEMM</p></li>
</ul>
</section>
</section>
<section id="usage-of-fftw">
<h4><span class="section-number">3.3.1.4.2. </span>Usage of FFTW<a class="headerlink" href="#usage-of-fftw" title="Link to this heading">¶</a></h4>
<p>FFTW libraries are located at /vol0004/apps/r/OSS_CN/llvm/fftw3. (FFTW_DIR)</p>
<p>When compiling a program that uses FFTW, please first configure the environment for LLVM.
Then, add the following options at the linking stage:</p>
<ul class="simple">
<li><p>Single-precision sequential library           : -lfftw3f -lm</p></li>
<li><p>Single-precision multi-threaded library       : -lfftw3f_omp -lfftw3f -lm</p></li>
<li><p>Double-precision sequential library           : -lfftw3 -lm</p></li>
<li><p>Double-precision multi-threaded library       : -lfftw3_omp -lfftw3 -lm</p></li>
</ul>
<p>When using the multi-threaded library, please add the option -fopenmp.</p>
<p>In addition, please add the following options depending on the programming language:</p>
<p>For C/C++:</p>
<ul class="simple">
<li><p>Please specify the library and header files of the FFTW installation directory (${FFTW_DIR}) using the -L and -I options.</p></li>
<li><p>Please add -lflang_rt.runtime.</p></li>
</ul>
<p>For Fortran:</p>
<ul class="simple">
<li><p>Please specify the library files of the FFTW installation directory (${FFTW_DIR}) using the -L option.</p></li>
</ul>
<section id="id2">
<h5><span class="section-number">3.3.1.4.2.1. </span>How to execute<a class="headerlink" href="#id2" title="Link to this heading">¶</a></h5>
<p>When running a program that uses FFTW, please add ${FFTW_DIR}/lib to the LD_LIBRARY_PATH.</p>
<p>Modifications from the original FFTW</p>
<ul class="simple">
<li><p>Header files supporting various SIMD instructions have been adapted for SVE instructions.</p></li>
<li><p>In the automatic tuning mechanism called plan generation, efficiency is achieved by removing processing routes that are not selected.</p></li>
</ul>
</section>
</section>
</section>
<section id="cautions">
<h3><span class="section-number">3.3.1.5. </span>Cautions<a class="headerlink" href="#cautions" title="Link to this heading">¶</a></h3>
<section id="caution-for-real-kind-16-and-complex-kind-16-types">
<h4><span class="section-number">3.3.1.5.1. </span>Caution for REAL(KIND=16) and COMPLEX(KIND=16) types<a class="headerlink" href="#caution-for-real-kind-16-and-complex-kind-16-types" title="Link to this heading">¶</a></h4>
<p>On the cross-compilation environment flang available on the login nodes, the following error
occurs when compiling Fortran programs that use REAL(KIND=16) or COMPLEX(KIND=16) types.</p>
<p>Example for the failure</p>
<blockquote>
<div><div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>flang<span class="w"> </span>complex16.f90
error:<span class="w"> </span>Semantic<span class="w"> </span>errors<span class="w"> </span><span class="k">in</span><span class="w"> </span>complex16.f90
<span class="w"> </span>./complex16.f90:3:3:<span class="w"> </span>error:<span class="w"> </span>COMPLEX<span class="o">(</span><span class="nv">KIND</span><span class="o">=</span><span class="m">16</span><span class="o">)</span><span class="w"> </span>is<span class="w"> </span>not<span class="w"> </span>an<span class="w"> </span>enabled<span class="w"> </span><span class="nb">type</span><span class="w"> </span><span class="k">for</span><span class="w"> </span>this<span class="w"> </span>target
<span class="w"> </span>complex<span class="o">(</span><span class="nv">kind</span><span class="o">=</span><span class="m">16</span><span class="o">)</span><span class="w"> </span>::<span class="w"> </span>x
<span class="w"> </span>^^^^^^^^^^^^^^^^^^^^^
</pre></div>
</div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>flang<span class="w"> </span>real16.f90
error:<span class="w"> </span>Semantic<span class="w"> </span>errors<span class="w"> </span><span class="k">in</span><span class="w"> </span>real16.f90
<span class="w"> </span>./real16.f90:3:3:<span class="w"> </span>error:<span class="w"> </span>REAL<span class="o">(</span><span class="nv">KIND</span><span class="o">=</span><span class="m">16</span><span class="o">)</span><span class="w"> </span>is<span class="w"> </span>not<span class="w"> </span>an<span class="w"> </span>enabled<span class="w"> </span><span class="nb">type</span><span class="w"> </span><span class="k">for</span><span class="w"> </span>this<span class="w"> </span>target
<span class="w"> </span>real<span class="o">(</span><span class="nv">kind</span><span class="o">=</span><span class="m">16</span><span class="o">)</span><span class="w"> </span>::<span class="w"> </span>x,<span class="w"> </span>y,<span class="w"> </span>z
<span class="w"> </span>^^^^^^^^^^^^^^^^^^^^^^^^
</pre></div>
</div>
</div></blockquote>
<p>Workaround</p>
<p>When using these types, please compile in the native environment (i.e., on the compute nodes).</p>
</section>
<section id="notes-for-interlanguage-linkage">
<h4><span class="section-number">3.3.1.5.2. </span>Notes for Interlanguage Linkage<a class="headerlink" href="#notes-for-interlanguage-linkage" title="Link to this heading">¶</a></h4>
<section id="compilation-command-and-required-options-during-linking">
<h5><span class="section-number">3.3.1.5.2.1. </span>Compilation Command and Required Options during Linking<a class="headerlink" href="#compilation-command-and-required-options-during-linking" title="Link to this heading">¶</a></h5>
<p>When linking combined Fortran, C, and C++ object programs created with the LLVM compiler, please note the following points.</p>
<dl>
<dt>When linking C++ objects (Using libstdc++)</dt><dd><p>When linking using the command <strong class="command">clang</strong> or <strong class="command">flang</strong>, please specify the option <code class="docutils literal notranslate"><span class="pre">-lstdc++</span></code>.</p>
</dd>
<dt>When linking Fortran objects</dt><dd><p>When linking using the command <strong class="command">clang</strong> or <strong class="command">clang++</strong>, please specify the following options.</p>
<p><code class="docutils literal notranslate"><span class="pre">L${LLVM_BASEDIR}/lib64</span> <span class="pre">-lflang_rt.runtime</span></code></p>
</dd>
</dl>
</section>
</section>
</section>
</section>
<section id="migration-from-fujitsu-compiler">
<h2><span class="section-number">3.3.2. </span>Migration from Fujitsu compiler<a class="headerlink" href="#migration-from-fujitsu-compiler" title="Link to this heading">¶</a></h2>
<p>This chapter explains the differences in specifications and behavior between the Fujitsu compiler and the LLVM (<a class="reference external" href="https://llvm.org/">https://llvm.org/</a>) compiler environment to facilitate the smooth migration of applications developed and built with the Fujitsu compiler to the LLVM environment.</p>
<section id="compiler-commands">
<h3><span class="section-number">3.3.2.1. </span>Compiler Commands<a class="headerlink" href="#compiler-commands" title="Link to this heading">¶</a></h3>
<p>Here describes about differences between the Fujitsu compiler and the LLVM compiler. For the Fujitsu compiler, the command names differ between native compilers and cross compilers. In contrast, the LLVM compiler uses the same command names regardless of whether they are native or cross compilers.</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 33.3%" />
<col style="width: 33.3%" />
<col style="width: 33.3%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Item</p></th>
<th class="head"><p>Fujitsu compiler</p></th>
<th class="head"><p>LLVM compiler</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>C compiler</p></td>
<td><div class="line-block">
<div class="line">fcc</div>
<div class="line">fccpx</div>
</div>
</td>
<td><p>clang</p></td>
</tr>
<tr class="row-odd"><td><p>C++ compiler</p></td>
<td><div class="line-block">
<div class="line">FCC</div>
<div class="line">FCCpx</div>
</div>
</td>
<td><p>clang++</p></td>
</tr>
<tr class="row-even"><td><p>Fortran compiler</p></td>
<td><div class="line-block">
<div class="line">frt</div>
<div class="line">frtpx</div>
</div>
</td>
<td><p>flang</p></td>
</tr>
</tbody>
</table>
</section>
<section id="compiler-options">
<span id="llvm-migration-compiler-option"></span><h3><span class="section-number">3.3.2.2. </span>Compiler Options<a class="headerlink" href="#compiler-options" title="Link to this heading">¶</a></h3>
<p>Fujitsu compilers (trad mode, clang mode) and LLVM compilers differ in their compile option systems and how to specify their options. This section presents a comparison table of compiler options for both compilers as reference information for migration.</p>
<p>Table: <a class="reference internal" href="#llvmguide-table1"><span class="std std-ref">Compiler Options with an Identical Function</span></a> lists compiler options that share the same name and have identical functional descriptions in both the Fujitsu compiler and the LLVM compiler. Table: <a class="reference internal" href="#llvmguide-table2-1"><span class="std std-ref">Compiler Options with a Similar Function (For C/C++Compiler)</span></a> and Table: <a class="reference internal" href="#llvmguide-table2-2"><span class="std std-ref">Compiler Options with a Similar Function (For Fortran Compiler)</span></a> list compiler options that have different names but identical functional descriptions.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<ul class="simple">
<li><p>Fujitsu compiler-specific options(Example:-K or -ffj) are not available in the LLVM compiler. Specifying these will result in a compilation error and cause the process to terminate. For examples of Fujitsu compiler-specific options, please refer to <a class="reference internal" href="#llvm-fj-non-compatible"><span class="std std-ref">Incompatible features</span></a>.</p></li>
<li><p>Even if options have the same functional overview, optimization results may differ.
After migration, we recommend performing functional verification.</p></li>
</ul>
</div>
<span id="llvmguide-table1"></span><table class="docutils align-default" id="id3">
<caption><span class="caption-text">Compiler Options with an Identical Function</span><a class="headerlink" href="#id3" title="Link to this table">¶</a></caption>
<colgroup>
<col style="width: 100.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Option Name</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>-Dname[=tokens]</p></td>
</tr>
<tr class="row-odd"><td><p>-E</p></td>
</tr>
<tr class="row-even"><td><p>-Idir</p></td>
</tr>
<tr class="row-odd"><td><p>-Ldir</p></td>
</tr>
<tr class="row-even"><td><p>-P</p></td>
</tr>
<tr class="row-odd"><td><p>-S</p></td>
</tr>
<tr class="row-even"><td><p>-Uname</p></td>
</tr>
<tr class="row-odd"><td><p>-Wtool,arg1[,arg2]…</p></td>
</tr>
<tr class="row-even"><td><p>-c</p></td>
</tr>
<tr class="row-odd"><td><p>-g</p></td>
</tr>
<tr class="row-even"><td><p>-g0</p></td>
</tr>
<tr class="row-odd"><td><p>-lname</p></td>
</tr>
<tr class="row-even"><td><p>-o pathname</p></td>
</tr>
<tr class="row-odd"><td><p>-shared</p></td>
</tr>
<tr class="row-even"><td><p>-v</p></td>
</tr>
<tr class="row-odd"><td><p>-w</p></td>
</tr>
</tbody>
</table>
<span id="llvmguide-table2-1"></span><table class="docutils align-default" id="id4">
<caption><span class="caption-text">Compiler Options with a Similar Function (For C/C++Compiler)</span><a class="headerlink" href="#id4" title="Link to this table">¶</a></caption>
<colgroup>
<col style="width: 33.0%" />
<col style="width: 33.0%" />
<col style="width: 34.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Fujitsu Compiler trad mode Option Names</p></th>
<th class="head"><p>Fujitsu Compiler clang mode Option Names</p></th>
<th class="head"><p>LLVM 21 clang/clang++ Option Names</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>-KA64FX</p></td>
<td><p>-mcpu=a64fx</p></td>
<td><p>-mcpu=a64fx</p></td>
</tr>
<tr class="row-odd"><td><p>-KARMV8_1_A</p></td>
<td><p>-march=armv8.1-a</p></td>
<td><p>-march=armv8.1-a</p></td>
</tr>
<tr class="row-even"><td><p>-KARMV8_2_A</p></td>
<td><p>-march=armv8.2-a</p></td>
<td><p>-march=armv8.2-a</p></td>
</tr>
<tr class="row-odd"><td><p>-KARMV8_3_A</p></td>
<td><p>-march=armv8.3-a</p></td>
<td><p>-march=armv8.3-a</p></td>
</tr>
<tr class="row-even"><td><p>-KARMV8_A</p></td>
<td><p>-march=armv8-a</p></td>
<td><p>-march=armv8-a</p></td>
</tr>
<tr class="row-odd"><td><p>-KGENERIC_CPU</p></td>
<td><p>-mcpu=generic</p></td>
<td><p>-mcpu=generic</p></td>
</tr>
<tr class="row-even"><td><p>-K{PIC|pic}</p></td>
<td><p>-f{PIC|pic}</p></td>
<td><p>-f{PIC|pic}</p></td>
</tr>
<tr class="row-odd"><td><p>-Kcmodel={small|large}</p></td>
<td><p>-mcmodel={small|large}</p></td>
<td><p>-mcmodel={small|large}</p></td>
</tr>
<tr class="row-even"><td><p>-K{eval|noeval}</p></td>
<td><p>-f{fast-math|no-fast-math}</p></td>
<td><p>-f{fast-math|no-fast-math}</p></td>
</tr>
<tr class="row-odd"><td><p>-Kfast</p></td>
<td><p>-Ofast</p></td>
<td><p>-O3 -ffast-math</p></td>
</tr>
<tr class="row-even"><td><p>-Kfp_contract</p></td>
<td><p>-ffp-contract=fast</p></td>
<td><p>-ffp-contract={fast|on|fast-honor-pragmas}</p></td>
</tr>
<tr class="row-odd"><td><p>-Knofp_contract</p></td>
<td><p>-ffp-contract=off</p></td>
<td><p>-ffp-contract=off</p></td>
</tr>
<tr class="row-even"><td><p>-Kfp_relaxed</p></td>
<td><p>-ffj-fp-relaxed</p></td>
<td><p>-freciprocal-math or -mrecip</p></td>
</tr>
<tr class="row-odd"><td><p>-Knofp_relaxed</p></td>
<td><p>-ffj-no-fp-relaxed</p></td>
<td><p>-fno-reciprocal-math or -mrecip=none</p></td>
</tr>
<tr class="row-even"><td><p>-K{largepage|nolargepage}</p></td>
<td><p>-ffj-{largepage|no-largepage}</p></td>
<td><p>Refer to <a class="reference internal" href="#llvm-largepage-function"><span class="std std-ref">Large Page Function</span></a></p></td>
</tr>
<tr class="row-odd"><td><p>-K{lib|nolib}</p></td>
<td><p>-f{builtin|no-builtin}</p></td>
<td><p>-f{builtin|no-builtin}</p></td>
</tr>
<tr class="row-even"><td><p>-K{omitfp|noomitfp}</p></td>
<td><p>-f{omit-frame-pointer|no-omit-frame-pointer}</p></td>
<td><p>-f{omit-frame-pointer|no-omit-frame-pointer}</p></td>
</tr>
<tr class="row-odd"><td><p>-K{openmp|noopenmp}</p></td>
<td><p>-f{openmp|no-openmp}</p></td>
<td><p>-f{openmp|no-openmp}</p></td>
</tr>
<tr class="row-even"><td><p>-K{openmp_simd|noopenmp_simd}</p></td>
<td><p>-f{openmp-simd|no-openmp-simd}</p></td>
<td><p>-f{openmp-simd|no-openmp-simd}</p></td>
</tr>
<tr class="row-odd"><td><p>-Koptmsg=2</p></td>
<td><p>-Rpass=.*</p></td>
<td><p>-Rpass=.*</p></td>
</tr>
<tr class="row-even"><td><p>-K{simd|nosimd}</p></td>
<td><p>-f{vectorize|no-vectorize}</p></td>
<td><p>-f{vectorize|no-vectorize}</p></td>
</tr>
<tr class="row-odd"><td><p>-K{strict_aliasing|nostrict_aliasing}</p></td>
<td><p>-f{strict-aliasing|no-strict-aliasing}</p></td>
<td><p>-f{strict-aliasing|no-strict-aliasing}</p></td>
</tr>
<tr class="row-even"><td><p>-Kswp</p></td>
<td><p>-ffj-swp</p></td>
<td><p>-mllvm -aarch64-enable-pipeliner</p></td>
</tr>
<tr class="row-odd"><td><p>-K{unroll|nounroll}</p></td>
<td><p>-f{unroll-loops|no-unroll-loops}</p></td>
<td><p>-f{unroll-loops|no-unroll-loops}</p></td>
</tr>
<tr class="row-even"><td><p>-N{exceptions|noexceptions}</p></td>
<td><p>-f{exceptions|no-exceptions}</p></td>
<td><p>-f{exceptions|no-exceptions}</p></td>
</tr>
<tr class="row-odd"><td><p>-V</p></td>
<td><p>--version</p></td>
<td><p>--version</p></td>
</tr>
<tr class="row-even"><td><p>{-x-|-x0}</p></td>
<td><p>-f{inline-functions|no-inline-functions}</p></td>
<td><p>-f{inline-functions|no-inline-functions}</p></td>
</tr>
</tbody>
</table>
<span id="llvmguide-table2-2"></span><table class="docutils align-default" id="id5">
<caption><span class="caption-text">Compiler Options with a Similar Function (For Fortran Compiler)</span><a class="headerlink" href="#id5" title="Link to this table">¶</a></caption>
<colgroup>
<col style="width: 50.0%" />
<col style="width: 50.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Fujitsu Compiler trad mode Option Names</p></th>
<th class="head"><p>LLVM 21 clang/clang++ Option Names</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>-KA64FX</p></td>
<td><p>-mcpu=a64fx</p></td>
</tr>
<tr class="row-odd"><td><p>-KARMV8_1_A</p></td>
<td><p>-march=armv8.1-a</p></td>
</tr>
<tr class="row-even"><td><p>-KARMV8_2_A</p></td>
<td><p>-march=armv8.2-a</p></td>
</tr>
<tr class="row-odd"><td><p>-KARMV8_3_A</p></td>
<td><p>-march=armv8.3-a</p></td>
</tr>
<tr class="row-even"><td><p>-KARMV8_A</p></td>
<td><p>-march=armv8-a</p></td>
</tr>
<tr class="row-odd"><td><p>-KGENERIC_CPU</p></td>
<td><p>-mcpu=generic</p></td>
</tr>
<tr class="row-even"><td><p>-K{PIC|pic}</p></td>
<td><p>-f{PIC|pic}</p></td>
</tr>
<tr class="row-odd"><td><p>-Kcmodel={small|large}</p></td>
<td><p>-mcmodel={small|large}</p></td>
</tr>
<tr class="row-even"><td><p>-K{eval|noeval}</p></td>
<td><p>-f{fast-math|no-fast-math}</p></td>
</tr>
<tr class="row-odd"><td><p>-Kfast</p></td>
<td><p>-O3 -ffast-math -fstack-arrays</p></td>
</tr>
<tr class="row-even"><td><p>-Kfp_contract</p></td>
<td><p>-ffp-contract={fast|on}</p></td>
</tr>
<tr class="row-odd"><td><p>-Knofp_contract</p></td>
<td><p>-ffp-contract=off</p></td>
</tr>
<tr class="row-even"><td><p>-Kfp_relaxed</p></td>
<td><p>-freciprocal-math or -mrecip</p></td>
</tr>
<tr class="row-odd"><td><p>-Knofp_relaxed</p></td>
<td><p>-fno-reciprocal-math or -mrecip=none</p></td>
</tr>
<tr class="row-even"><td><p>-K{largepage|nolargepage}</p></td>
<td><p>Refer to <a class="reference internal" href="#llvm-largepage-function"><span class="std std-ref">Large Page Function</span></a></p></td>
</tr>
<tr class="row-odd"><td><p>-K{omitfp|noomitfp}</p></td>
<td><p>-f{omit-frame-pointer|no-omit-frame-pointer}</p></td>
</tr>
<tr class="row-even"><td><p>-K{openmp|noopenmp}</p></td>
<td><p>-f{openmp|no-openmp}</p></td>
</tr>
<tr class="row-odd"><td><p>-Koptmsg=2</p></td>
<td><p>-Rpass=.*</p></td>
</tr>
<tr class="row-even"><td><p>-K{simd|nosimd}</p></td>
<td><p>-f{vectorize|no-vectorize}</p></td>
</tr>
<tr class="row-odd"><td><p>-Kswp</p></td>
<td><p>-mllvm -aarch64-enable-pipeliner</p></td>
</tr>
<tr class="row-even"><td><p>-K{unroll|nounroll}</p></td>
<td><p>-f{unroll-loops|no-unroll-loops}</p></td>
</tr>
<tr class="row-odd"><td><p>-V</p></td>
<td><p>--version</p></td>
</tr>
</tbody>
</table>
</section>
<section id="incompatible-features">
<span id="llvm-fj-non-compatible"></span><h3><span class="section-number">3.3.2.3. </span>Incompatible features<a class="headerlink" href="#incompatible-features" title="Link to this heading">¶</a></h3>
<p>The LLVM compiler does not support Fujitsu compiler and A64FX-specific features. Main incompatible features are listed below.</p>
<ol class="arabic">
<li><p>Fujitsu Compiler-Specific Options</p>
<p>Specifying Fujitsu compiler-specific compiler options such as the following to the LLVM compiler will result in a compilation error and cause the process to terminate.</p>
<ul class="simple">
<li><p>-K option (Example: -Kfast)</p></li>
<li><p>-N option (Example: -NRtrap)</p></li>
<li><p>-ffj options (Example: -ffj-fjprof)</p></li>
<li><p>Options related to the math libraries(Example: -SSL2、-lfjlapacksve)</p></li>
<li><p>Other Fujitsu compiler-specific options（Example: -A’name(token)’）</p></li>
</ul>
<p>For options with similar functionality, refer to Table: <a class="reference internal" href="#llvmguide-table2-1"><span class="std std-ref">Compiler Options with a Similar Function (For C/C++Compiler)</span></a> and Table: <a class="reference internal" href="#llvmguide-table2-2"><span class="std std-ref">Compiler Options with a Similar Function (For Fortran Compiler)</span></a> in <a class="reference internal" href="#llvm-migration-compiler-option"><span class="std std-ref">Compiler Options</span></a>.</p>
</li>
<li><p>Fujitsu Compiler-Specific Optimization Control Specifiers</p>
<p>If Fujitsu compiler-specific optimization controlspecifiers are written within the source code, they will not be recognized by the LLVM compiler and will be ignored.</p>
</li>
<li><p>Fujitsu Compiler-Specific Environment Variables</p>
<p>The following Fujitsu compiler-specific environment variables that used during compilation with the Fujitsu compiler and when executing binaries created by the Fujitsu compiler has no effect on operation with the LLVM compiler and they are ignored.</p>
<ul class="simple">
<li><p>Environment variable for compile command(Example: fcc_ENV)</p></li>
<li><p>Environment variable for execution(Example: FLIB_C_MESSAGE)</p></li>
</ul>
</li>
<li><p>Predefined Macro Names</p>
<p>Fujitsu compilers predefine macros such as <code class="docutils literal notranslate"><span class="pre">__FUJITSU</span></code> or <code class="docutils literal notranslate"><span class="pre">__CLANG_FUJITSU</span></code>, which may be used in conditional branching within source code. These macros are not defined in LLVM compilers. If you are using them for conditional branching, we recommend verifying that the expected processing occurs.</p>
</li>
<li><p>A64FX-Specific Features (Available through environment variables or options)</p>
<p>The following features were primarily controlled in Fujitsu compilers through environment variables, compiler options, and optimization control specifiers; however, these control mechanisms are not provided in LLVM compilers. Applications that utilized these features may experience operational differences during migration; therefore, we recommend verifying their functionality through operational testing.</p>
<ul class="simple">
<li><p>Hardware barrier (Example: Environment variables FLIB_BARRIER=HARD)</p></li>
<li><p>Sector cache function (Example: Optimization control specifier scache_isolate_way L2=n1)</p></li>
<li><p>Hardware prefetch assistance function (Example: -Khpctag)</p></li>
</ul>
</li>
</ol>
</section>
<section id="substitute">
<h3><span class="section-number">3.3.2.4. </span>Substitute<a class="headerlink" href="#substitute" title="Link to this heading">¶</a></h3>
<section id="large-page-function">
<span id="llvm-largepage-function"></span><h4><span class="section-number">3.3.2.4.1. </span>Large Page Function<a class="headerlink" href="#large-page-function" title="Link to this heading">¶</a></h4>
<p>The Fujitsu compiler had large page functionality enabled by default, making it available without requiring any special configuration. This may result in improved performance depending on the environment and application. On the other hand, this feature is not enabled by default in the LLVM compiler, so explicit specification is required to use it.</p>
<p>In the Fugaku environment, you can use the large page feature of the HPC extension by adding the following to the compiler (linker) options.</p>
<p><code class="docutils literal notranslate"><span class="pre">-L/opt/FJSVxos/mmm/lib64</span> <span class="pre">-lmpg</span> <span class="pre">-Wl,-T/opt/FJSVxos/mmm/util/bss-2mb.lds</span></code></p>
<p>Specify this option before any other libraries. For details on the Large Page function, refer to the manual “Job Operation Software End-user’s Guide for HPC Extensions”.</p>
<p>Compilation Example:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>clang<span class="w"> </span>a.c<span class="w"> </span>-L/opt/FJSVxos/mmm/lib64<span class="w"> </span>-lmpg<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>Wl,-T/opt/FJSVxos/mmm/util/bss-2mb.lds
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The memory allocation behavior in the LLVM compiler may differ from that in the Fujitsu compiler. We recommend verifying that the migration functions as intended through actual builds and operational testing.</p>
</div>
</section>
</section>
<section id="object-and-source-incompatibility">
<h3><span class="section-number">3.3.2.5. </span>Object and Source Incompatibility<a class="headerlink" href="#object-and-source-incompatibility" title="Link to this heading">¶</a></h3>
<section id="object-incompatible">
<h4><span class="section-number">3.3.2.5.1. </span>Object Incompatible<a class="headerlink" href="#object-incompatible" title="Link to this heading">¶</a></h4>
<p>Object files, assembler source files, module files (.mod) and etc. generated by Fujitsu compilers (trad mode or clang mode) and LLVM compilers are incompatible. Therefore, all source code must be recompiled with the LLVM compiler.</p>
<p>Although Fujitsu clang mode is LLVM-based, it includes Fujitsu’s unique extensions, and its behavior differs from pure LLVM. Even if partial compatibility appears to exist, reusing objects is not recommended as it may lead to unintended behavior.</p>
</section>
<section id="source-incompatibility">
<h4><span class="section-number">3.3.2.5.2. </span>Source Incompatibility<a class="headerlink" href="#source-incompatibility" title="Link to this heading">¶</a></h4>
<p>The LLVM compiler adheres to standard language specifications (C/C++/Fortran), but proprietary intrinsic functions and service routines that were available with Fujitsu compilers are not supported. Source code that depends on these may require modifications when using LLVM.</p>
</section>
<section id="execution-result-incompatibility">
<h4><span class="section-number">3.3.2.5.3. </span>Execution Result Incompatibility<a class="headerlink" href="#execution-result-incompatibility" title="Link to this heading">¶</a></h4>
<p>Even with identical source code, there may be differences in execution results between Fujitsu compilers and LLVM compilers. This incompatibility primarily stems from the following two points. During post-migration verification, it is recommended to confirm numerical consistency and output format compatibility.</p>
<ol class="arabic">
<li><div class="line-block">
<div class="line">Differences in numerical calculation precision and error</div>
<div class="line">Differences in compiler optimization and implementations of numerical calculation libraries may lead to variations in the precision and error of numerical calculations.</div>
</div>
</li>
<li><div class="line-block">
<div class="line">Differences in output specifications</div>
<div class="line">The appearance and format of output results, such as floating-point display format (number of digits, exponential notation, handling of spaces, etc.), may differ.</div>
</div>
</li>
</ol>
</section>
</section>
<section id="about-filename-suffixes">
<h3><span class="section-number">3.3.2.6. </span>About Filename Suffixes<a class="headerlink" href="#about-filename-suffixes" title="Link to this heading">¶</a></h3>
<p>Indicates whether filename suffixes used with Fujitsu compilers (trad mode/clang mode) are available for use with LLVM compilers (clang, clang++, flang).</p>
<p>C compiler <strong class="command">clang</strong> can compile files with the suffixes listed in the table below as input.</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 50.0%" />
<col style="width: 50.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>File type</p></th>
<th class="head"><p>File suffix</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>C source file</p></td>
<td><p>.c</p></td>
</tr>
<tr class="row-odd"><td><p>C source file</p></td>
<td><p>.i</p></td>
</tr>
<tr class="row-even"><td><p>Assembler source file</p></td>
<td><p>.s</p></td>
</tr>
<tr class="row-odd"><td><p>Assembler source file that must be preprocessed</p></td>
<td><p>.S</p></td>
</tr>
<tr class="row-even"><td><p>Object file</p></td>
<td><p>.o</p></td>
</tr>
</tbody>
</table>
<p>C++ compiler <strong class="command">clang++</strong> can compile files with the suffixes listed in the table below as input.</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 50.0%" />
<col style="width: 50.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>File type</p></th>
<th class="head"><p>File suffix</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>C++ source file</p></td>
<td><p>.cc</p></td>
</tr>
<tr class="row-odd"><td><p>C++ source file</p></td>
<td><p>.CC</p></td>
</tr>
<tr class="row-even"><td><p>C++ source file</p></td>
<td><p>.cpp</p></td>
</tr>
<tr class="row-odd"><td><p>C++ source file</p></td>
<td><p>.CPP</p></td>
</tr>
<tr class="row-even"><td><p>C++ source file</p></td>
<td><p>.cxx</p></td>
</tr>
<tr class="row-odd"><td><p>C++ source file</p></td>
<td><p>.CXX</p></td>
</tr>
<tr class="row-even"><td><p>C++ source file</p></td>
<td><p>.c++</p></td>
</tr>
<tr class="row-odd"><td><p>C++ source file</p></td>
<td><p>.C++</p></td>
</tr>
<tr class="row-even"><td><p>C++ source file</p></td>
<td><p>.C</p></td>
</tr>
<tr class="row-odd"><td><p>C++ source file</p></td>
<td><p>.cp</p></td>
</tr>
<tr class="row-even"><td><p>C++ source file</p></td>
<td><p>.ii</p></td>
</tr>
<tr class="row-odd"><td><p>Assembler source file</p></td>
<td><p>.s</p></td>
</tr>
<tr class="row-even"><td><p>Assembler source file that must be preprocessed</p></td>
<td><p>.S</p></td>
</tr>
<tr class="row-odd"><td><p>Object file</p></td>
<td><p>.o</p></td>
</tr>
</tbody>
</table>
<p>Fortran compiler <strong class="command">flang</strong> can compile files with the suffixes listed in the table below as input. The file format (fixed format/free format) is automatically determined based on the file extension, so no special option specification is required.</p>
<p>Assembler source files (with the .s extension) cannot be compiled with flang and will cause errors during compilation. Please use clang or clang++ for compiling.</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 33.0%" />
<col style="width: 33.0%" />
<col style="width: 34.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>File type</p></th>
<th class="head"><p>File suffix</p></th>
<th class="head"><p>Format</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Fortran source program</p></td>
<td><p>.f</p></td>
<td><p>Fixed Format</p></td>
</tr>
<tr class="row-odd"><td><p>Fortran source program</p></td>
<td><p>.for</p></td>
<td><p>Fixed Format</p></td>
</tr>
<tr class="row-even"><td><p>Fortran source program</p></td>
<td><p>.f90</p></td>
<td><p>Free Format</p></td>
</tr>
<tr class="row-odd"><td><p>Fortran source program</p></td>
<td><p>.f95</p></td>
<td><p>Free Format</p></td>
</tr>
<tr class="row-even"><td><p>Fortran source program</p></td>
<td><p>.f03</p></td>
<td><p>Free Format</p></td>
</tr>
<tr class="row-odd"><td><p>Fortran source program</p></td>
<td><p>.f08</p></td>
<td><p>Free Format</p></td>
</tr>
<tr class="row-even"><td><p>Preprocessing directive Fortran source program</p></td>
<td><p>.F</p></td>
<td><p>Fixed Format</p></td>
</tr>
<tr class="row-odd"><td><p>Preprocessing directive Fortran source program</p></td>
<td><p>.FOR</p></td>
<td><p>Fixed Format</p></td>
</tr>
<tr class="row-even"><td><p>Preprocessing directive Fortran source program</p></td>
<td><p>.F90</p></td>
<td><p>Free Format</p></td>
</tr>
<tr class="row-odd"><td><p>Preprocessing directive Fortran source program</p></td>
<td><p>.F95</p></td>
<td><p>Free Format</p></td>
</tr>
<tr class="row-even"><td><p>Preprocessing directive Fortran source program</p></td>
<td><p>.F03</p></td>
<td><p>Free Format</p></td>
</tr>
<tr class="row-odd"><td><p>Preprocessing directive Fortran source program</p></td>
<td><p>.F08</p></td>
<td><p>Free Format</p></td>
</tr>
<tr class="row-even"><td><p>Object file</p></td>
<td><p>.o</p></td>
<td><p>-</p></td>
</tr>
</tbody>
</table>
</section>
<section id="simd-built-in-functions">
<h3><span class="section-number">3.3.2.7. </span>SIMD Built-in Functions<a class="headerlink" href="#simd-built-in-functions" title="Link to this heading">¶</a></h3>
<p>Fujitsu Compiler (clang mode) supports the SIMD built-in functions documented in “Arm C Language Extensions” version 00bet1 (First public release).</p>
<p>The LLVM compiler (clang) is progressively implementing support for SIMD built-in functions based on the ACLE (Arm C Language Extensions) specification published by Arm. However, it does not fully comply with the latest ACLE specification, and due to specification changes or implementation differences, it may not function as expected. Therefore, when migrating, we recommend verifying whether the SIMD built-in functions you intend to use are supported in the LLVM environment through actual builds and functional verification.</p>
<p>For details on SIMD built-in functions, please refer to the documentation published by Arm for developers. The specifications can be found on GitHub at &lt;<a class="reference external" href="https://github.com/ARM-software/acle/releases">https://github.com/ARM-software/acle/releases</a>&gt;.</p>
</section>
<section id="compatibility-with-gnu-specifications-c-c-and-fortran">
<h3><span class="section-number">3.3.2.8. </span>Compatibility with GNU Specifications (C/C++ and Fortran)<a class="headerlink" href="#compatibility-with-gnu-specifications-c-c-and-fortran" title="Link to this heading">¶</a></h3>
<p>The LLVM compilers (clang and flang) support some of the extensions and compatibility options available in the GNU C/C++ and GNU Fortran compilers. Many features used in Fujitsu compilers (trad/clang mode) are likely available in the LLVM environment as well. However, specification changes or implementation differences may affect behavior. Therefore, during migration, we recommend verifying that the extended syntax and compatibility options you use function as intended in the LLVM environment through actual builds and functional testing.</p>
</section>
<section id="language-specifications">
<h3><span class="section-number">3.3.2.9. </span>Language Specifications<a class="headerlink" href="#language-specifications" title="Link to this heading">¶</a></h3>
<section id="supported-language-standard">
<h4><span class="section-number">3.3.2.9.1. </span>Supported Language Standard<a class="headerlink" href="#supported-language-standard" title="Link to this heading">¶</a></h4>
<p>The following table shows the differences in the language standard supported by the Fujitsu compiler and the LLVM compiler. The notation “(partial)” indicates that the compiler in question does not support all features of the specified standard, but only provides partial compliance.</p>
<p>For Fujitsu compilers, the scope of support is defined as part of the product’s operational guarantee and technical support coverage, For LLVM compilers, the support status is indicated based on the presence or absence of implemented features.</p>
<p>For details on the status of each feature, please refer to the following documentation page. (Based on information as of September 2025)</p>
<ul>
<li><div class="line-block">
<div class="line">Fujitsu Compiler Support Status</div>
<div class="line">“Supercomputer Fugaku User Guide - Language and development environment”</div>
</div>
</li>
<li><div class="line-block">
<div class="line">LLVM Compiler (clang/flang) Support Status</div>
<div class="line">C language&lt;<a class="reference external" href="https://clang.llvm.org/c_status.html">https://clang.llvm.org/c_status.html</a>&gt;</div>
<div class="line">C++ language&lt;<a class="reference external" href="https://clang.llvm.org/cxx_status.html">https://clang.llvm.org/cxx_status.html</a>&gt;</div>
<div class="line">Fortran language&lt;<a class="reference external" href="https://releases.llvm.org/21.1.0/tools/flang/docs/FortranStandardsSupport.html">https://releases.llvm.org/21.1.0/tools/flang/docs/FortranStandardsSupport.html</a>&gt;</div>
</div>
</li>
</ul>
<table class="docutils align-default">
<colgroup>
<col style="width: 20.0%" />
<col style="width: 26.7%" />
<col style="width: 26.7%" />
<col style="width: 26.7%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Item</p></th>
<th class="head"><p>Fujitsu Compiler trad mode</p></th>
<th class="head"><p>Fujitsu Compiler clang mode</p></th>
<th class="head"><p>LLVM Compiler</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>C Language Standard</p></td>
<td><div class="line-block">
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line">C11 Standard</div>
<div class="line">C99 Standard</div>
<div class="line">C89 Standard</div>
</div>
</td>
<td><div class="line-block">
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line">C11 Standard</div>
<div class="line">C99 Standard</div>
<div class="line">C89 Standard</div>
</div>
</td>
<td><div class="line-block">
<div class="line">C23 Standard (part)</div>
<div class="line">C17 Standard (part)</div>
<div class="line">C11 Standard (part)</div>
<div class="line">C99 Standard</div>
<div class="line">C89 Standard</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><p>C++ Language Standard</p></td>
<td><div class="line-block">
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line">C++17 Standard (part)</div>
<div class="line">C++14 Standard</div>
<div class="line">C++11 Standard</div>
<div class="line">C++03 Standard</div>
</div>
</td>
<td><div class="line-block">
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line">C++17 Standard</div>
<div class="line">C++14 Standard</div>
<div class="line">C++11 Standard</div>
<div class="line">C++03 Standard</div>
</div>
</td>
<td><div class="line-block">
<div class="line">C++23 Standard (part)</div>
<div class="line">C++20 Standard (part)</div>
<div class="line">C++17 Standard</div>
<div class="line">C++14 Standard</div>
<div class="line">C++11 Standard</div>
<div class="line">C++03 Standard</div>
</div>
</td>
</tr>
<tr class="row-even"><td><p>Fortran Language Standard</p></td>
<td><div class="line-block">
<div class="line"><br /></div>
<div class="line">Fortran2018 Standard (part)</div>
<div class="line">Fortran2008 Standard</div>
<div class="line">Fortran2003 Standard</div>
<div class="line">Fortran95 Standard</div>
<div class="line">Fortran90 Standard</div>
<div class="line">Fortran77 Standard</div>
</div>
</td>
<td><p>None</p></td>
<td><div class="line-block">
<div class="line">Fortran2023 Standard (part)</div>
<div class="line">Fortran2018 Standard (part)</div>
<div class="line">Fortran2008 Standard (part)</div>
<div class="line">Fortran2003 Standard (part)</div>
<div class="line">Fortran95 Standard</div>
<div class="line">Fortran90 Standard</div>
<div class="line">Fortran77 Standard</div>
</div>
</td>
</tr>
</tbody>
</table>
</section>
<section id="openmp-api-specifications">
<h4><span class="section-number">3.3.2.9.2. </span>OpenMP API Specifications<a class="headerlink" href="#openmp-api-specifications" title="Link to this heading">¶</a></h4>
<p>The following table shows the differences in the supported OpenMP API specification. The notation “(partial)” indicates that the compiler in question does not support all features of the specified standard, but only provides partial compliance. For specifications without “(Part)”, only the latest supported version based on official documentation is listed.</p>
<p>For Fujitsu compilers, the scope of support is defined as part of the product’s operational guarantee and technical support. For LLVM compilers, the support status is indicated based on the presence or absence of implemented features.</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15.0%" />
<col style="width: 25.0%" />
<col style="width: 30.0%" />
<col style="width: 30.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Item</p></th>
<th class="head"><p>Fujitsu Compiler trad mode</p></th>
<th class="head"><p>Fujitsu Compiler clang mode</p></th>
<th class="head"><p>LLVM Compiler</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>C/C++ OpenMP</p></td>
<td><div class="line-block">
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line">OpenMP 4.5 (part)</div>
<div class="line">OpenMP 4.0 (part)</div>
<div class="line">OpenMP 3.1</div>
</div>
</td>
<td><div class="line-block">
<div class="line"><br /></div>
<div class="line">OpenMP 5.0 (part)</div>
<div class="line">OpenMP 4.5</div>
<div class="line"><br /></div>
<div class="line"><br /></div>
</div>
</td>
<td><div class="line-block">
<div class="line">OpenMP 5.1 (part)</div>
<div class="line">OpenMP 5.0 (part)</div>
<div class="line">OpenMP 4.5</div>
<div class="line"><br /></div>
<div class="line"><br /></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><p>Fortran OpenMP</p></td>
<td><div class="line-block">
<div class="line">OpenMP 5.0 (part)</div>
<div class="line">OpenMP 4.5</div>
<div class="line"><br /></div>
<div class="line"><br /></div>
</div>
</td>
<td><p>なし</p></td>
<td><div class="line-block">
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line">OpenMP 4.0 (part)</div>
<div class="line">OpenMP 3.1</div>
</div>
</td>
</tr>
</tbody>
</table>
<div class="line-block">
<div class="line">* For the support status of Fujitsu compilers, please refer to the following documentation.</div>
<div class="line">“C User’s Guide”, “C++ User’s Guide”, “Fortran User’s Guide”</div>
<div class="line">“Supercomputer Fugaku User Guide - Language and development environment”</div>
</div>
<ul>
<li><p>For the support status of clang/flang, please refer to the page below. The table reflects information as of September 2025.</p></li>
<li><div class="line-block">
<div class="line">OpenMP support of clang</div>
<div class="line">&lt;<a class="reference external" href="https://releases.llvm.org/21.1.0/tools/clang/docs/OpenMPSupport.html">https://releases.llvm.org/21.1.0/tools/clang/docs/OpenMPSupport.html</a>&gt;</div>
</div>
</li>
<li><div class="line-block">
<div class="line">OpenMP support of flang</div>
<div class="line">&lt;<a class="reference external" href="https://releases.llvm.org/21.1.0/tools/flang/docs/OpenMPSupport.html">https://releases.llvm.org/21.1.0/tools/flang/docs/OpenMPSupport.html</a>&gt;</div>
</div>
</li>
</ul>
</section>
</section>
</section>
</section>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <div>
    <h3><a href="../../index.html">Table of Contents</a></h3>
    <ul>
<li><a class="reference internal" href="#">3.3. LLVM</a><ul>
<li><a class="reference internal" href="#usage-of-llvm-compilers">3.3.1. Usage of LLVM compilers</a><ul>
<li><a class="reference internal" href="#environment-setting">3.3.1.1. Environment setting</a></li>
<li><a class="reference internal" href="#how-to-use">3.3.1.2. How to Use</a></li>
<li><a class="reference internal" href="#how-to-execute">3.3.1.3. How to execute</a></li>
<li><a class="reference internal" href="#using-libraries">3.3.1.4. Using Libraries</a></li>
<li><a class="reference internal" href="#cautions">3.3.1.5. Cautions</a></li>
</ul>
</li>
<li><a class="reference internal" href="#migration-from-fujitsu-compiler">3.3.2. Migration from Fujitsu compiler</a><ul>
<li><a class="reference internal" href="#compiler-commands">3.3.2.1. Compiler Commands</a></li>
<li><a class="reference internal" href="#compiler-options">3.3.2.2. Compiler Options</a></li>
<li><a class="reference internal" href="#incompatible-features">3.3.2.3. Incompatible features</a></li>
<li><a class="reference internal" href="#substitute">3.3.2.4. Substitute</a></li>
<li><a class="reference internal" href="#object-and-source-incompatibility">3.3.2.5. Object and Source Incompatibility</a></li>
<li><a class="reference internal" href="#about-filename-suffixes">3.3.2.6. About Filename Suffixes</a></li>
<li><a class="reference internal" href="#simd-built-in-functions">3.3.2.7. SIMD Built-in Functions</a></li>
<li><a class="reference internal" href="#compatibility-with-gnu-specifications-c-c-and-fortran">3.3.2.8. Compatibility with GNU Specifications (C/C++ and Fortran)</a></li>
<li><a class="reference internal" href="#language-specifications">3.3.2.9. Language Specifications</a></li>
</ul>
</li>
</ul>
</li>
</ul>

  </div>
  <div>
    <h4>Previous topic</h4>
    <p class="topless"><a href="../GCC_MPI/index.html"
                          title="previous chapter"><span class="section-number">3.2. </span>Combination of GNU Compiler Collection and Fujitsu MPI</a></p>
  </div>
  <div>
    <h4>Next topic</h4>
    <p class="topless"><a href="../../CompileforLN/index.html"
                          title="next chapter"><span class="section-number">4. </span>Compilers that generate binaries for login nodes</a></p>
  </div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>document.getElementById('searchbox').style.display = "block"</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../CompileforLN/index.html" title="4. Compilers that generate binaries for login nodes"
             >next</a></li>
        <li class="right" >
          <a href="../GCC_MPI/index.html" title="3.2. Combination of GNU Compiler Collection and Fujitsu MPI"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../index.html">Supercomputer Fugaku User Guide －Language and development environment－  documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../index.html" ><span class="section-number">3. </span>Compilers that generate binaries for compute nodes</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href=""><span class="section-number">3.3. </span>LLVM</a></li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2025, RIKEN Center for Computational Science.
    &nbsp;&nbsp;<a href="https://www.fugaku.r-ccs.riken.jp/en/">Fugaku website Top</a>
    </div>
  </body>
</html>