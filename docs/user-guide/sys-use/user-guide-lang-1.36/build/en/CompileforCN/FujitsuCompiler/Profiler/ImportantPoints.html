

<!doctype html>

<html lang="en" data-content_root="../../../">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>3.1.11.5. Notes &#8212; Supercomputer Fugaku User Guide －Language and development environment－  documentation</title>
    <link rel="stylesheet" type="text/css" href="../../../_static/pygments.css?v=649a27d8" />
    <link rel="stylesheet" type="text/css" href="../../../_static/bizstyle.css?v=532c1bf3" />
    <link rel="stylesheet" type="text/css" href="../../../_static/custom.css?v=f85107c5" />
    
    <script src="../../../_static/documentation_options.js?v=5929fcd5"></script>
    <script src="../../../_static/doctools.js?v=888ff710"></script>
    <script src="../../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../../../_static/bizstyle.js"></script>
    <link rel="search" title="Search" href="../../../search.html" />
    <link rel="next" title="3.1.12. Manual" href="../ManualReference.html" />
    <link rel="prev" title="3.1.11.4. CPU Performance Analysis Report" href="CPUPerformanceAnalysisReport.html" />
    <meta name="viewport" content="width=device-width,initial-scale=1.0" />
    <!--[if lt IE 9]>
    <script src="_static/css3-mediaqueries.js"></script>
    <![endif]-->
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../ManualReference.html" title="3.1.12. Manual"
             accesskey="N">next</a></li>
        <li class="right" >
          <a href="CPUPerformanceAnalysisReport.html" title="3.1.11.4. CPU Performance Analysis Report"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../../index.html">Supercomputer Fugaku User Guide －Language and development environment－  documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../../index.html" ><span class="section-number">3. </span>Compilers that generate binaries for compute nodes</a> &#187;</li>
          <li class="nav-item nav-item-2"><a href="../index.html" ><span class="section-number">3.1. </span>Fujitsu compiler</a> &#187;</li>
          <li class="nav-item nav-item-3"><a href="index.html" accesskey="U"><span class="section-number">3.1.11. </span>Profiler</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href=""><span class="section-number">3.1.11.5. </span>Notes</a></li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <section id="notes">
<h1><span class="section-number">3.1.11.5. </span>Notes<a class="headerlink" href="#notes" title="Link to this heading">¶</a></h1>
<p>The following notes apply to all profilers. For notes on each profiler (Instant Performance, Advanced Performance, CPU Performance Analysis Report), refer to the manual “Profiler User’s Guide”-“5 Notes”.</p>
<section id="compile-option">
<h2><span class="section-number">3.1.11.5.1. </span>Compile option<a class="headerlink" href="#compile-option" title="Link to this heading">¶</a></h2>
<p>The following options may cause the profiler to behave unintentionally when compiling a program.</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 22.2%" />
<col style="width: 77.8%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Compile options</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>-O0</p></td>
<td><p>In case of C language or C ++ program, to measure the loop information of the program with Instant Performance Profiler, specify an optimisation option ( more than <code class="docutils literal notranslate"><span class="pre">-O1</span></code>) when translation.</p></td>
</tr>
<tr class="row-odd"><td><p>-Nnoline, -ffj-no-line</p></td>
<td><p>If translation option <code class="docutils literal notranslate"><span class="pre">-Nnoline</span></code>  or <code class="docutils literal notranslate"><span class="pre">-ffj-no-line</span></code> is enabled, cannot calculate cost by <code class="docutils literal notranslate"><span class="pre">-Puserfunc</span></code> option of <code class="docutils literal notranslate"><span class="pre">fipp</span></code> command.</p>
<p>If it is something like this program, enable with <code class="docutils literal notranslate"><span class="pre">-Pnouserfunc</span></code> option then cost will be calculated right.</p>
<p>Also traslation option <code class="docutils literal notranslate"><span class="pre">-Nnoline</span></code> or <code class="docutils literal notranslate"><span class="pre">-ffj-no-line</span></code> is enabled, cannot measure the MPI library cost.</p>
</td>
</tr>
<tr class="row-even"><td><p>-Ncoarray</p></td>
<td><p>If translation option <code class="docutils literal notranslate"><span class="pre">-Ncoarray</span></code> is enabled, be aware of the followings.</p>
<ul class="simple">
<li><p>The value obtained by adding +1 to the rank number or process number corresponds to the image number.</p></li>
<li><p>The cost of the MPI library used by the COARRAY function may be recorded.</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>-Klto , -flto</p></td>
<td><p>If translation option <code class="docutils literal notranslate"><span class="pre">-Klto</span></code> or <code class="docutils literal notranslate"><span class="pre">-flto</span></code> is enabled, the following information output by the Instant Performance Profiler is not guaranteed.</p>
<ul class="simple">
<li><p>Call graph information</p></li>
</ul>
<blockquote>
<div><p>The procedure name that is generated internally by link time optimization may be displayed in the displayed procedure name.</p>
</div></blockquote>
<ul class="simple">
<li><p>Source code information</p></li>
</ul>
<blockquote>
<div><p>The cost of each row may not be displayed correctly.</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</section>
<section id="avoiding-long-time-or-large-memory-use-in-large-parallel-programs">
<h2><span class="section-number">3.1.11.5.2. </span>Avoiding long time or large memory use in large parallel programs<a class="headerlink" href="#avoiding-long-time-or-large-memory-use-in-large-parallel-programs" title="Link to this heading">¶</a></h2>
<p>When analyzing large parallel programs (<code class="docutils literal notranslate"><span class="pre">fipppx</span> <span class="pre">-A</span></code>, <code class="docutils literal notranslate"><span class="pre">fapppx</span> <span class="pre">-A</span></code>, <code class="docutils literal notranslate"><span class="pre">fipp</span> <span class="pre">-A</span></code> and <code class="docutils literal notranslate"><span class="pre">fapp</span> <span class="pre">-A</span></code>), the profiler may take a long time to be analyzed or run out of memory.</p>
<p>In the analysis process, the following options of <strong class="program">fapppx</strong> command can be used to avoid the above long run and low memory.</p>
<dl class="option-list">
<dt><kbd><span class="option">-p <var>option</var></span></kbd></dt>
<dd><p>By reducing the number of processes to be analyzed, the memory area required for the analysis can be reduced.</p>
</dd>
<dt><kbd><span class="option">-I <var>option</var></span></kbd></dt>
<dd><p>By reducing the number of output items, the amount of memory use can be reduced.</p>
</dd>
</dl>
</section>
<section id="cpu-frequency-of-compute-nodes-that-also-serve-as-io">
<h2><span class="section-number">3.1.11.5.3. </span>CPU frequency of compute nodes that also serve as IO<a class="headerlink" href="#cpu-frequency-of-compute-nodes-that-also-serve-as-io" title="Link to this heading">¶</a></h2>
<p>The CPU frequency of compute nodes that also serve as IO (CN/BIO, CN/SIO and CN/GIO) is set to 2.2GHz.
Users cannot change the CPU frequency of compute nodes that also serve as IO.</p>
<p>The CPU frequency of compute nodes (CN) is 2.0GHz. Be careful when evaluating the performance.</p>
<p>Refer to “<a class="reference external" href="https://www.fugaku.r-ccs.riken.jp/doc_root/en/user_guides/use_latest/PowerControlFunction/index.html">7. Power control function</a>” of “Users Guide - Use and job execution -” for details of the CPU frequency.</p>
</section>
<section id="cpu-binding">
<h2><span class="section-number">3.1.11.5.4. </span>CPU Binding<a class="headerlink" href="#cpu-binding" title="Link to this heading">¶</a></h2>
<div class="line-block">
<div class="line">When measuring profile data, you must control the bindings so that threads and CPU have a one-to-one relationship.</div>
<div class="line">If the CPU is not binding, the Profiler measurements may be incorrect.</div>
</div>
<p>The CPU Performance Analysis Report prints the following message and does not generate a report.:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>paXX.csv : The environment seems to not bind process to core.
</pre></div>
</div>
<p>For more information on CPU binding, see.</p>
<p>See the “Fortran User’s Guide”, “C User’s Guide”, or “C++ User’s Guide” when using threadparallel program.</p>
<p>Use the VCOORD file for CPU binding when using non-thread-parallel and MPI program (using <strong class="program">mpiexec</strong> command).
See <code class="docutils literal notranslate"><span class="pre">{</span> <span class="pre">-vcoordfile</span> <span class="pre">|</span> <span class="pre">--vcoordfile</span> <span class="pre">}</span></code> option in “MPI User’s Guide” to specify the VCOORD file.
Set the number of CPUs (cores) to “1” (core=1) for all processes in the VCOORD file.</p>
<p>Use <strong class="program">taskset</strong> or <strong class="program">numactl</strong> command for CPU binding when using neither thread-parallel nor MPI program.
For more information, see the man page.</p>
</section>
<section id="cpu-performance-analysis-report-cache-miss-ratio">
<h2><span class="section-number">3.1.11.5.5. </span>CPU Performance Analysis Report Cache Miss Ratio<a class="headerlink" href="#cpu-performance-analysis-report-cache-miss-ratio" title="Link to this heading">¶</a></h2>
<p>The ratio of cache misses may be out of range due to exceed the effect of measurement errors or measurement variation.
The ratio of cache misses greater than 100% is considered 100%, and the ratio of cache misses less than 0% is considered 0%.</p>
<p>Refer to “4.2.2.5.2 Cache (Standard and Detail Reports)” in “Profiler User’s Guide”.</p>
</section>
</section>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <div>
    <h3><a href="../../../index.html">Table of Contents</a></h3>
    <ul>
<li><a class="reference internal" href="#">3.1.11.5. Notes</a><ul>
<li><a class="reference internal" href="#compile-option">3.1.11.5.1. Compile option</a></li>
<li><a class="reference internal" href="#avoiding-long-time-or-large-memory-use-in-large-parallel-programs">3.1.11.5.2. Avoiding long time or large memory use in large parallel programs</a></li>
<li><a class="reference internal" href="#cpu-frequency-of-compute-nodes-that-also-serve-as-io">3.1.11.5.3. CPU frequency of compute nodes that also serve as IO</a></li>
<li><a class="reference internal" href="#cpu-binding">3.1.11.5.4. CPU Binding</a></li>
<li><a class="reference internal" href="#cpu-performance-analysis-report-cache-miss-ratio">3.1.11.5.5. CPU Performance Analysis Report Cache Miss Ratio</a></li>
</ul>
</li>
</ul>

  </div>
  <div>
    <h4>Previous topic</h4>
    <p class="topless"><a href="CPUPerformanceAnalysisReport.html"
                          title="previous chapter"><span class="section-number">3.1.11.4. </span>CPU Performance Analysis Report</a></p>
  </div>
  <div>
    <h4>Next topic</h4>
    <p class="topless"><a href="../ManualReference.html"
                          title="next chapter"><span class="section-number">3.1.12. </span>Manual</a></p>
  </div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>document.getElementById('searchbox').style.display = "block"</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../ManualReference.html" title="3.1.12. Manual"
             >next</a></li>
        <li class="right" >
          <a href="CPUPerformanceAnalysisReport.html" title="3.1.11.4. CPU Performance Analysis Report"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../../index.html">Supercomputer Fugaku User Guide －Language and development environment－  documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../../index.html" ><span class="section-number">3. </span>Compilers that generate binaries for compute nodes</a> &#187;</li>
          <li class="nav-item nav-item-2"><a href="../index.html" ><span class="section-number">3.1. </span>Fujitsu compiler</a> &#187;</li>
          <li class="nav-item nav-item-3"><a href="index.html" ><span class="section-number">3.1.11. </span>Profiler</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href=""><span class="section-number">3.1.11.5. </span>Notes</a></li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2025, RIKEN Center for Computational Science.
    &nbsp;&nbsp;<a href="https://www.fugaku.r-ccs.riken.jp/en/">Fugaku website Top</a>
    </div>
  </body>
</html>