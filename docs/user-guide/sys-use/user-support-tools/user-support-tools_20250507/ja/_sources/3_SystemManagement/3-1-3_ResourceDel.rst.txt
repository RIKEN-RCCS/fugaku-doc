割当リソース削除
=================

| 　**[名前]**
| 　resourcedel - ジョブタイプごとや利用者ごとの割当リソースを削除する

| 　**[書式]**
| 　resourcedel  -g  グループ名  -n  リソースタイプ名
| 　resourcedel  -f  ファイル名

| 　**[説明]**
| 　resourcedel コマンドは、リソースタイプごとに設定した制限値を削除する場合に使用する。削除形式は、1件のリソースタイプ指定して削除する単一形式と複数のリソースタイプ制限値を一括して削除するCSV形式がある。

.. figure:: img/3_SystemManagement_04.png

| 　テーマ管理者、サブテーマ管理者、プロジェクト責任者は課題の割当リソースをグループより下の階層（上記図のリソースグループ、ユーザの階層）の制限値を削除することができる。ただし、グループ配下のリソースグループ単体への制限値についてはシステム管理者のみ削除が可能である。
| 　既にジョブ投入が行われているリソースタイプについては削除はできない。制限値を変更する場合は 3.1.2. 割当リソース変更 で対応する。
| 　なお、一般利用者については当該コマンドを利用できない。

| 　**[オプション]**
| 　-g  グループ名
| 　グループ名を指定する。

| 　-n  リソースタイプ名
| 　設定対象となるリソースタイプに対応したリソースタイプ名を指定する。

| 　【設定例】

   .. list-table:: 
     :header-rows: 1
     :widths: 20 60
   
     * - リソースタイプ
       - 設定するリソースタイプ名
   
     * - RSCG
       - | リソースグループ名を指定
         | 【例】small
   
     * - USER
       - | ユーザ名を指定
         | 【例】user01
   
     * - USER_RSCG
       - | ユーザ名+”_”+リソースグループ名を指定
         | 【例】user01_small

| 　-f  ファイル名
| 　課題の割当リソースをジョブタイプ、利用者に分配済みの場合において、予算枠を削除するための情報が記載されたファイルを指定する。
| 　
| 　【ファイルレイアウト】
| 　必須欄　○：必須、△：リソースタイプにより必須有無が決定される

   .. list-table:: 
     :header-rows: 1
     :widths: 5 20 20 5 30
   
     * - No
       - 項目名
       - 属性
       - 必須
       - 備考
   
     * - 1
       - RTYPE
       - 半角英字
       - ○
       - | リソースタイプ
         | ユーザ：USER
         | リソースグループ：RSCG
         | ユーザ-リソースグループ：USER_RSCG
   
     * - 2
       - GROUP
       - 半角英数字記号
       - ○
       - グループ名
   
     * - 3
       - USER
       - 半角英数字
       - △
       - | ユーザ名
         | リソースグループ指定時はNULL
   
     * - 4
       - RSCUNT
       - 半角英数字
       - △
       - | リソースグループ名
         | ユーザ指定時はNULL
   
     * - 5
       - RSCGRP
       - 半角英数字
       - △
       - | リソースグループ名
         | ユーザ指定時はNULL
   
     * - 6
       - LIMIT
       - 数字
       - －
       - | 計算リソース枠
         | 設定値は無視される。

　【ファイル設定例】

.. code-block:: none 

   RTYPE,GROUP,USER,RSCUNT,RSCGRP,LIMIT　・・・ヘッダ
   USER,group01,user1,,,　・・・ユーザに対する割当
   RSCG,group01,,ru1,rg1,　・・・リソースグループに対する割当
   USER_RSCG,group01,user1,ru1,rg1,　・・・ユーザとリソースグループの組み合わせに対する割当

| 　--help
| 　コマンドのヘルプ内容を表示する。

| 　**[復帰値]**
| 　正常時: 0
| 　異常時: 1

| 　**[備考]**
| 　なし。

| 　**[使用例]**
| 　【例1】	ユーザの制限値を削除する

.. code-block:: console 

   [login]$ resourcedel -g group01 -n user1
   1件のリソース情報を削除しました。
   [login]$

　【例2】	ユーザとリソースグループの組み合わせの制限値を削除する

.. code-block:: console 

   [login]$ resourcedel -g group01 -n user1_rg1
   1件のリソース情報を削除しました。
   [login]$

　【例3】	複数のジョブタイプ、利用者の予算枠を一括して削除する

.. code-block:: console 

   [login]$ resourcedel -f resourcedel.csv
   4件のリソース情報を削除しました。
   [login]$

