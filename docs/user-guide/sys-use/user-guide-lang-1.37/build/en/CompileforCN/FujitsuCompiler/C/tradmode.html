

<!doctype html>

<html lang="en" data-content_root="../../../">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>3.1.8.3. trad mode &#8212; Supercomputer Fugaku User Guide －Language and development environment－  documentation</title>
    <link rel="stylesheet" type="text/css" href="../../../_static/pygments.css?v=649a27d8" />
    <link rel="stylesheet" type="text/css" href="../../../_static/bizstyle.css?v=532c1bf3" />
    <link rel="stylesheet" type="text/css" href="../../../_static/custom.css?v=f85107c5" />
    
    <script src="../../../_static/documentation_options.js?v=5929fcd5"></script>
    <script src="../../../_static/doctools.js?v=888ff710"></script>
    <script src="../../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../../../_static/bizstyle.js"></script>
    <link rel="search" title="Search" href="../../../search.html" />
    <link rel="next" title="3.1.8.3.7.1. Sequential execution" href="CSampleProgram%28sequential%29.html" />
    <link rel="prev" title="3.1.8.2. Compiler mode" href="modeTradAndClangC.html" />
    <meta name="viewport" content="width=device-width,initial-scale=1.0" />
    <!--[if lt IE 9]>
    <script src="_static/css3-mediaqueries.js"></script>
    <![endif]-->
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="CSampleProgram%28sequential%29.html" title="3.1.8.3.7.1. Sequential execution"
             accesskey="N">next</a></li>
        <li class="right" >
          <a href="modeTradAndClangC.html" title="3.1.8.2. Compiler mode"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../../index.html">Supercomputer Fugaku User Guide －Language and development environment－  documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../../index.html" ><span class="section-number">3. </span>Compilers that generate binaries for compute nodes</a> &#187;</li>
          <li class="nav-item nav-item-2"><a href="../index.html" ><span class="section-number">3.1. </span>Fujitsu compiler</a> &#187;</li>
          <li class="nav-item nav-item-3"><a href="index.html" accesskey="U"><span class="section-number">3.1.8. </span>C language</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href=""><span class="section-number">3.1.8.3. </span>trad mode</a></li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <section id="trad-mode">
<h1><span class="section-number">3.1.8.3. </span>trad mode<a class="headerlink" href="#trad-mode" title="Link to this heading">¶</a></h1>
<p>Here we explain about trad mode.</p>
<section id="how-to-compile">
<h2><span class="section-number">3.1.8.3.1. </span>How to compile<a class="headerlink" href="#how-to-compile" title="Link to this heading">¶</a></h2>
<div class="line-block">
<div class="line">This indicates how to compile C language program.</div>
<div class="line">Use  <strong class="program">fccpx</strong> for C compiler. When using MPI library,  by using  <strong class="program">mpifccpx</strong>,  you don’t need to consider about MPI header file and library.</div>
</div>
<ul class="simple">
<li><p>If using MPI library</p></li>
</ul>
<blockquote>
<div><div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">[_LNlogin]$ </span>mpifccpx<span class="w">  </span><span class="o">[</span>compile<span class="w"> </span>option<span class="o">]</span><span class="w"> </span><span class="nb">source</span><span class="w"> </span>file<span class="w"> </span>name
</pre></div>
</div>
</div></blockquote>
<ul class="simple">
<li><p>If not using MPI library</p></li>
</ul>
<blockquote>
<div><div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">[_LNlogin]$ </span>fccpx<span class="w">  </span><span class="o">[</span>compile<span class="w"> </span>option<span class="o">]</span><span class="w"> </span><span class="nb">source</span><span class="w"> </span>file<span class="w"> </span>name
</pre></div>
</div>
</div></blockquote>
</section>
<section id="compilation-option">
<h2><span class="section-number">3.1.8.3.2. </span>Compilation option<a class="headerlink" href="#compilation-option" title="Link to this heading">¶</a></h2>
<p>This indicates the main compile option of C compiler.</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 30.0%" />
<col style="width: 70.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Compile option</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>-c</p></td>
<td><p>Proceed up to object file creation.</p></td>
</tr>
<tr class="row-odd"><td><p>-o exe_file</p></td>
<td><div class="line-block">
<div class="line">Change the executable file name / object file name to  <code class="docutils literal notranslate"><span class="pre">exe_file</span></code>.</div>
<div class="line">If executable file name is omitted, it will be  <code class="file docutils literal notranslate"><span class="pre">a.out</span></code>.</div>
</div>
</td>
</tr>
<tr class="row-even"><td><p>-O [0|1|2|3]</p></td>
<td><div class="line-block">
<div class="line">Specify optimisation level.</div>
<div class="line">If the number after  <code class="docutils literal notranslate"><span class="pre">-O</span></code> is omitted, it will be  <code class="docutils literal notranslate"><span class="pre">-O2</span></code>.</div>
<div class="line">The default is  <code class="docutils literal notranslate"><span class="pre">-O2</span></code>.</div>
<div class="line"><a class="reference external" href="https://www.fugaku.r-ccs.riken.jp/en/operation/20211208_01">Change the default value of C/C++ compiler option that specifies the level of optimization</a></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><p>-Kfast</p></td>
<td><p>Instructs the creation of an object program that runs at high speed on the target machine.</p></td>
</tr>
<tr class="row-even"><td><p>-Ksimd[=1|2|auto]</p></td>
<td><div class="line-block">
<div class="line">Generate objects using SIMD extension instructions.</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">-Ksimd=1</span></code></div>
<div class="line-block">
<div class="line">Generate objects using SIMD extension instructions.</div>
</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">-Ksimd=2</span></code></div>
<div class="line-block">
<div class="line">Generate objects using SIMD extension instructions to the loop including if-statement, in addition to  <code class="docutils literal notranslate"><span class="pre">-Ksimd=1</span></code>.</div>
</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">-Ksimd=auto</span></code></div>
<div class="line-block">
<div class="line">Instructs the compiler to automatically determine whether to loop the loop. The SIMD of the loop including IF syntax is promoted.</div>
</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">-Ksimd</span></code></div>
<div class="line-block">
<div class="line">If the number after  <code class="docutils literal notranslate"><span class="pre">-Ksimd</span></code> is omitted, it will be  <code class="docutils literal notranslate"><span class="pre">-Ksimd=auto</span></code>.</div>
</div>
<div class="line">IF over  <code class="docutils literal notranslate"><span class="pre">-O2</span></code> option is available,  <code class="docutils literal notranslate"><span class="pre">-Ksimd</span></code> option is applied when omitted.</div>
<div class="line">If  <code class="docutils literal notranslate"><span class="pre">-Ksimd</span></code> option is available,  <code class="docutils literal notranslate"><span class="pre">-Kloop_part_simd</span></code> option is also available.</div>
<div class="line">This option is meaningful when the -O2 option or higher is enabled.</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><p>-Kparallel</p></td>
<td><div class="line-block">
<div class="line">Proceed auto parallelization. The default is <code class="docutils literal notranslate"><span class="pre">-Knoparallel</span></code>. This option will be disable when <code class="docutils literal notranslate"><span class="pre">-O0</span></code> and <code class="docutils literal notranslate"><span class="pre">-O1</span></code> option is enable.</div>
<div class="line">The <code class="docutils literal notranslate"><span class="pre">-Kparallel</span></code> option is needed if an object program compiled with it exists in the command line as an input file.</div>
</div>
</td>
</tr>
<tr class="row-even"><td><p>-Kopenmp</p></td>
<td><div class="line-block">
<div class="line">Enable directive of OpenMP C specification. Supported specifications are OpenMP 3.1/OpenMP 4.5 (part).</div>
<div class="line">The default is <code class="docutils literal notranslate"><span class="pre">-Knoopenmp</span></code>.</div>
<div class="line">The <code class="docutils literal notranslate"><span class="pre">-Kopenmp</span></code> option is needed if an object program compiled with it exists in the command line as an input file.</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><p>-Kocl</p></td>
<td><div class="line-block">
<div class="line">Enable the optimization control line.</div>
<div class="line">The default is  <code class="docutils literal notranslate"><span class="pre">-Knoocl</span></code>.</div>
</div>
</td>
</tr>
<tr class="row-even"><td><p>-Klargepage</p></td>
<td><p>Indicates whether to create an executable program that uses the large page feature. This option must be specified when linking a program. Default is  <code class="docutils literal notranslate"><span class="pre">-Klargepage</span></code> .If not using large page function, use  <code class="docutils literal notranslate"><span class="pre">-Knolargepage</span></code> option.</p></td>
</tr>
<tr class="row-odd"><td><p>-Koptmsg[=1|2]</p></td>
<td><div class="line-block">
<div class="line">Message-output optimisation status.</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">-Koptmsg=1</span></code></div>
<div class="line-block">
<div class="line">A message is output indicating that the execution result has been optimized that may cause side effects.</div>
</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">-Koptmsg=2</span></code></div>
<div class="line-block">
<div class="line">A message is output indicating that optimization functions such as automatic parallelization, SIMD conversion, and loop unrolling have been activated in addition to  <code class="docutils literal notranslate"><span class="pre">Koptmsg=1</span></code>.</div>
</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">-Koptmsg</span></code></div>
<div class="line-block">
<div class="line">If the number after  <code class="docutils literal notranslate"><span class="pre">-Koptmsg</span></code>is omitted, it will be  <code class="docutils literal notranslate"><span class="pre">-Koptmsg=1</span></code>.</div>
</div>
<div class="line">The default is  <code class="docutils literal notranslate"><span class="pre">-Knooptmsg</span></code>.</div>
</div>
</td>
</tr>
<tr class="row-even"><td><p>-I directory</p></td>
<td><p>Specify the directory to search for INCLUDE files.</p></td>
</tr>
<tr class="row-odd"><td><p>-std=[level]</p></td>
<td><div class="line-block">
<div class="line">Specifies the level of language specification that the compiler (including preprocessor) interprets.</div>
<div class="line">To the level, specify one of these: c89, c99, c11, gnu89, gnu99 or gnu11. If omitted,  <code class="docutils literal notranslate"><span class="pre">-std=gnu11</span></code> option is applied.</div>
</div>
</td>
</tr>
<tr class="row-even"><td><p>-Nlibomp</p></td>
<td><p>Uses the LLVM OpenMP library for parallel processing. This option must be specified when linking. Default is <code class="docutils literal notranslate"><span class="pre">-Nlibomp</span></code>.  When using the Fujitsu OpenMP library for parallel processing, specify <code class="docutils literal notranslate"><span class="pre">-Nfjomplib</span></code>.</p></td>
</tr>
<tr class="row-odd"><td><p>-NRtrap</p></td>
<td><div class="line-block">
<div class="line">Indicates whether to detect an interrupt event during execution.</div>
<div class="line">The default is <code class="docutils literal notranslate"><span class="pre">-NRnotrap</span></code>.</div>
<div class="line">To enable the <code class="docutils literal notranslate"><span class="pre">-NRtrap</span></code> option, it must be set at both compilation and linking.</div>
</div>
</td>
</tr>
<tr class="row-even"><td><p>-Nsrc</p></td>
<td><p>Output source list.</p></td>
</tr>
<tr class="row-odd"><td><p>-Nsta</p></td>
<td><p>Output statistics information.</p></td>
</tr>
<tr class="row-even"><td><p>-V</p></td>
<td><p>Output compiler version information to the standard error.</p></td>
</tr>
</tbody>
</table>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p>About C compiler compile option, see C User’s Guide “2.2 Compiler Options”.</p>
</div>
</section>
<section id="recommended-compiling-option">
<h2><span class="section-number">3.1.8.3.3. </span>Recommended compiling option<a class="headerlink" href="#recommended-compiling-option" title="Link to this heading">¶</a></h2>
<p>Performance Focused:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>-Kfast,openmp[,parallel]

Specify this option to draw out the full performance of the A64FX. For example,
with the option, you can make full use of cores through thread parallelization or
SVE through SIMDization, improve instruction level parallelism by software pipelining,
change the operation order by optimization, and use the reciprocal approximation operation.
</pre></div>
</div>
<p>Precision Focused:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>-Kfast,openmp[,parallel],fp_precision

Use this option when you want to obtain the same precision as -O0 while optimizing
performance as much as possible. Specify the new option Kfp_precision, which
suppresses all optimizations that affect precision, as an option appended to the
recommended option focused on performance.

This suppresses multiple optimizations that significantly affect performance.
</pre></div>
</div>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">-Kfast</span></code> option is the same result as specifying “<code class="docutils literal notranslate"><span class="pre">-O3</span> <span class="pre">-Keval,fast_matmul,fp_contract,fp_relaxed,fz,ilfunc,mfunc,omitfp,rdconv,simd_packed_promotion</span></code>”.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">-Kopenmp</span></code> option enables the OpenMP specification directives.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">-Kparallel</span></code> option induces <code class="docutils literal notranslate"><span class="pre">-O2</span></code>, <code class="docutils literal notranslate"><span class="pre">-Kregion_extension</span></code>, <code class="docutils literal notranslate"><span class="pre">-Kloop_part_parallel</span></code>, <code class="docutils literal notranslate"><span class="pre">Kloop_perfect_nest</span></code> and  <code class="docutils literal notranslate"><span class="pre">-mt</span></code> option. However, if specified <code class="docutils literal notranslate"><span class="pre">-O3</span></code> option (specified at the same time with <code class="docutils literal notranslate"><span class="pre">-Kfast</span></code>), <code class="docutils literal notranslate"><span class="pre">-O3</span></code> is applied.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">-Kfp_precision</span></code> option is the same result as specifying “<code class="docutils literal notranslate"><span class="pre">-Knoeval,nofast_matmul,nofp_contract,nofp_relaxed,nofz,noilfunc,nomfunc,parallel_fp_precision</span></code>”.</p></li>
</ul>
<blockquote>
<div><div class="admonition attention">
<p class="admonition-title">Attention</p>
<p>Optimization functions other than the recommended options may or may not be effective depending on the characteristics of the program data and must be tried.</p>
</div>
</div></blockquote>
<p>The option detail is indicated as below.</p>
<ul class="simple">
<li><p>The option list of the same result with <code class="docutils literal notranslate"><span class="pre">-Kfast</span></code>.</p></li>
</ul>
<blockquote>
<div><table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head" colspan="2"><p>Compile option</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td colspan="2"><p>-O3</p></td>
<td><div class="line-block">
<div class="line">Generate optimized objects.</div>
<div class="line">Performs optimization such as SIMD conversion and unrolling.</div>
</div>
</td>
</tr>
<tr class="row-odd"><td rowspan="4"><p>-Keval <sup>*</sup></p></td>
<td></td>
<td><div class="line-block">
<div class="line">Applies optimizations that change how the operations are evaluated.</div>
<div class="line">If this option is enabled,  <code class="docutils literal notranslate"><span class="pre">-Ksimd_reduction_product</span></code> is also enabled.</div>
<div class="line">If this option and  <code class="docutils literal notranslate"><span class="pre">-Kparallel</span></code> is enabled,  <code class="docutils literal notranslate"><span class="pre">-Kfsimple</span></code> and  <code class="docutils literal notranslate"><span class="pre">-Kreduction</span></code> are also enabled.</div>
</div>
</td>
</tr>
<tr class="row-even"><td><p>-Kfsimple <sup>*</sup></p></td>
<td><p>Simplify floating-point arithmetic for object programs.</p></td>
</tr>
<tr class="row-odd"><td><p>-Kreduction <sup>*</sup></p></td>
<td><p>Optimizes reduction.</p></td>
</tr>
<tr class="row-even"><td><p>-Ksimd_reduction_product <sup>*</sup></p></td>
<td><p>SIMD conversion is performed for the reduction operation of multiplication.</p></td>
</tr>
<tr class="row-odd"><td colspan="2"><p>-Kfast_matmul <sup>*</sup></p></td>
<td><p>Convert matrix product loops into fast library calls.</p></td>
</tr>
<tr class="row-even"><td colspan="2"><p>-Kfp_contract <sup>*</sup></p></td>
<td><p>Performs optimization using instructions of Floating-Point Multiply-Add/Subtract.</p></td>
</tr>
<tr class="row-odd"><td colspan="2"><p>-Kfp_relaxed <sup>*</sup></p></td>
<td><div class="line-block">
<div class="line">For single-precision or double-precision floating-point division or SQRT functions,</div>
<div class="line">use reciprocal approximation and Floating-Point Multiply-Add / Subtract operation instructions.</div>
</div>
</td>
</tr>
<tr class="row-even"><td colspan="2"><p>-Kfz</p></td>
<td><p>Use flush-to-zero mode.</p></td>
</tr>
<tr class="row-odd"><td colspan="2"><p>-Kilfunc=procedure <sup>*</sup></p></td>
<td><p>Inline expansion of single-precision and double-precision real type built-in functions.</p></td>
</tr>
<tr class="row-even"><td colspan="2"><p>-Kmfunc <sup>*</sup></p></td>
<td><p>Performs optimization using multiple arithmetic functions.</p></td>
</tr>
<tr class="row-odd"><td colspan="2"><p>-Komitfp</p></td>
<td><div class="line-block">
<div class="line">Indicates to perform optimization that does not guarantee the frame pointer register in the procedure call.</div>
<div class="line">If this option is enable, tracebackinformation is not guaranteed.</div>
</div>
</td>
</tr>
<tr class="row-even"><td colspan="2"><p>-Ksimd_packed_promotion</p></td>
<td><p>Promotes packed-SIMD by assuming that the index calculation of single precision floating point type
and 4-byte integer type array elements does not exceed the range of 4 bytes.</p></td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p><sup>*</sup>:Optimization may affect the calculation result. For details, refer to “Chapter 3 Optimization” in the “C User’s Guide”.</p>
</div>
</div></blockquote>
<ul class="simple">
<li><p>The option list which induced from  <code class="docutils literal notranslate"><span class="pre">-Kparallel</span></code></p></li>
</ul>
<blockquote>
<div><table class="docutils align-default">
<colgroup>
<col style="width: 40.0%" />
<col style="width: 60.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Induced option</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>-O2</p></td>
<td><p>Indicates optimisation level.</p></td>
</tr>
<tr class="row-odd"><td><p>-Kregion_extension</p></td>
<td><p>Expand parallel region.</p></td>
</tr>
<tr class="row-even"><td><p>-Kloop_part_parallel</p></td>
<td><p>Partly auto parallelization by deviding the loop.</p></td>
</tr>
<tr class="row-odd"><td><p>-Kloop_perfect_nest</p></td>
<td><p>Indicates whether or not to divide incomplete multiple loop into complete multiple loop .</p></td>
</tr>
<tr class="row-even"><td><p>-mt</p></td>
<td><p>Create multi thread safe object.</p></td>
</tr>
</tbody>
</table>
</div></blockquote>
</section>
<section id="environment-variable-option-specification">
<h2><span class="section-number">3.1.8.3.4. </span>Environment variable (option specification)<a class="headerlink" href="#environment-variable-option-specification" title="Link to this heading">¶</a></h2>
<p>This indicates the environment varialbe C language compiler ( <strong class="program">fccpx</strong> ) uses.</p>
<ol class="arabic">
<li><p>fccpx_ENV</p>
<p>Able to set compile option to the environment varialble  fccpx_ENV .
The compile options defined in fccpx_ENV are automatically passed to the compiler.
Compiler options defined in environment variables and systems have the following precedence:</p>
<p>[Priority]</p>
<ol class="arabic simple">
<li><p>Compile command operands</p></li>
<li><p>Environment variable for setting translation option (Mode unique:fccpx_trad_ENV,fcc_trad_ENV)</p></li>
<li><p>Environment variable for setting translation option (Mode common:fccpx_ENV,fcc_ENV)</p></li>
<li><p>Translation profile file (Mode unique:<code class="file docutils literal notranslate"><span class="pre">/etc$</span><em><span class="pre">FJSVXTCLANGA</span></em><span class="pre">/fccpx_trad_PROF</span></code>)</p></li>
<li><p>Translation profile file (Mode common:<code class="file docutils literal notranslate"><span class="pre">/etc$</span><em><span class="pre">FJSVXTCLANGA</span></em><span class="pre">/fccpx_PROF</span></code>)</p></li>
<li><p>Omitted value</p></li>
</ol>
</li>
</ol>
<blockquote>
<div><p>In the following example, the recommended option is set in the environment variable fccpx_ENV.</p>
<blockquote>
<div><div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">[_LNlogin]$ </span><span class="nb">export</span><span class="w"> </span><span class="nv">fccpx_ENV</span><span class="o">=</span>-Kfast,parallel
</pre></div>
</div>
<p>The enabled compilation options are able to check with  <code class="docutils literal notranslate"><span class="pre">-Nsta</span></code> option.</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">[_LNlogin]$ </span>fccpx<span class="w"> </span>-Nsta<span class="w"> </span>sample.c

<span class="go">Fujitsu C/C++ Version 4.0.0   Tue Nov 12 18:12:59 2019</span>
<span class="go">Statistics information</span>
<span class="go">  Option information</span>
<span class="go">    Environment variable : (omitted)</span>
<span class="go">    Command line options : -Nsta</span>
<span class="go">    Effective options    : -g0 -Qy -std=gnu11 -O0 -Kcmodel=small -Kconst -Knofconst</span>
<span class="go">                           -Knofenv_access -Khpctag -Klargepage -Knolib -Klooptype=f</span>
<span class="go">                           -Knoopenmp -Knoopenmp_simd -Knooptlib_string</span>
<span class="go">                           -Knopc_relative_literal_loads -Knoparallel -Ksimd_reg_size=512</span>
<span class="go">                           -KA64FX -KARMV8_3_A -KSVE -Ncancel_overtime_compilation</span>
<span class="go">                           -Nnocoverage -Nnoexceptions -Nnofjcex -Nfjprof -Nnohook_func</span>
<span class="go">                           -Nnohook_time -Nline -Nquickdbg=noheapchk -Nquickdbg=nosubchk</span>
<span class="go">                           -NRnotrap -Nnoreordered_variable_stack -Nrt_notune</span>
<span class="go">                           -Nsetvalue=noheap -Nsetvalue=nostack -Nsetvalue=noscalar</span>
<span class="go">                           -Nsetvalue=noarray -Nsetvalue=nostruct -Nsta</span>
</pre></div>
</div>
</div></blockquote>
</div></blockquote>
<ol class="arabic" start="2">
<li><p>TMPDIR</p>
<p>The temporary directory used by the compiler can be changed by using the environment variable <span class="target" id="index-0"></span><code class="xref std std-envvar docutils literal notranslate"><span class="pre">TMPDIR</span></code>.
<code class="docutils literal notranslate"><span class="pre">/etc/profile</span></code> to set the home directory in <span class="target" id="index-1"></span><code class="xref std std-envvar docutils literal notranslate"><span class="pre">TMPDIR</span></code>.</p>
<p>When changing the temporary directory, please avoid using <code class="file docutils literal notranslate"><span class="pre">/tmp</span></code>.
For <span class="target" id="index-2"></span><code class="xref std std-envvar docutils literal notranslate"><span class="pre">TMPDIR</span></code>, specify a writable directory of  <code class="file docutils literal notranslate"><span class="pre">/home/</span></code> or  <code class="file docutils literal notranslate"><span class="pre">/vol0n0m/data/</span></code>.</p>
</li>
</ol>
</section>
<section id="c-library-for-parallel-processing">
<h2><span class="section-number">3.1.8.3.5. </span>C library for parallel processing<a class="headerlink" href="#c-library-for-parallel-processing" title="Link to this heading">¶</a></h2>
<p>With  Supercomputer Fugaku, the following two libraries are provided for “parallel processing”.</p>
<blockquote>
<div><table class="docutils align-default">
<colgroup>
<col style="width: 25.0%" />
<col style="width: 75.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Library name</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>LLVM OpenMP library</p></td>
<td><ul class="simple">
<li><p>A library for parallel functions based on LLVM OpenMP Runtime Library, which is open source software.</p></li>
<li><p>Supported specifications are OpenMP 4.5/OpenMP 5.0 (part).</p></li>
<li><p>Available in trad mode and clang mode.</p></li>
<li><p>The trad mode is available in OpenMP 3.1/OpenMP 4.5 (part).</p></li>
<li><p>For the specifications of the LLVM OpenMP library, please read “Chapter 4 Multiprocessing” in the C User’s Guide.</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>Fujitsu OpenMP library</p></td>
<td><ul class="simple">
<li><p>This is a library for parallel functions based on the Fujitsu OpenMP library for K computer systems prior to PRIMEHPC FX100.</p></li>
<li><p>It is suitable for cases where importance is attached to compatibility with the conventional Fujitsu OpenMP library.</p></li>
<li><p>The supported specifications are OpenMP 3.1/OpenMP 4.5 (part).</p></li>
<li><p>Only available in trad mode.</p></li>
<li><p>For the specifications of the Fujitsu OpenMP library, please read “Appendix J Fujitsu OpenMP Library” in the C User’s Guide.</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
</div></blockquote>
<ul class="simple">
<li><p>To specify the library for parallel process, it is needed to specify the following option when linking.</p></li>
</ul>
<blockquote>
<div><table class="docutils align-default">
<colgroup>
<col style="width: 18.2%" />
<col style="width: 81.8%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Option</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>-Nlibomp</p></td>
<td><p>Indicates that the LLVM OpenMP library is to be used as the OpenMP library.</p>
<p>When omitted, this <code class="docutils literal notranslate"><span class="pre">-Nlibomp</span></code> option will be applied.</p>
</td>
</tr>
<tr class="row-odd"><td><p>-Nfjomplib</p></td>
<td><p>Indicates that the Fujitsu OpenMP library is to be used as the OpenMP library.</p></td>
</tr>
</tbody>
</table>
<div class="admonition attention">
<p class="admonition-title">Attention</p>
<p>If <code class="docutils literal notranslate"><span class="pre">-Nclang</span></code> option is enabled, <code class="docutils literal notranslate"><span class="pre">-Nfjomplib</span></code> option will be disabled and <code class="docutils literal notranslate"><span class="pre">-Nlibomp</span></code> option will be enabled.</p>
</div>
</div></blockquote>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The following environment variables added in OpenMP 4.0 and later are available in the LLVM OpenMP library.
On the other hand, the Fujitsu OpenMP library does not support these environment variables. These environment variables are ignored when using the Fujitsu OpenMP library.</p>
<ul class="simple">
<li><p>OMP_CANCELLATION</p></li>
<li><p>OMP_DISPLAY_ENV</p></li>
<li><p>OMP_DEFAULT_DEVICE</p></li>
<li><p>OMP_MAX_TASK_PRIORITY</p></li>
</ul>
</div>
<ul class="simple">
<li><p>The table below shows the combinations of C/C++ object files that can be combined with the parallel processing library.</p></li>
</ul>
<blockquote>
<div><table class="docutils align-default">
<colgroup>
<col style="width: 33.3%" />
<col style="width: 33.3%" />
<col style="width: 33.3%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Library name</p></th>
<th class="head"><p>C/C++ object file trad mode</p></th>
<th class="head"><p>C/C++ object file clang mode</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>LLVM OpenMP library</p></td>
<td><p>Able to combine</p></td>
<td><p>Able to combine</p></td>
</tr>
<tr class="row-odd"><td><p>Fujitsu OpenMP library</p></td>
<td><p>Able to combine</p></td>
<td><p>Unable to combine</p></td>
</tr>
</tbody>
</table>
</div></blockquote>
</section>
<section id="compilation-example">
<h2><span class="section-number">3.1.8.3.6. </span>Compilation example<a class="headerlink" href="#compilation-example" title="Link to this heading">¶</a></h2>
<div class="line-block">
<div class="line">This indicates how to compile C program.</div>
<div class="line">Here is a general C language compilation procedure.</div>
</div>
<blockquote>
<div><p>Multi node job (hybrid parallelization)</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">[_LNlogin]$ </span>mpifccpx<span class="w"> </span>-Kfast,parallel,openmp<span class="w">  </span>sample.c
</pre></div>
</div>
<p>Single node job (sequential)</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">[_LNlogin]$ </span>fccpx<span class="w"> </span>-Kfast<span class="w">  </span>sample.c
</pre></div>
</div>
<p>Single node job (auto parallel)</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">[_LNlogin]$ </span>fccpx<span class="w"> </span>-Kfast,parallel<span class="w">  </span>sample.c
</pre></div>
</div>
<p>Single node job (OpenMP)</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">[_LNlogin]$ </span>fccpx<span class="w"> </span>-Kfast,openmp<span class="w">  </span>sample.c
</pre></div>
</div>
</div></blockquote>
</section>
<section id="c-sample-program">
<h2><span class="section-number">3.1.8.3.7. </span>C sample program<a class="headerlink" href="#c-sample-program" title="Link to this heading">¶</a></h2>
<p>Here is an example from compilation to job execution using a sample program.</p>
<div class="toctree-wrapper compound">
<ul>
<li class="toctree-l1"><a class="reference internal" href="CSampleProgram%28sequential%29.html">3.1.8.3.7.1. Sequential execution</a></li>
<li class="toctree-l1"><a class="reference internal" href="CSampleProgram%28automaticParallel%29.html">3.1.8.3.7.2. Automatic parallel</a></li>
<li class="toctree-l1"><a class="reference internal" href="CSampleProgram%28OpenMP%29.html">3.1.8.3.7.3. OpenMP</a></li>
<li class="toctree-l1"><a class="reference internal" href="CSampleProgram%28hybridParallel%29.html">3.1.8.3.7.4. Hybrid parallel</a></li>
</ul>
</div>
</section>
<section id="built-in-debug-function">
<h2><span class="section-number">3.1.8.3.8. </span>Built-in debug function<a class="headerlink" href="#built-in-debug-function" title="Link to this heading">¶</a></h2>
<p>The built-in debugging function performs various inspections by compiling a program with debugging options at compile time and executing an execution module.
If you use the built-in debug function, the optimization level may be down to  <code class="docutils literal notranslate"><span class="pre">-O0</span></code>so that the execution time will take longer than the normal.</p>
<ul class="simple">
<li><p>About built-in debug function</p></li>
</ul>
<blockquote>
<div><p>Changing the execution environment may cause abnormal termination. In such cases, the following are possible causes:</p>
<ol class="arabic simple">
<li><p>The variable is quoted without setting an initial value.</p></li>
<li><p>Array subscript exceeds array size</p></li>
</ol>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>[Change execution environment] is the case below:</p>
<ul class="simple">
<li><p>Used the tool such as profiler</p></li>
<li><p>Changed the size of large page</p></li>
</ul>
<p>In this case, the execution status of the execution module in the memory changes and may end abnormally.</p>
</div>
</div></blockquote>
<p>We introduce the built-in debug function which inspect these.</p>
<p>For - C/C++ use, proceed nect inspection with built-in debug function.</p>
<p>The following inspection is performed with the built-in debugging function.</p>
<blockquote>
<div><ul class="simple">
<li><p>Check array range ( <code class="docutils literal notranslate"><span class="pre">-Nquickdbg=subchk</span></code> option)</p></li>
</ul>
<p>If the array index is not within the range of the array: the message  <code class="docutils literal notranslate"><span class="pre">jwe1601i-w</span></code>is output.</p>
<p>For details, see “Chapter 8 Debugging Functions” in the “C User’s Guide”.</p>
<p>The following is an example of the message displayed by the created sample program which matched to  <code class="docutils literal notranslate"><span class="pre">-Nquickdbg=subchk</span></code> option. (The sample program is easy to understand to give a message)</p>
<ol class="arabic simple">
<li><p>Sample program</p></li>
</ol>
<blockquote>
<div><div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="w"> </span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;stdio.h&gt;</span>
<span class="linenos">2</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="nf">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="linenos">3</span><span class="w">   </span><span class="kt">int</span><span class="w"> </span><span class="n">data</span><span class="p">[</span><span class="mi">3</span><span class="p">];</span>
<span class="linenos">4</span><span class="w">   </span><span class="kt">int</span><span class="w"> </span><span class="n">p</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">5</span><span class="p">;</span>
<span class="linenos">5</span><span class="w">   </span><span class="n">data</span><span class="p">[</span><span class="n">p</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">20</span><span class="p">;</span><span class="w">       </span><span class="cm">/* ← Detect jwe160i-w */</span>
<span class="linenos">6</span><span class="w"> </span><span class="p">}</span>
</pre></div>
</div>
</div></blockquote>
<ol class="arabic simple" start="2">
<li><p>Compiling</p></li>
</ol>
<blockquote>
<div><div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">[_LNlogin]$ </span>fccpx<span class="w"> </span>-Kfast<span class="w"> </span>-Nquickdbg<span class="o">=</span>subchk<span class="w"> </span>-o<span class="w"> </span>sample<span class="w"> </span>sample.c
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>When compiling, a warning that the variable is unused is output, but ignore it here.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>&quot;sample.c&quot;, line 3: warning: variable &quot;data&quot; was set but never used
int data[3];
</pre></div>
</div>
</div>
</div></blockquote>
<ol class="arabic" start="3">
<li><p>Execution result</p>
<p>After execution, the following message is output to the standard error output.</p>
</li>
</ol>
<blockquote>
<div><div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">jwe1601i-w line 5 The outside of the range the array (data) was declared is used (offset:20, declared size:12).</span>
<span class="go"> error occurs at main     line 5 loc 0000000000400b18 offset 0000000000000024</span>
<span class="go"> main         at loc 0000000000400af4 called from o.s.</span>
<span class="go">taken to (standard) corrective action, execution continuing.</span>
</pre></div>
</div>
</div></blockquote>
</div></blockquote>
</section>
</section>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <div>
    <h3><a href="../../../index.html">Table of Contents</a></h3>
    <ul>
<li><a class="reference internal" href="#">3.1.8.3. trad mode</a><ul>
<li><a class="reference internal" href="#how-to-compile">3.1.8.3.1. How to compile</a></li>
<li><a class="reference internal" href="#compilation-option">3.1.8.3.2. Compilation option</a></li>
<li><a class="reference internal" href="#recommended-compiling-option">3.1.8.3.3. Recommended compiling option</a></li>
<li><a class="reference internal" href="#environment-variable-option-specification">3.1.8.3.4. Environment variable (option specification)</a></li>
<li><a class="reference internal" href="#c-library-for-parallel-processing">3.1.8.3.5. C library for parallel processing</a></li>
<li><a class="reference internal" href="#compilation-example">3.1.8.3.6. Compilation example</a></li>
<li><a class="reference internal" href="#c-sample-program">3.1.8.3.7. C sample program</a></li>
<li><a class="reference internal" href="#built-in-debug-function">3.1.8.3.8. Built-in debug function</a></li>
</ul>
</li>
</ul>

  </div>
  <div>
    <h4>Previous topic</h4>
    <p class="topless"><a href="modeTradAndClangC.html"
                          title="previous chapter"><span class="section-number">3.1.8.2. </span>Compiler mode</a></p>
  </div>
  <div>
    <h4>Next topic</h4>
    <p class="topless"><a href="CSampleProgram%28sequential%29.html"
                          title="next chapter"><span class="section-number">3.1.8.3.7.1. </span>Sequential execution</a></p>
  </div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>document.getElementById('searchbox').style.display = "block"</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="CSampleProgram%28sequential%29.html" title="3.1.8.3.7.1. Sequential execution"
             >next</a></li>
        <li class="right" >
          <a href="modeTradAndClangC.html" title="3.1.8.2. Compiler mode"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../../index.html">Supercomputer Fugaku User Guide －Language and development environment－  documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../../index.html" ><span class="section-number">3. </span>Compilers that generate binaries for compute nodes</a> &#187;</li>
          <li class="nav-item nav-item-2"><a href="../index.html" ><span class="section-number">3.1. </span>Fujitsu compiler</a> &#187;</li>
          <li class="nav-item nav-item-3"><a href="index.html" ><span class="section-number">3.1.8. </span>C language</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href=""><span class="section-number">3.1.8.3. </span>trad mode</a></li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2026, RIKEN Center for Computational Science.
    &nbsp;&nbsp;<a href="https://www.fugaku.r-ccs.riken.jp/en/">Fugaku website Top</a>
    </div>
  </body>
</html>