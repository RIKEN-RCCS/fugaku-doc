

<!doctype html>

<html lang="en" data-content_root="../../../">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>3.1.11.4. CPU Performance Analysis Report &#8212; Supercomputer Fugaku User Guide －Language and development environment－  documentation</title>
    <link rel="stylesheet" type="text/css" href="../../../_static/pygments.css?v=649a27d8" />
    <link rel="stylesheet" type="text/css" href="../../../_static/bizstyle.css?v=532c1bf3" />
    <link rel="stylesheet" type="text/css" href="../../../_static/custom.css?v=f85107c5" />
    
    <script src="../../../_static/documentation_options.js?v=5929fcd5"></script>
    <script src="../../../_static/doctools.js?v=888ff710"></script>
    <script src="../../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../../../_static/bizstyle.js"></script>
    <link rel="search" title="Search" href="../../../search.html" />
    <link rel="next" title="3.1.11.5. Notes" href="ImportantPoints.html" />
    <link rel="prev" title="3.1.11.3. Instant Performance Profiler" href="InstantProfiler.html" />
    <meta name="viewport" content="width=device-width,initial-scale=1.0" />
    <!--[if lt IE 9]>
    <script src="_static/css3-mediaqueries.js"></script>
    <![endif]-->
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="ImportantPoints.html" title="3.1.11.5. Notes"
             accesskey="N">next</a></li>
        <li class="right" >
          <a href="InstantProfiler.html" title="3.1.11.3. Instant Performance Profiler"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../../index.html">Supercomputer Fugaku User Guide －Language and development environment－  documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../../index.html" ><span class="section-number">3. </span>Compilers that generate binaries for compute nodes</a> &#187;</li>
          <li class="nav-item nav-item-2"><a href="../index.html" ><span class="section-number">3.1. </span>Fujitsu compiler</a> &#187;</li>
          <li class="nav-item nav-item-3"><a href="index.html" accesskey="U"><span class="section-number">3.1.11. </span>Profiler</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href=""><span class="section-number">3.1.11.4. </span>CPU Performance Analysis Report</a></li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <section id="cpu-performance-analysis-report">
<h1><span class="section-number">3.1.11.4. </span>CPU Performance Analysis Report<a class="headerlink" href="#cpu-performance-analysis-report" title="Link to this heading">¶</a></h1>
<p>The CPU Performance Analysis Report aggregates a large amount of CPU performance analysis information measured by multiple executions and visualizes it using tables and accompanying graphs.</p>
<section id="overview">
<h2><span class="section-number">3.1.11.4.1. </span>Overview<a class="headerlink" href="#overview" title="Link to this heading">¶</a></h2>
<p>The CPU Performance Analysis Report is designed to fit on a single A3 size when printing, and the following three reports are prepared depending on the type and granularity of information to be displayed.</p>
<ul class="simple">
<li><p>Unit report</p></li>
<li><p>Brief Report</p></li>
<li><p>Standard Report</p></li>
<li><p>Detail Report</p></li>
</ul>
<p>The procedure for creating a CPU Performance Analysis Report is as follows.</p>
<figure class="align-default">
<img alt="../../../_images/CPUPerformanceAnalysisReport_01.png" src="../../../_images/CPUPerformanceAnalysisReport_01.png" />
</figure>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p>Use a Advanced Performance Profiler to measure CPU performance analysis information.</p>
</div>
</section>
<section id="cpu-performance-analysis-report-type">
<h2><span class="section-number">3.1.11.4.2. </span>CPU Performance Analysis Report type<a class="headerlink" href="#cpu-performance-analysis-report-type" title="Link to this heading">¶</a></h2>
<p>The CPU Performance Analysis Report provides a unit report, a Brief Report, a Standard Report, and a Detail Report depending on the type and granularity of information to be displayed.
The CPU Performance Analysis Report file is in Microsoft Excel file format (.xlsm).</p>
<p>Each report overview is as following.</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 20.0%" />
<col style="width: 80.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Report type</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Unit report</p></td>
<td><div class="line-block">
<div class="line">This is the CPU performance analysis report that requires the least number of measurements to create.</div>
<div class="line">Outputs rough information about execution time, computing performance, memory throughput, and number of instructions.</div>
<div class="line">When using a single report, perform measurement using the detailed profiler once.</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><p>Brief Report</p></td>
<td><div class="line-block">
<div class="line">This is a CPU Performance Analysis Report that requires the least number of measurements.</div>
<div class="line">If you want to use the CPU Performance Analysis Report easily, we recommend the Brief Report. The amount of information is less than that of the Standard Report, but the number of measurements required to create the report can be reduced compared to the Standard Report.</div>
<div class="line">When using a Brief Report, perform measurement with the Advanced Performance Profiler five times.</div>
</div>
</td>
</tr>
<tr class="row-even"><td><p>Standard Report</p></td>
<td><div class="line-block">
<div class="line">This is a standard CPU Performance Analysis Report. Standard Reports are recommended for normal use.</div>
<div class="line">When using a Standard Report, perform measurement with the Advanced Performance Profiler 11 times.</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><p>Detail Report</p></td>
<td><div class="line-block">
<div class="line">This is the most detailed CPU Performance Analysis Report.</div>
<div class="line">If there is a shortage of information in the Standard Report, a Detail Report is recommended. Although the number of times of measurement for creating a report is the highest, all information of the CPU Performance Analysis Report is displayed.</div>
<div class="line">When displaying a Detail Report, perform measurement with the Advanced Performance Profiler 17 times.</div>
</div>
</td>
</tr>
</tbody>
</table>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p>The input file used for each report is the same. Therefore, for example, if you want to change to a Detail Report after creating a Standard Report, additional measurement is only required for the difference of 6 times.</p>
</div>
<p>A list of information that can be referenced in each CPU Performance Analysis Report is shown below.</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 21.4%" />
<col style="width: 7.1%" />
<col style="width: 7.1%" />
<col style="width: 7.1%" />
<col style="width: 7.1%" />
<col style="width: 50.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Table title</p></th>
<th class="head"><p>Unit</p></th>
<th class="head"><p>Brief</p></th>
<th class="head"><p>Standard</p></th>
<th class="head"><p>Detail</p></th>
<th class="head"><p>Table overview</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Information</p></td>
<td><p>all</p></td>
<td><p>all</p></td>
<td><p>all</p></td>
<td><p>all</p></td>
<td><p>Displays measurement environment information and user-specified information.</p></td>
</tr>
<tr class="row-odd"><td><p>Statistics</p></td>
<td><p>some</p></td>
<td><p>all</p></td>
<td><p>all</p></td>
<td><p>all</p></td>
<td><div class="line-block">
<div class="line">[Unit]</div>
<div class="line-block">
<div class="line">Displays information related to the CPU operation status, such as memory throughput, number of instructions, and number of operations.</div>
</div>
<div class="line">[Brief, Standard, Detail]</div>
<div class="line-block">
<div class="line">In addition to the content of a single report, the ratio of active elements in floating-point calculations is displayed.</div>
</div>
</div>
</td>
</tr>
<tr class="row-even"><td><p>Cycle Accounting</p></td>
<td><p>-</p></td>
<td><p>some</p></td>
<td><p>all</p></td>
<td><p>all</p></td>
<td><p>Display program execution time detail.</p>
<dl class="simple">
<dt>[Brief]</dt><dd><p>The program execution time is classified into nine types and displayed.</p>
</dd>
<dt>[Standard / Detail]</dt><dd><p>The program execution time is classified into 20 types and displayed.</p>
</dd>
</dl>
</td>
</tr>
<tr class="row-odd"><td><p>Busy</p></td>
<td><p>-</p></td>
<td><p>some</p></td>
<td><p>all</p></td>
<td><p>all</p></td>
<td><p>Displays information about the program’s memory cache and arithmetic pipeline busy rate.</p>
<dl class="simple">
<dt>[Brief]</dt><dd><p>Displays the busy rate of the primary cache, secondary cache, memory, floating point pipeline, etc., and the occurrence rate of SFI (Store Fetch Interlock).</p>
</dd>
<dt>[Standard]</dt><dd><p>In addition to the contents of the Brief Report, the busy rate of the integer calculation pipeline, the calculation pipeline for address calculation, and the calculation pipeline for predicate calculation is displayed.</p>
</dd>
<dt>[Detail]</dt><dd><p>In adition to the contents of the Standard Report, displays the ratio of active elements in the L1 pipeline.</p>
</dd>
</dl>
</td>
</tr>
<tr class="row-even"><td><p>Cache</p></td>
<td><p>-</p></td>
<td><p>some</p></td>
<td><p>all</p></td>
<td><p>all</p></td>
<td><p>Display information about cash miss.</p>
<dl class="simple">
<dt>[Brief]</dt><dd><p>For Brief Reports, the number of cache misses in the primary data cache and secondary cache, and the ratio to the number of load / store instructions are displayed.</p>
</dd>
<dt>[Standard / Detail]</dt><dd><p>For Standard Reports or Detail Reports, add a breakdown of the number of cache misses in addition to the contents of the Brief Report.</p>
</dd>
</dl>
</td>
</tr>
<tr class="row-odd"><td><p>Instruction</p></td>
<td><p>-</p></td>
<td><p>some</p></td>
<td><p>some</p></td>
<td><p>all</p></td>
<td><p>Display information about instruction mix.</p>
<dl class="simple">
<dt>[Brief]</dt><dd><p>Information on instruction mix is classified into 9 types and displayed.</p>
</dd>
<dt>[Standard]</dt><dd><p>Information on instruction mix is classified into 25 types and displayed.</p>
</dd>
<dt>[Detail]</dt><dd><p>Information on instruction mix is classified into 26 types and displayed.</p>
</dd>
</dl>
</td>
</tr>
<tr class="row-even"><td><p>FLOPS</p></td>
<td><p>-</p></td>
<td><p>some</p></td>
<td><p>all</p></td>
<td><p>all</p></td>
<td><p>Displays information about floating point operations.</p>
<dl class="simple">
<dt>[Brief]</dt><dd><p>Displays the floating-point performance including the active element ratio and active element ratio.</p>
</dd>
<dt>[Standard / Detail]</dt><dd><p>In addition to the contents of the Brief Report, the ratio of each precision floating point number is displayed.</p>
</dd>
</dl>
</td>
</tr>
<tr class="row-odd"><td><p>Extra</p></td>
<td><p>-</p></td>
<td><p>-</p></td>
<td><p>-</p></td>
<td><p>all</p></td>
<td><p>Multiple information such as the number of Fill instructions, the number of Spill instructions, and the breakdown of gather instructions are displayed.</p></td>
</tr>
<tr class="row-even"><td><p>Hardware Prefetch Rate (%) (/HardwarePrefetch)</p></td>
<td><p>-</p></td>
<td><p>-</p></td>
<td><p>-</p></td>
<td><p>all</p></td>
<td><p>Display hardware application fetch detail.</p></td>
</tr>
<tr class="row-odd"><td><p>Data Transfer CMGs</p></td>
<td><p>-</p></td>
<td><p>-</p></td>
<td><p>-</p></td>
<td><p>all</p></td>
<td><p>Displays throughput information between all CMGs, memory, Tofu, and PCI for the CMG specified by the user.</p></td>
</tr>
<tr class="row-even"><td><p>Power Consumption (W)</p></td>
<td><p>-</p></td>
<td><p>-</p></td>
<td><p>all</p></td>
<td><p>all</p></td>
<td><p>Displays the power consumption of the core, L2 cache, and memory.</p></td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The abbreviations and explanations of headings and symbols in the table are as follows.</p>
<ul class="simple">
<li><p>Unit : Unit Report</p></li>
<li><p>Brief : Brief Report</p></li>
<li><p>Standard : Standard Report</p></li>
<li><p>Detail : Detail Report</p></li>
<li><p>all : All information will be output</p></li>
<li><p>some : Some information will be output</p></li>
<li><p>- : Information won’t be output</p></li>
</ul>
</div>
</section>
<section id="addition-of-measurement-interval-specification-routine">
<h2><span class="section-number">3.1.11.4.3. </span>Addition of measurement interval specification routine<a class="headerlink" href="#addition-of-measurement-interval-specification-routine" title="Link to this heading">¶</a></h2>
<div class="line-block">
<div class="line">Adds measurement interval specification routines / functions necessary for specifying the interval for measuring profile data to the source code.</div>
<div class="line">The measurement interval specification function can be used as a Fortran language subroutine or C/C++ function.</div>
<div class="line">When using C/C++ functions, you must declare the function prototype or include the header file of the profiler subroutine.</div>
</div>
<blockquote>
<div><table class="docutils align-default">
<colgroup>
<col style="width: 7.7%" />
<col style="width: 15.4%" />
<col style="width: 23.1%" />
<col style="width: 23.1%" />
<col style="width: 30.8%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Language type</p></th>
<th class="head"><p>Header file</p></th>
<th class="head"><p>Subroutine / Function name</p></th>
<th class="head"><p>Argument</p></th>
<th class="head"><p>Function</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Fortran</p></td>
<td><p>None</p></td>
<td><div class="line-block">
<div class="line">fapp_start</div>
<div class="line">fapp_stop</div>
</div>
</td>
<td><p>(name, number, level)</p></td>
<td><div class="line-block">
<div class="line">Start measuring information</div>
<div class="line">End measuring information</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><p>C/C++</p></td>
<td><p>fj_tool/fapp.h</p></td>
<td><div class="line-block">
<div class="line">void fapp_start</div>
<div class="line">void fapp_stop</div>
</div>
</td>
<td><p>(const char *name, int number, int level)</p></td>
<td><div class="line-block">
<div class="line">Start measuring information</div>
<div class="line">End measuring information</div>
</div>
</td>
</tr>
</tbody>
</table>
<p>[Argument details]</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 20.0%" />
<col style="width: 80.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Argument</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>name</p></td>
<td><p>Group name (basic character scalar). A group name consists of letters, numbers, and underscores. Other characters cannot be used.</p></td>
</tr>
<tr class="row-odd"><td><p>number</p></td>
<td><p>Detail number (4-byte integer type)</p></td>
</tr>
<tr class="row-even"><td><p>level</p></td>
<td><p>Priority level (4 byte integer type and integer greater than or equal to 0)</p></td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The group name and detail number are used to distinguish them as measurement range names. If the priority level is higher than <strong class="program">fapp</strong> command’s <code class="docutils literal notranslate"><span class="pre">-L</span></code> option, do not proceed measurement.</p>
</div>
<div class="admonition attention">
<p class="admonition-title">Attention</p>
<ul class="simple">
<li><p>When calling subroutines / functions with the same measurement section name multiple times, be sure to call them in the order fapp_start and fapp_stop. If fapp_start is called again before calling fapp_stop, or if fapp_stop is called before calling fapp_start, a warning message is output and the call is ignored.</p></li>
<li><p>If the measurement section names are different, there is no problem if fapp_start or fapp_stop continues.</p></li>
<li><p>If the process ends without calling fapp_stop, the profile data for that section is not measured.</p></li>
<li><p>If the measurement for the same measurement section name is performed multiple times, all the measurement results are added.</p></li>
<li><p>Specify the same value for the argument level for fapp_start and fapp_stop. If you specify a different value, depending on specification of <strong class="program">fapp</strong> command’s  <code class="docutils literal notranslate"><span class="pre">-L</span></code>  option , unintended results may occur.</p></li>
<li><p>If specify “all” to argument <code class="docutils literal notranslate"><span class="pre">name</span></code> and 0 to <code class="docutils literal notranslate"><span class="pre">number</span></code>,it covers the entire program.</p></li>
<li><p>In the case of an MPI program, call a subroutine / function with the same measurement section name in all processes to be measured. Profile data for processes that have not been called is not counted.</p></li>
</ul>
</div>
</div></blockquote>
<p>An example of using the measurement interval specification routine is shown below.</p>
<ul>
<li><p>Fortran example</p>
<ol class="arabic simple">
<li><p>Sample specification example</p></li>
</ol>
<blockquote>
<div><div class="highlight-fortran notranslate"><div class="highlight"><pre><span></span><span class="k">program </span><span class="n">main</span>
<span class="p">...</span>
<span class="k">call </span><span class="n">fapp_start</span><span class="p">(</span><span class="s2">&quot;foo&quot;</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span><span class="w">         </span><span class="c">! Start measurement of measurement section name &quot;foo1&quot;</span>
<span class="k">do </span><span class="n">i</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span><span class="mi">10000</span>
<span class="w">  </span><span class="p">...</span>
<span class="w">  </span><span class="k">call </span><span class="n">fapp_start</span><span class="p">(</span><span class="s2">&quot;bar&quot;</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span><span class="w">       </span><span class="c">! Start measurement of measurement section name &quot;foo1&quot;</span>
<span class="w">  </span><span class="k">do </span><span class="n">j</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span><span class="mi">10000</span>
<span class="w">   </span><span class="p">...</span>
<span class="w">  </span><span class="k">end do</span>
<span class="k">  call </span><span class="n">fapp_stop</span><span class="p">(</span><span class="s2">&quot;bar&quot;</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span><span class="w">        </span><span class="c">! End measurement of measurement section name &quot;bar1&quot;</span>
<span class="k">end do</span>
<span class="k">call </span><span class="n">fapp_stop</span><span class="p">(</span><span class="s2">&quot;foo&quot;</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span><span class="w">          </span><span class="c">! End measurement of measurement section name &quot;foo1&quot;</span>
<span class="k">end program </span><span class="n">main</span>
</pre></div>
</div>
</div></blockquote>
<ol class="arabic simple" start="2">
<li><p>Example of measuring all processes (measurement starts before calling the mpi_init subroutine)</p></li>
</ol>
<blockquote>
<div><div class="highlight-fortran notranslate"><div class="highlight"><pre><span></span><span class="k">call </span><span class="n">fapp_start</span><span class="p">(</span><span class="s2">&quot;foo&quot;</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span><span class="w">         </span><span class="c">! Start measurring</span>
<span class="k">call </span><span class="n">mpi_init</span><span class="p">(</span><span class="n">err</span><span class="p">)</span>
<span class="p">...</span>
<span class="k">call </span><span class="n">mpi_finalize</span><span class="p">(</span><span class="n">err</span><span class="p">)</span>
<span class="k">call </span><span class="n">fapp_stop</span><span class="p">(</span><span class="s2">&quot;foo&quot;</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span><span class="w">          </span><span class="c">! End measurring</span>
</pre></div>
</div>
</div></blockquote>
<ol class="arabic simple" start="3">
<li><p>Example of measuring all processes (measurement starts immediately after calling the mpi_init subroutine)</p></li>
</ol>
<blockquote>
<div><div class="highlight-fortran notranslate"><div class="highlight"><pre><span></span><span class="k">call </span><span class="n">mpi_init</span><span class="p">(</span><span class="n">err</span><span class="p">)</span>
<span class="k">call </span><span class="n">fapp_start</span><span class="p">(</span><span class="s2">&quot;foo&quot;</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span><span class="w">         </span><span class="c">! Start measurring</span>
<span class="p">...</span>
<span class="k">call </span><span class="n">fapp_stop</span><span class="p">(</span><span class="s2">&quot;foo&quot;</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span><span class="w">          </span><span class="c">! End measurring</span>
<span class="k">call </span><span class="n">mpi_finalize</span><span class="p">(</span><span class="n">err</span><span class="p">)</span>
</pre></div>
</div>
</div></blockquote>
<ol class="arabic simple" start="4">
<li><p>Example of measuring only process 0</p></li>
</ol>
<blockquote>
<div><div class="highlight-fortran notranslate"><div class="highlight"><pre><span></span><span class="k">call </span><span class="n">mpi_init</span><span class="p">(</span><span class="n">err</span><span class="p">)</span>
<span class="k">call </span><span class="n">mpi_comm_rank</span><span class="p">(</span><span class="n">mpi_comm_world</span><span class="p">,</span><span class="n">rank</span><span class="p">,</span><span class="n">err</span><span class="p">)</span>
<span class="k">if</span><span class="p">(</span><span class="n">rank</span><span class="o">==</span><span class="mi">0</span><span class="p">)</span><span class="w"> </span><span class="k">then</span>
<span class="k">  call </span><span class="n">fapp_start</span><span class="p">(</span><span class="s2">&quot;foo&quot;</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span><span class="w">       </span><span class="c">! Only process 0, start measurring</span>
<span class="k">end if</span>
<span class="w">  </span><span class="p">...</span>
<span class="k">if</span><span class="p">(</span><span class="n">rank</span><span class="o">==</span><span class="mi">0</span><span class="p">)</span><span class="w"> </span><span class="k">then</span>
<span class="k">  call </span><span class="n">fapp_stop</span><span class="p">(</span><span class="s2">&quot;foo&quot;</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span><span class="w">        </span><span class="c">! Only process 0, end measurring</span>
<span class="k">end if</span>
<span class="k">call </span><span class="n">mpi_finalize</span><span class="p">(</span><span class="n">err</span><span class="p">)</span>
</pre></div>
</div>
</div></blockquote>
</li>
<li><p>C/C++ example</p>
<ol class="arabic simple">
<li><p>Sample specification example</p></li>
</ol>
<blockquote>
<div><div class="highlight-C notranslate"><div class="highlight"><pre><span></span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&quot;fj_tool/fapp.h&quot;</span><span class="c1">          // Include header file</span>
<span class="p">...</span>
<span class="kt">int</span><span class="w"> </span><span class="n">main</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span>
<span class="p">{</span>
<span class="w">  </span><span class="kt">int</span><span class="w"> </span><span class="n">i</span><span class="p">,</span><span class="n">j</span><span class="p">;</span>
<span class="w">  </span><span class="n">fapp_start</span><span class="p">(</span><span class="s">&quot;foo&quot;</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">);</span><span class="w">           </span><span class="c1">// Start measuring the measurement section name &quot;foo1&quot;</span>
<span class="w">  </span><span class="k">for</span><span class="p">(</span><span class="n">i</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span><span class="n">i</span><span class="o">&lt;</span><span class="mi">10000</span><span class="p">;</span><span class="n">i</span><span class="o">++</span><span class="p">){</span>
<span class="w">    </span><span class="p">...</span>
<span class="w">    </span><span class="n">fapp_start</span><span class="p">(</span><span class="s">&quot;bar&quot;</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">);</span><span class="w">         </span><span class="c1">// Start measuring the measurement section name &quot;bar1&quot;</span>
<span class="w">    </span><span class="k">for</span><span class="p">(</span><span class="n">j</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span><span class="n">j</span><span class="o">&lt;</span><span class="mi">10000</span><span class="p">;</span><span class="n">j</span><span class="o">++</span><span class="p">){</span>
<span class="w">       </span><span class="p">...</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="n">fapp_stop</span><span class="p">(</span><span class="s">&quot;bar&quot;</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">);</span><span class="w">          </span><span class="c1">// End measuring the measurement section name &quot;bar1&quot;</span>
<span class="w">  </span><span class="p">}</span>
<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="w">  </span><span class="n">fapp_stop</span><span class="p">(</span><span class="s">&quot;foo&quot;</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">);</span><span class="w">            </span><span class="c1">// End measuring the measurement section name &quot;foo1&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
</div></blockquote>
<ol class="arabic simple" start="2">
<li><p>Example of measuring all processes (start measurement before calling the MPI_Init function)</p></li>
</ol>
<blockquote>
<div><div class="highlight-C notranslate"><div class="highlight"><pre><span></span><span class="n">fapp_start</span><span class="p">(</span><span class="s">&quot;foo&quot;</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">);</span><span class="w">             </span><span class="c1">// Start measurring</span>
<span class="n">MPI_Init</span><span class="p">(</span><span class="o">&amp;</span><span class="n">argc</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">argv</span><span class="p">);</span>
<span class="p">...</span>
<span class="n">MPI_Finalize</span><span class="p">();</span>
<span class="n">fapp_stop</span><span class="p">(</span><span class="s">&quot;foo&quot;</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">);</span><span class="w">              </span><span class="c1">// End measurring</span>
</pre></div>
</div>
</div></blockquote>
<ol class="arabic simple" start="3">
<li><p>Example of measuring all processes (measurement starts immediately after calling the MPI_Init function)</p></li>
</ol>
<blockquote>
<div><div class="highlight-C notranslate"><div class="highlight"><pre><span></span><span class="n">MPI_Init</span><span class="p">(</span><span class="o">&amp;</span><span class="n">argc</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">argv</span><span class="p">);</span>
<span class="n">fapp_start</span><span class="p">(</span><span class="s">&quot;foo&quot;</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">);</span><span class="w">             </span><span class="c1">// Start measurring</span>
<span class="p">...</span>
<span class="n">fapp_stop</span><span class="p">(</span><span class="s">&quot;foo&quot;</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">);</span><span class="w">              </span><span class="c1">// End measurring</span>
<span class="n">MPI_Finalize</span><span class="p">();</span>
</pre></div>
</div>
</div></blockquote>
<ol class="arabic simple" start="4">
<li><p>Example of measuring only process 0</p></li>
</ol>
<blockquote>
<div><div class="highlight-C notranslate"><div class="highlight"><pre><span></span><span class="n">MPI_Init</span><span class="p">(</span><span class="o">&amp;</span><span class="n">argc</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">argv</span><span class="p">);</span>
<span class="n">MPI_Comm_rank</span><span class="p">(</span><span class="n">MPI_COMM_WORLD</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">rank</span><span class="p">);</span>
<span class="k">if</span><span class="p">(</span><span class="n">rank</span><span class="o">==</span><span class="mi">0</span><span class="p">){</span>
<span class="w">  </span><span class="n">fapp_start</span><span class="p">(</span><span class="s">&quot;foo&quot;</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">);</span><span class="w">           </span><span class="c1">// Only process 0, start measurring</span>
<span class="p">}</span>
<span class="p">...</span>
<span class="k">if</span><span class="p">(</span><span class="n">rank</span><span class="o">==</span><span class="mi">0</span><span class="p">){</span>
<span class="w">  </span><span class="n">fapp_stop</span><span class="p">(</span><span class="s">&quot;foo&quot;</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">);</span><span class="w">            </span><span class="c1">// Only process 0, end measurring</span>
<span class="p">}</span>
<span class="n">MPI_Finalize</span><span class="p">();</span>
</pre></div>
</div>
</div></blockquote>
</li>
</ul>
</section>
<section id="compiling-linking">
<h2><span class="section-number">3.1.11.4.4. </span>Compiling / Linking<a class="headerlink" href="#compiling-linking" title="Link to this heading">¶</a></h2>
<p>The CPU Performance Analysis Report output function compiles and links in the same way as the Advanced Performance Profiler translation procedure.</p>
<div class="line-block">
<div class="line">The tool library required to use the Instant Performance Profiler function is linked by default when compiling / linking.</div>
<div class="line">Therefore, there is no need to specify special options as in the following example.</div>
<div class="line">Compile / link is done at the login node or the compute node.</div>
</div>
<ul class="simple">
<li><p>Compile / link example (MPI program)</p></li>
</ul>
<blockquote>
<div><div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">[_LNlogin]$ </span>mpifrtpx<span class="w">  </span>-Kfast,parallel<span class="w">  </span><span class="s2">&quot;Source file name&quot;</span>
</pre></div>
</div>
</div></blockquote>
<ul class="simple">
<li><p>Compile / link example (sequential / thread parallel program)</p></li>
</ul>
<blockquote>
<div><div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">[_LNlogin]$ </span>$<span class="w"> </span>frtpx<span class="w">  </span>-Kfast,parallel<span class="w">  </span><span class="s2">&quot;Source file name&quot;</span>
</pre></div>
</div>
<div class="admonition attention">
<p class="admonition-title">Attention</p>
<p>When split compilation is performed, the optimization options specified at compile time should also be specified at link time so that the library of the appropriate profiler is linked.</p>
<p>For programs using OpenMP, specify <code class="docutils literal notranslate"><span class="pre">-Kopenmp</span></code> option when linking.</p>
</div>
</div></blockquote>
<section id="about-fortran-translation-options">
<h3><span class="section-number">3.1.11.4.4.1. </span>About Fortran translation options<a class="headerlink" href="#about-fortran-translation-options" title="Link to this heading">¶</a></h3>
<div class="line-block">
<div class="line">The following are the translation options for the profiler used when translating Fortran programs.</div>
<div class="line">This option is enabled when linking.</div>
</div>
<blockquote>
<div><table class="docutils align-default">
<colgroup>
<col style="width: 40.0%" />
<col style="width: 60.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Option</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>-Nfjprof</p></td>
<td><div class="line-block">
<div class="line">Combine tool library.</div>
<div class="line">When omitted, <code class="docutils literal notranslate"><span class="pre">-Nfjprof</span></code> is enabled.</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><p>-Nnofjprof</p></td>
<td><div class="line-block">
<div class="line">Do not combine tool library.</div>
<div class="line">Cannot use profiler.</div>
</div>
</td>
</tr>
</tbody>
</table>
</div></blockquote>
</section>
<section id="about-c-c-translation-options">
<h3><span class="section-number">3.1.11.4.4.2. </span>About C/C++ translation options<a class="headerlink" href="#about-c-c-translation-options" title="Link to this heading">¶</a></h3>
<div class="line-block">
<div class="line">For the C/C++ language, there are two types of compilation modes: trad mode and clang mode.</div>
<div class="line">The translation options for the profiler used when translating programs in each mode are listed below.</div>
<div class="line">This option is enabled when linking.</div>
</div>
<blockquote>
<div><table class="docutils align-default">
<colgroup>
<col style="width: 14.3%" />
<col style="width: 28.6%" />
<col style="width: 57.1%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Mode</p></th>
<th class="head"><p>Option</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>trad</p></td>
<td><p>-Nfjprof</p></td>
<td><div class="line-block">
<div class="line">Combine tool library.</div>
<div class="line">When omitted  <code class="docutils literal notranslate"><span class="pre">-Nfjprof</span></code> is enabled.</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><p>trad</p></td>
<td><p>-Nnofjprof</p></td>
<td><div class="line-block">
<div class="line">Do not combine tool library.</div>
<div class="line">Cannot use profiler.</div>
</div>
</td>
</tr>
<tr class="row-even"><td><p>clang</p></td>
<td><p>-ffj-fjprof</p></td>
<td><div class="line-block">
<div class="line">Combine tool library.</div>
<div class="line">When omitted  <code class="docutils literal notranslate"><span class="pre">-ffj-fjprof</span></code> is enabled.</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><p>clang</p></td>
<td><p>-ffj-no-fjprof</p></td>
<td><div class="line-block">
<div class="line">Do not combine tool library.</div>
<div class="line">Cannot use profiler.</div>
</div>
</td>
</tr>
</tbody>
</table>
</div></blockquote>
</section>
</section>
<section id="measurement-of-profile-data">
<span id="cpuperformanceanalysisreportusageprocedure"></span><h2><span class="section-number">3.1.11.4.5. </span>Measurement of profile data<a class="headerlink" href="#measurement-of-profile-data" title="Link to this heading">¶</a></h2>
<div class="line-block">
<div class="line">Measure by using a Advanced Performance Profiler’s <strong class="program">fapp</strong> command. When measuring profile data for CPU Performance Analysis Report, specify <code class="docutils literal notranslate"><span class="pre">-Hevent</span></code> option to <strong class="program">fapp</strong> command is required.</div>
<div class="line">This operation is performed on the compute node.</div>
</div>
<p>The following shows an execution example for each report.</p>
<ul>
<li><p>Unit report</p>
<p>To create a unit report, please proceed one measurement with specifying <code class="docutils literal notranslate"><span class="pre">-Hevent=pa1</span></code>.</p>
</li>
</ul>
<blockquote>
<div><div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp"># </span>A<span class="w"> </span>measurement<span class="w"> </span>example<span class="w"> </span>when<span class="w"> </span>unit<span class="w"> </span>report<span class="w"> </span>creation
<span class="gp">$ </span>fapp<span class="w"> </span>-C<span class="w"> </span>-d<span class="w"> </span>./rep1<span class="w"> </span>-Hevent<span class="o">=</span>pa1<span class="w"> </span>./a.out
</pre></div>
</div>
</div></blockquote>
<ul>
<li><p>Brief Report</p>
<p>To create a Brief Report, perform 5 measurements specifying from <code class="docutils literal notranslate"><span class="pre">-Hevent=pa1</span></code> to  <code class="docutils literal notranslate"><span class="pre">-Hevent=pa5</span></code>.</p>
</li>
</ul>
<blockquote>
<div><div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp"># </span>Measurement<span class="w"> </span>example<span class="w"> </span>when<span class="w"> </span>creating<span class="w"> </span>a<span class="w"> </span>Brief<span class="w"> </span>Report
<span class="gp">$ </span>fapp<span class="w"> </span>-C<span class="w"> </span>-Hevent<span class="o">=</span>pa1<span class="w"> </span>-d<span class="w"> </span>./rep1<span class="w"> </span>./a.out
<span class="gp">$ </span>fapp<span class="w"> </span>-C<span class="w"> </span>-Hevent<span class="o">=</span>pa2<span class="w"> </span>-d<span class="w"> </span>./rep2<span class="w"> </span>./a.out
<span class="gp">$ </span>fapp<span class="w"> </span>-C<span class="w"> </span>-Hevent<span class="o">=</span>pa3<span class="w"> </span>-d<span class="w"> </span>./rep3<span class="w"> </span>./a.out
<span class="gp">$ </span>fapp<span class="w"> </span>-C<span class="w"> </span>-Hevent<span class="o">=</span>pa4<span class="w"> </span>-d<span class="w"> </span>./rep4<span class="w"> </span>./a.out
<span class="gp">$ </span>fapp<span class="w"> </span>-C<span class="w"> </span>-Hevent<span class="o">=</span>pa5<span class="w"> </span>-d<span class="w"> </span>./rep5<span class="w"> </span>./a.out
</pre></div>
</div>
</div></blockquote>
<ul>
<li><p>Standard Report</p>
<p>To create a Standard Report, perform 11 measurements specifying from <code class="docutils literal notranslate"><span class="pre">-Hevent=pa1</span></code> to  <code class="docutils literal notranslate"><span class="pre">-Hevent=pa11</span></code>.</p>
</li>
</ul>
<blockquote>
<div><div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp"># </span>Measurement<span class="w"> </span>example<span class="w"> </span>when<span class="w"> </span>creating<span class="w"> </span>a<span class="w"> </span>Standard<span class="w"> </span>Report
<span class="gp">$ </span>fapp<span class="w"> </span>-C<span class="w"> </span>-Hevent<span class="o">=</span>pa1<span class="w">  </span>-d<span class="w"> </span>./rep1<span class="w">  </span>./a.out
<span class="gp">$ </span>fapp<span class="w"> </span>-C<span class="w"> </span>-Hevent<span class="o">=</span>pa2<span class="w">  </span>-d<span class="w"> </span>./rep2<span class="w">  </span>./a.out
<span class="gp">$ </span>fapp<span class="w"> </span>-C<span class="w"> </span>-Hevent<span class="o">=</span>pa3<span class="w">  </span>-d<span class="w"> </span>./rep3<span class="w">  </span>./a.out
<span class="gp">$ </span>fapp<span class="w"> </span>-C<span class="w"> </span>-Hevent<span class="o">=</span>pa4<span class="w">  </span>-d<span class="w"> </span>./rep4<span class="w">  </span>./a.out
<span class="gp">$ </span>fapp<span class="w"> </span>-C<span class="w"> </span>-Hevent<span class="o">=</span>pa5<span class="w">  </span>-d<span class="w"> </span>./rep5<span class="w">  </span>./a.out
<span class="gp">$ </span>fapp<span class="w"> </span>-C<span class="w"> </span>-Hevent<span class="o">=</span>pa6<span class="w">  </span>-d<span class="w"> </span>./rep6<span class="w">  </span>./a.out
<span class="gp">$ </span>fapp<span class="w"> </span>-C<span class="w"> </span>-Hevent<span class="o">=</span>pa7<span class="w">  </span>-d<span class="w"> </span>./rep7<span class="w">  </span>./a.out
<span class="gp">$ </span>fapp<span class="w"> </span>-C<span class="w"> </span>-Hevent<span class="o">=</span>pa8<span class="w">  </span>-d<span class="w"> </span>./rep8<span class="w">  </span>./a.out
<span class="gp">$ </span>fapp<span class="w"> </span>-C<span class="w"> </span>-Hevent<span class="o">=</span>pa9<span class="w">  </span>-d<span class="w"> </span>./rep9<span class="w">  </span>./a.out
<span class="gp">$ </span>fapp<span class="w"> </span>-C<span class="w"> </span>-Hevent<span class="o">=</span>pa10<span class="w"> </span>-d<span class="w"> </span>./rep10<span class="w"> </span>./a.out
<span class="gp">$ </span>fapp<span class="w"> </span>-C<span class="w"> </span>-Hevent<span class="o">=</span>pa11<span class="w"> </span>-d<span class="w"> </span>./rep11<span class="w"> </span>./a.out
</pre></div>
</div>
</div></blockquote>
<ul>
<li><p>Detail Report</p>
<p>To create a Detail Report, perform 17 measurements specifying from <code class="docutils literal notranslate"><span class="pre">-Hevent=pa1</span></code> to <code class="docutils literal notranslate"><span class="pre">-Hevent=pa17</span></code>.</p>
</li>
</ul>
<blockquote>
<div><div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp"># </span>Measurement<span class="w"> </span>example<span class="w"> </span>when<span class="w"> </span>creating<span class="w"> </span>a<span class="w"> </span>Detail<span class="w"> </span>Report
<span class="gp">$ </span>fapp<span class="w"> </span>-C<span class="w"> </span>-Hevent<span class="o">=</span>pa1<span class="w">  </span>-d<span class="w"> </span>./rep1<span class="w">  </span>./a.out
<span class="gp">$ </span>fapp<span class="w"> </span>-C<span class="w"> </span>-Hevent<span class="o">=</span>pa2<span class="w">  </span>-d<span class="w"> </span>./rep2<span class="w">  </span>./a.out
<span class="gp">$ </span>fapp<span class="w"> </span>-C<span class="w"> </span>-Hevent<span class="o">=</span>pa3<span class="w">  </span>-d<span class="w"> </span>./rep3<span class="w">  </span>./a.out
<span class="gp">$ </span>fapp<span class="w"> </span>-C<span class="w"> </span>-Hevent<span class="o">=</span>pa4<span class="w">  </span>-d<span class="w"> </span>./rep4<span class="w">  </span>./a.out
<span class="gp">$ </span>fapp<span class="w"> </span>-C<span class="w"> </span>-Hevent<span class="o">=</span>pa5<span class="w">  </span>-d<span class="w"> </span>./rep5<span class="w">  </span>./a.out
<span class="gp">$ </span>fapp<span class="w"> </span>-C<span class="w"> </span>-Hevent<span class="o">=</span>pa6<span class="w">  </span>-d<span class="w"> </span>./rep6<span class="w">  </span>./a.out
<span class="gp">$ </span>fapp<span class="w"> </span>-C<span class="w"> </span>-Hevent<span class="o">=</span>pa7<span class="w">  </span>-d<span class="w"> </span>./rep7<span class="w">  </span>./a.out
<span class="gp">$ </span>fapp<span class="w"> </span>-C<span class="w"> </span>-Hevent<span class="o">=</span>pa8<span class="w">  </span>-d<span class="w"> </span>./rep8<span class="w">  </span>./a.out
<span class="gp">$ </span>fapp<span class="w"> </span>-C<span class="w"> </span>-Hevent<span class="o">=</span>pa9<span class="w">  </span>-d<span class="w"> </span>./rep9<span class="w">  </span>./a.out
<span class="gp">$ </span>fapp<span class="w"> </span>-C<span class="w"> </span>-Hevent<span class="o">=</span>pa10<span class="w"> </span>-d<span class="w"> </span>./rep10<span class="w"> </span>./a.out
<span class="gp">$ </span>fapp<span class="w"> </span>-C<span class="w"> </span>-Hevent<span class="o">=</span>pa11<span class="w"> </span>-d<span class="w"> </span>./rep11<span class="w"> </span>./a.out
<span class="gp">$ </span>fapp<span class="w"> </span>-C<span class="w"> </span>-Hevent<span class="o">=</span>pa12<span class="w"> </span>-d<span class="w"> </span>./rep12<span class="w"> </span>./a.out
<span class="gp">$ </span>fapp<span class="w"> </span>-C<span class="w"> </span>-Hevent<span class="o">=</span>pa13<span class="w"> </span>-d<span class="w"> </span>./rep13<span class="w"> </span>./a.out
<span class="gp">$ </span>fapp<span class="w"> </span>-C<span class="w"> </span>-Hevent<span class="o">=</span>pa14<span class="w"> </span>-d<span class="w"> </span>./rep14<span class="w"> </span>./a.out
<span class="gp">$ </span>fapp<span class="w"> </span>-C<span class="w"> </span>-Hevent<span class="o">=</span>pa15<span class="w"> </span>-d<span class="w"> </span>./rep15<span class="w"> </span>./a.out
<span class="gp">$ </span>fapp<span class="w"> </span>-C<span class="w"> </span>-Hevent<span class="o">=</span>pa16<span class="w"> </span>-d<span class="w"> </span>./rep16<span class="w"> </span>./a.out
<span class="gp">$ </span>fapp<span class="w"> </span>-C<span class="w"> </span>-Hevent<span class="o">=</span>pa17<span class="w"> </span>-d<span class="w"> </span>./rep17<span class="w"> </span>./a.out
</pre></div>
</div>
</div></blockquote>
<div class="admonition attention">
<p class="admonition-title">Attention</p>
<ul class="simple">
<li><p>Do not specify <code class="docutils literal notranslate"><span class="pre">-Inocpupa</span></code> option to <strong class="program">fapp</strong> command. If specified <code class="docutils literal notranslate"><span class="pre">-Inocpupa</span></code>, <code class="docutils literal notranslate"><span class="pre">-Hevent</span> <span class="pre">option</span></code> is unabled.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">-Hevent</span></code> option, only one of it can be specified in one measurement. If specified multiple, the last specified <code class="docutils literal notranslate"><span class="pre">-Hevent</span></code> option is enabled.</p></li>
<li><p>The order of measurement is random. For example, after specified <code class="docutils literal notranslate"><span class="pre">-Hevent=pa2</span></code> and measured, and specify <code class="docutils literal notranslate"><span class="pre">-Hevent=pa1</span></code> and measure, no matter on it.</p></li>
<li><p>The name of the CSV format file output by “<a class="reference internal" href="#cpuperformanceanalysisreportoutputprofileresults"><span class="std std-ref">Output profile result</span></a>”is determined by the measured -Hevent option. Therefore, it is recommended to name the directory that stores the measured profile data so that the specified argument can be determined.</p></li>
</ul>
</div>
</section>
<section id="profiler-option">
<h2><span class="section-number">3.1.11.4.6. </span>Profiler option<a class="headerlink" href="#profiler-option" title="Link to this heading">¶</a></h2>
<p>Here describes about  <strong class="program">fapp</strong> command option.</p>
<blockquote>
<div><table class="docutils align-default">
<colgroup>
<col style="width: 30.0%" />
<col style="width: 70.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Option</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><div class="line-block">
<div class="line">-C</div>
<div class="line">(Required option)</div>
</div>
</td>
<td><p>Specifies measurement of profile data. If this option is omitted, an error message is output and the execution of the program ends.</p></td>
</tr>
<tr class="row-odd"><td><div class="line-block">
<div class="line">-d  <em>profile_data</em></div>
<div class="line">(Required option)</div>
</div>
</td>
<td><div class="line-block">
<div class="line">Specify the directory for storing profile data. If this option is omitted, an error message is output and the execution of the program ends.</div>
<div class="line">In <code class="docutils literal notranslate"><span class="pre">profile_data</span></code>, specify the directory name for storing the profile data as a relative or absolute path. The specified directory must be new or empty.</div>
<div class="line">When analyzing a program that moves the current directory during execution, <code class="docutils literal notranslate"><span class="pre">profile_data</span></code> is specified as an absolute path.</div>
<div class="line">The Profiler creates a subdirectory for every 1000 files under <code class="docutils literal notranslate"><span class="pre">profile_data</span></code>. Therefore, even for large jobs, you only need to specify <code class="docutils literal notranslate"><span class="pre">profile_data</span></code>.</div>
</div>
</td>
</tr>
<tr class="row-even"><td><p>-H<em>item</em></p></td>
<td><div class="line-block">
<div class="line">Specify the measurement of CPU performance analysis information.</div>
<div class="line">If <code class="docutils literal notranslate"><span class="pre">-Inocpupa</span></code> option is specified, a warning message is output and this option is disabled.</div>
<div class="line"><em>item</em>:{event=<em>event</em> | event_raw=<em>event_raw</em> } [,method={fast | normal},mode={all | user}]</div>
</div>
<dl>
<dt>event=<em>event</em></dt><dd><p>Measures information used for CPU Performance Analysis Reports. Specify one of the following for <em>event</em> .</p>
<p>{ pa1 | pa2 | pa3 | pa4 | pa5 | pa6 | pa7 | pa8 | pa9 | pa10 | pa11 | pa12 | pa13 | pa14 | pa15 | pa16 | pa17 | statistics}</p>
</dd>
<dt>event_raw=<em>event_raw</em></dt><dd><p>CPU performance analysis information is measured by specifying the event number of PMU event information. <em>event_raw</em> specifies the event number corresponding to the CPU in decimal or hexadecimal notation. Up to 8 <em>event_raw</em> can be specified by separating them with a comma (,).</p>
</dd>
<dt>method=fast</dt><dd><p>Specify the measurement method for CPU performance analysis information. When this suboption is specified, high-precision CPU performance analysis information is measured by a method that directly measures hardware information.</p>
</dd>
<dt>method=normal</dt><dd><p>Specify the measurement method for CPU performance analysis information. When this suboption is specified, CPU performance analysis information is measured by the method of measuring via the OS. When omitted, it will be <code class="docutils literal notranslate"><span class="pre">method=normal</span></code>.</p>
</dd>
<dt>mode=all</dt><dd><p>Specify the measurement mode for CPU performance analysis information. When this suboption is specified, performance is measured in kernel mode and user mode.</p>
</dd>
<dt>mode=user</dt><dd><p>Specify the measurement mode for CPU performance analysis information. When this suboption is specified, performance measurement is performed in user mode.</p>
</dd>
</dl>
</td>
</tr>
<tr class="row-odd"><td><div class="line-block">
<div class="line">-I<em>item</em></div>
<div class="line">(Hyphen + capital letter I)</div>
</div>
</td>
<td><div class="line-block">
<div class="line">Specify the items to be measured by the Advanced Performance Profiler. If specify with multiple  <em>item</em>, devide with comma.</div>
<div class="line"><em>item</em> :{{<code class="docutils literal notranslate"><span class="pre">cpupa</span></code> | <code class="docutils literal notranslate"><span class="pre">nocpupa</span></code>} | {<code class="docutils literal notranslate"><span class="pre">mpi</span></code> | <code class="docutils literal notranslate"><span class="pre">nompi</span></code>}}</div>
</div>
<div class="line-block">
<div class="line">Operation when this option is omitted depends on the item to be measured.</div>
<div class="line">For CPU performance characteristics measurement, if <code class="docutils literal notranslate"><span class="pre">-H</span></code> option is specified, <code class="docutils literal notranslate"><span class="pre">-Icpupa</span></code> is enabled, if <code class="docutils literal notranslate"><span class="pre">-H</span></code> option is not specified, <code class="docutils literal notranslate"><span class="pre">-Inocpupa</span></code> is enabled.</div>
<div class="line">For MPI Cost information measurement, if target is MPI program, <code class="docutils literal notranslate"><span class="pre">mpi</span></code> is enabled, if target is unti MPI program, <code class="docutils literal notranslate"><span class="pre">nompi</span></code> is enabled.</div>
</div>
<dl class="simple">
<dt>cpupa:</dt><dd><p>Measures the CPU performance characteristics.</p>
</dd>
<dt>nocpupa:</dt><dd><p>Do not measures the CPU performance characteristics.</p>
</dd>
<dt>mpi:</dt><dd><p>Measures MPI Cost information.</p>
</dd>
<dt>nompi:</dt><dd><p>Does not measures MPI Cost information.</p>
</dd>
</dl>
</td>
</tr>
<tr class="row-even"><td><p>-L <em>level</em></p></td>
<td><div class="line-block">
<div class="line">Specify the start level of the measurement target.</div>
<div class="line">For level, specify an integer value in the range of 0 to 2,147,483,647. This option has meaning for the third argument level of the measurement section specification routine. “level”&gt; = “Only the section of the third argument level” of the measurement section specification routine is enabled as a measurement target.</div>
<div class="line">When this option is omitted, <code class="docutils literal notranslate"><span class="pre">-L</span> <span class="pre">0</span></code> is enabled.</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><p>exec-file [ exec_option … ]</p></td>
<td><p>Specify the executable file and options for profile data measurement. For MPI programs, specify from   <strong class="program">mpiexec</strong>.</p></td>
</tr>
</tbody>
</table>
</div></blockquote>
</section>
<section id="output-profile-result">
<span id="cpuperformanceanalysisreportoutputprofileresults"></span><h2><span class="section-number">3.1.11.4.7. </span>Output profile result<a class="headerlink" href="#output-profile-result" title="Link to this heading">¶</a></h2>
<div class="line-block">
<div class="line">Outputs CSV format file used for CPU Performance Analysis Report by using a Advanced Performance Profiler  <code class="docutils literal notranslate"><span class="pre">fapppx</span></code> command. When outputting a CSV format file that is input to the CPU Performance Analysis Report, specify <code class="docutils literal notranslate"><span class="pre">-tcsv</span></code> option to <code class="docutils literal notranslate"><span class="pre">fapppx</span></code> command.</div>
</div>
<div class="line-block">
<div class="line">The following shows an execution example for each report.</div>
<div class="line">Also please refer to “<a class="reference internal" href="AdvancedProfiler.html#advancedprofileroutputprofileresults"><span class="std std-ref">Output profile result</span></a>” and “<a class="reference internal" href="#cpuperformanceanalysisreportusageprocedure"><span class="std std-ref">Measurement of profile data</span></a>” for input profile data.</div>
</div>
<ul>
<li><p>Unit report</p>
<p>To create a unit report, please output <code class="docutils literal notranslate"><span class="pre">pa1.csv</span></code>’s one CSV format file by using <code class="docutils literal notranslate"><span class="pre">-Hevent=pa1</span></code> profile data.</p>
</li>
</ul>
<blockquote>
<div><div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp"># </span>If<span class="w"> </span>output<span class="w"> </span>the<span class="w"> </span>profile<span class="w"> </span>data<span class="w"> </span>stored<span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="s2">&quot;rep1&quot;</span><span class="w"> </span>directory
<span class="gp"># </span><span class="k">for</span><span class="w"> </span>CPU<span class="w"> </span>performance<span class="w"> </span>analysis<span class="w"> </span>report<span class="w"> </span>as<span class="w"> </span>CSV<span class="w"> </span>format

<span class="gp">$ </span>fapppx<span class="w"> </span>-A<span class="w"> </span>-d<span class="w"> </span>./rep1<span class="w"> </span>-Icpupa<span class="w"> </span>-tcsv<span class="w"> </span>-o<span class="w"> </span>pa1.csv
</pre></div>
</div>
</div></blockquote>
<ul>
<li><p>Brief Report</p>
<p>If create Brief Report, use profile data from <code class="docutils literal notranslate"><span class="pre">-Hevent=pa1</span></code> to  <code class="docutils literal notranslate"><span class="pre">-Hevent=pa5</span></code>, output 5 CSV format file from <code class="file docutils literal notranslate"><span class="pre">pa1.csv</span></code> ~ <code class="file docutils literal notranslate"><span class="pre">pa5.csv</span></code>.</p>
</li>
</ul>
<blockquote>
<div><div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp"># </span>Example<span class="w"> </span>of<span class="w"> </span>outputting<span class="w"> </span>the<span class="w"> </span>profile<span class="w"> </span>data<span class="w"> </span>stored<span class="w"> </span><span class="k">in</span><span class="w"> </span>the<span class="w"> </span><span class="s2">&quot;rep1&quot;</span><span class="w"> </span>to
<span class="gp">#  </span><span class="s2">&quot;rep5&quot;</span><span class="w"> </span>directories<span class="w"> </span><span class="k">in</span><span class="w"> </span>CSV<span class="w"> </span>format<span class="w"> </span><span class="k">for</span><span class="w"> </span>CPU<span class="w"> </span>Performance<span class="w"> </span>Analysis<span class="w"> </span>Reports

<span class="gp">$ </span>fapppx<span class="w"> </span>-A<span class="w"> </span>-d<span class="w"> </span>./rep1<span class="w"> </span>-Icpupa<span class="w"> </span>-tcsv<span class="w"> </span>-o<span class="w"> </span>pa1.csv
<span class="gp">$ </span>fapppx<span class="w"> </span>-A<span class="w"> </span>-d<span class="w"> </span>./rep2<span class="w"> </span>-Icpupa<span class="w"> </span>-tcsv<span class="w"> </span>-o<span class="w"> </span>pa2.csv
<span class="gp">$ </span>fapppx<span class="w"> </span>-A<span class="w"> </span>-d<span class="w"> </span>./rep3<span class="w"> </span>-Icpupa<span class="w"> </span>-tcsv<span class="w"> </span>-o<span class="w"> </span>pa3.csv
<span class="gp">$ </span>fapppx<span class="w"> </span>-A<span class="w"> </span>-d<span class="w"> </span>./rep4<span class="w"> </span>-Icpupa<span class="w"> </span>-tcsv<span class="w"> </span>-o<span class="w"> </span>pa4.csv
<span class="gp">$ </span>fapppx<span class="w"> </span>-A<span class="w"> </span>-d<span class="w"> </span>./rep5<span class="w"> </span>-Icpupa<span class="w"> </span>-tcsv<span class="w"> </span>-o<span class="w"> </span>pa5.csv
</pre></div>
</div>
</div></blockquote>
<ul>
<li><p>Standard Report</p>
<p>If create Standard Report, use profile data from <code class="docutils literal notranslate"><span class="pre">-Hevent=pa1</span></code> to  <code class="docutils literal notranslate"><span class="pre">-Hevent=pa11</span></code>, output 11 CSV format file from <code class="file docutils literal notranslate"><span class="pre">pa1.csv</span></code> ~  <code class="file docutils literal notranslate"><span class="pre">pa11.csv</span></code>.</p>
</li>
</ul>
<blockquote>
<div><div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp"># </span>Example<span class="w"> </span>of<span class="w"> </span>outputting<span class="w"> </span>the<span class="w"> </span>profile<span class="w"> </span>data<span class="w"> </span>stored<span class="w"> </span><span class="k">in</span><span class="w"> </span>the<span class="w"> </span><span class="s2">&quot;rep1&quot;</span><span class="w"> </span>to
<span class="gp">#  </span><span class="s2">&quot;rep11&quot;</span><span class="w"> </span>directories<span class="w"> </span><span class="k">in</span><span class="w"> </span>CSV<span class="w"> </span>format<span class="w"> </span><span class="k">for</span><span class="w"> </span>CPU<span class="w"> </span>Performance<span class="w"> </span>Analysis<span class="w"> </span>Reports

<span class="gp">$ </span>fapppx<span class="w"> </span>-A<span class="w"> </span>-d<span class="w"> </span>./rep1<span class="w">  </span>-Icpupa<span class="w"> </span>-tcsv<span class="w"> </span>-o<span class="w"> </span>pa1.csv
<span class="gp">$ </span>fapppx<span class="w"> </span>-A<span class="w"> </span>-d<span class="w"> </span>./rep2<span class="w">  </span>-Icpupa<span class="w"> </span>-tcsv<span class="w"> </span>-o<span class="w"> </span>pa2.csv
<span class="gp">$ </span>fapppx<span class="w"> </span>-A<span class="w"> </span>-d<span class="w"> </span>./rep3<span class="w">  </span>-Icpupa<span class="w"> </span>-tcsv<span class="w"> </span>-o<span class="w"> </span>pa3.csv
<span class="gp">$ </span>fapppx<span class="w"> </span>-A<span class="w"> </span>-d<span class="w"> </span>./rep4<span class="w">  </span>-Icpupa<span class="w"> </span>-tcsv<span class="w"> </span>-o<span class="w"> </span>pa4.csv
<span class="gp">$ </span>fapppx<span class="w"> </span>-A<span class="w"> </span>-d<span class="w"> </span>./rep5<span class="w">  </span>-Icpupa<span class="w"> </span>-tcsv<span class="w"> </span>-o<span class="w"> </span>pa5.csv
<span class="gp">$ </span>fapppx<span class="w"> </span>-A<span class="w"> </span>-d<span class="w"> </span>./rep6<span class="w">  </span>-Icpupa<span class="w"> </span>-tcsv<span class="w"> </span>-o<span class="w"> </span>pa6.csv
<span class="gp">$ </span>fapppx<span class="w"> </span>-A<span class="w"> </span>-d<span class="w"> </span>./rep7<span class="w">  </span>-Icpupa<span class="w"> </span>-tcsv<span class="w"> </span>-o<span class="w"> </span>pa7.csv
<span class="gp">$ </span>fapppx<span class="w"> </span>-A<span class="w"> </span>-d<span class="w"> </span>./rep8<span class="w">  </span>-Icpupa<span class="w"> </span>-tcsv<span class="w"> </span>-o<span class="w"> </span>pa8.csv
<span class="gp">$ </span>fapppx<span class="w"> </span>-A<span class="w"> </span>-d<span class="w"> </span>./rep9<span class="w">  </span>-Icpupa<span class="w"> </span>-tcsv<span class="w"> </span>-o<span class="w"> </span>pa9.csv
<span class="gp">$ </span>fapppx<span class="w"> </span>-A<span class="w"> </span>-d<span class="w"> </span>./rep10<span class="w"> </span>-Icpupa<span class="w"> </span>-tcsv<span class="w"> </span>-o<span class="w"> </span>pa10.csv
<span class="gp">$ </span>fapppx<span class="w"> </span>-A<span class="w"> </span>-d<span class="w"> </span>./rep11<span class="w"> </span>-Icpupa<span class="w"> </span>-tcsv<span class="w"> </span>-o<span class="w"> </span>pa11.csv
</pre></div>
</div>
</div></blockquote>
<ul>
<li><p>Detail Report</p>
<p>If create Detail Report, use profile data from <code class="docutils literal notranslate"><span class="pre">-Hevent=pa1</span></code> to  <code class="docutils literal notranslate"><span class="pre">-Hevent=pa17</span></code>, output 17 CSV format file from <code class="file docutils literal notranslate"><span class="pre">pa1.csv</span></code> ~  <code class="file docutils literal notranslate"><span class="pre">pa17.csv</span></code>.</p>
</li>
</ul>
<blockquote>
<div><div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp"># </span>Example<span class="w"> </span>of<span class="w"> </span>outputting<span class="w"> </span>the<span class="w"> </span>profile<span class="w"> </span>data<span class="w"> </span>stored<span class="w"> </span><span class="k">in</span><span class="w"> </span>the<span class="w"> </span><span class="s2">&quot;rep1&quot;</span><span class="w"> </span>to
<span class="gp">#  </span><span class="s2">&quot;rep17&quot;</span><span class="w"> </span>directories<span class="w"> </span><span class="k">in</span><span class="w"> </span>CSV<span class="w"> </span>format<span class="w"> </span><span class="k">for</span><span class="w"> </span>CPU<span class="w"> </span>Performance<span class="w"> </span>Analysis<span class="w"> </span>Reports

<span class="gp">$ </span>fapppx<span class="w"> </span>-A<span class="w"> </span>-d<span class="w"> </span>./rep1<span class="w">  </span>-Icpupa<span class="w"> </span>-tcsv<span class="w"> </span>-o<span class="w"> </span>pa1.csv
<span class="gp">$ </span>fapppx<span class="w"> </span>-A<span class="w"> </span>-d<span class="w"> </span>./rep2<span class="w">  </span>-Icpupa<span class="w"> </span>-tcsv<span class="w"> </span>-o<span class="w"> </span>pa2.csv
<span class="gp">$ </span>fapppx<span class="w"> </span>-A<span class="w"> </span>-d<span class="w"> </span>./rep3<span class="w">  </span>-Icpupa<span class="w"> </span>-tcsv<span class="w"> </span>-o<span class="w"> </span>pa3.csv
<span class="gp">$ </span>fapppx<span class="w"> </span>-A<span class="w"> </span>-d<span class="w"> </span>./rep4<span class="w">  </span>-Icpupa<span class="w"> </span>-tcsv<span class="w"> </span>-o<span class="w"> </span>pa4.csv
<span class="gp">$ </span>fapppx<span class="w"> </span>-A<span class="w"> </span>-d<span class="w"> </span>./rep5<span class="w">  </span>-Icpupa<span class="w"> </span>-tcsv<span class="w"> </span>-o<span class="w"> </span>pa5.csv
<span class="gp">$ </span>fapppx<span class="w"> </span>-A<span class="w"> </span>-d<span class="w"> </span>./rep6<span class="w">  </span>-Icpupa<span class="w"> </span>-tcsv<span class="w"> </span>-o<span class="w"> </span>pa6.csv
<span class="gp">$ </span>fapppx<span class="w"> </span>-A<span class="w"> </span>-d<span class="w"> </span>./rep7<span class="w">  </span>-Icpupa<span class="w"> </span>-tcsv<span class="w"> </span>-o<span class="w"> </span>pa7.csv
<span class="gp">$ </span>fapppx<span class="w"> </span>-A<span class="w"> </span>-d<span class="w"> </span>./rep8<span class="w">  </span>-Icpupa<span class="w"> </span>-tcsv<span class="w"> </span>-o<span class="w"> </span>pa8.csv
<span class="gp">$ </span>fapppx<span class="w"> </span>-A<span class="w"> </span>-d<span class="w"> </span>./rep9<span class="w">  </span>-Icpupa<span class="w"> </span>-tcsv<span class="w"> </span>-o<span class="w"> </span>pa9.csv
<span class="gp">$ </span>fapppx<span class="w"> </span>-A<span class="w"> </span>-d<span class="w"> </span>./rep10<span class="w"> </span>-Icpupa<span class="w"> </span>-tcsv<span class="w"> </span>-o<span class="w"> </span>pa10.csv
<span class="gp">$ </span>fapppx<span class="w"> </span>-A<span class="w"> </span>-d<span class="w"> </span>./rep11<span class="w"> </span>-Icpupa<span class="w"> </span>-tcsv<span class="w"> </span>-o<span class="w"> </span>pa11.csv
<span class="gp">$ </span>fapppx<span class="w"> </span>-A<span class="w"> </span>-d<span class="w"> </span>./rep12<span class="w"> </span>-Icpupa<span class="w"> </span>-tcsv<span class="w"> </span>-o<span class="w"> </span>pa12.csv
<span class="gp">$ </span>fapppx<span class="w"> </span>-A<span class="w"> </span>-d<span class="w"> </span>./rep13<span class="w"> </span>-Icpupa<span class="w"> </span>-tcsv<span class="w"> </span>-o<span class="w"> </span>pa13.csv
<span class="gp">$ </span>fapppx<span class="w"> </span>-A<span class="w"> </span>-d<span class="w"> </span>./rep14<span class="w"> </span>-Icpupa<span class="w"> </span>-tcsv<span class="w"> </span>-o<span class="w"> </span>pa14.csv
<span class="gp">$ </span>fapppx<span class="w"> </span>-A<span class="w"> </span>-d<span class="w"> </span>./rep15<span class="w"> </span>-Icpupa<span class="w"> </span>-tcsv<span class="w"> </span>-o<span class="w"> </span>pa15.csv
<span class="gp">$ </span>fapppx<span class="w"> </span>-A<span class="w"> </span>-d<span class="w"> </span>./rep16<span class="w"> </span>-Icpupa<span class="w"> </span>-tcsv<span class="w"> </span>-o<span class="w"> </span>pa16.csv
<span class="gp">$ </span>fapppx<span class="w"> </span>-A<span class="w"> </span>-d<span class="w"> </span>./rep17<span class="w"> </span>-Icpupa<span class="w"> </span>-tcsv<span class="w"> </span>-o<span class="w"> </span>pa17.csv
</pre></div>
</div>
</div></blockquote>
<div class="admonition attention">
<p class="admonition-title">Attention</p>
<ul class="simple">
<li><p>If specified <code class="docutils literal notranslate"><span class="pre">-Inocpupa</span></code> option to <strong class="program">fapppx</strong> command, information required for the CPU Performance Analysis Report is not output.</p></li>
<li><p>The output is out of order. For example, it is safe to output pa1.csv after outputting pa2.csv.</p></li>
</ul>
</div>
<div class="admonition attention">
<p class="admonition-title">Attention</p>
<p>When there are many measurement sections and many processes, the csv file may exceed the maximum number of rows (1048576 rows) that Excel can handle.
If the maximum number of lines is exceeded, Excel will not be able to read it, and the message <code class="docutils literal notranslate"><span class="pre">The</span> <span class="pre">file</span> <span class="pre">format</span> <span class="pre">is</span> <span class="pre">not</span> <span class="pre">supported</span></code> will be output and the CPU Performance Analysis Report will not be created.</p>
<p>In such cases, please reduce the output to the csv file.</p>
<p>The followings are examples of workaround.</p>
<ol class="arabic">
<li><dl class="simple">
<dt>Reduce the measurement section of fapp_start/fapp_stop</dt><dd><p>The measurement section will be reduced by fixing the program.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>Use the level argument of fapp_start(name,number,level)/fapp_stop(name,number,level)</dt><dd><p>It involves program fix, the description of fapp_start/fapp_stop remains the same, the measurement section is divided into levels with the argument level, by using the option <code class="docutils literal notranslate"><span class="pre">-L</span></code> of <strong class="program">fapp</strong>, you can suppress the output of the section of unnecessary level.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>Output suppression of MPI information by fapppx -A -Icpupa,nompi</dt><dd><p>It is enabled when MPI information is not needed.</p>
</dd>
</dl>
</li>
<li><dl>
<dt>Specifying the output process by fapppx -A -p option</dt><dd><p>It is enabled when the process to be collected is known.</p>
<p>fapppx -A -p&lt;n&gt;,limit=&lt;m&gt;</p>
<p>n specifies the process to output. Separate multiple processes with commas. For example, you can specify like <code class="docutils literal notranslate"><span class="pre">-p3,5,limit=10</span></code>.
m specifies the number of processes to output. Outputs the top m cost process including the process specified by n.</p>
</dd>
</dl>
</li>
</ol>
</div>
</section>
<section id="create-a-cpu-performance-analysis-report">
<h2><span class="section-number">3.1.11.4.8. </span>Create a CPU Performance Analysis Report<a class="headerlink" href="#create-a-cpu-performance-analysis-report" title="Link to this heading">¶</a></h2>
<p>Use the following procedure to import the CSV format file output using the <code class="docutils literal notranslate"><span class="pre">fapppx</span></code> command of the Advanced Performance Profiler into the CPU Performance Analysis Report.</p>
<ol class="arabic simple">
<li><p>Store the CSV file output in the profile result output and the CPU Performance Analysis Report file (cpu_pa_report.xlsm) in the same directory.</p></li>
</ol>
<blockquote>
<div><div class="admonition seealso">
<p class="admonition-title">See also</p>
<p>The CPU Performance Analysis Report file is stored in the following location.</p>
<p><code class="file docutils literal notranslate"><span class="pre">$FJSVXTCLANGA/misc/cpupa/cpu_pa_report.xlsm</span></code></p>
</div>
</div></blockquote>
<ol class="arabic simple" start="2">
<li><p>Copy the directory prepared in step 1 to an environment where Microsoft Excel can be executed.</p></li>
<li><p>Start the CPU Performance Analysis Report file (cpu_pa_report.xlsm).</p></li>
</ol>
<blockquote>
<div><div class="admonition seealso">
<p class="admonition-title">See also</p>
<p>The CPU Performance Analysis Report uses the macro function of Microsoft Execl. If the macro is disabled due to security settings, enable the macro manually.</p>
</div>
</div></blockquote>
<ol class="arabic simple" start="4">
<li><p>A dialog for selecting the content to be output to the CPU Performance Analysis Report is displayed. Enter the required information.</p></li>
</ol>
<blockquote>
<div><ol class="loweralpha simple">
<li><p>If multiple process data exists in the CSV file, the process number input screen is displayed. Enter the process number you want to see. If there is only one process, the process number input screen is not displayed.</p></li>
</ol>
<blockquote>
<div><figure class="align-default">
<img alt="../../../_images/CPUPerformanceAnalysisReportCreateReport_01.png" src="../../../_images/CPUPerformanceAnalysisReportCreateReport_01.png" />
</figure>
</div></blockquote>
<ol class="loweralpha simple" start="2">
<li><p>If the specified process is executed by multiple CMGs, enter the CMG number you want to refer to on the CMG number entry screen. If there is only one CMG, the CMG number entry screen is not displayed.</p></li>
</ol>
<blockquote>
<div><figure class="align-default">
<img alt="../../../_images/CPUPerformanceAnalysisReportCreateReport_02.png" src="../../../_images/CPUPerformanceAnalysisReportCreateReport_02.png" />
</figure>
</div></blockquote>
<ol class="loweralpha simple" start="3">
<li><p>If there are multiple measurement sections specified in the measurement section specification routine in the specified process, select the measurement section name you want to refer to on the measurement section selection screen. If there is only one measurement section, the measurement section selection screen is not displayed.</p></li>
</ol>
<blockquote>
<div><figure class="align-default">
<img alt="../../../_images/CPUPerformanceAnalysisReportCreateReport_03.png" src="../../../_images/CPUPerformanceAnalysisReportCreateReport_03.png" />
</figure>
</div></blockquote>
</div></blockquote>
<ol class="arabic simple" start="5">
<li><p>Start reading the CSV format file. The files to be read are only the files named pa1.csv to pa17.csv in the same directory as the CPU Performance Analysis Report file. If successful, the following message is displayed for each report created.</p></li>
</ol>
<blockquote>
<div><table class="docutils align-default">
<colgroup>
<col style="width: 50.0%" />
<col style="width: 50.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Message</p></th>
<th class="head"><p>Message contentes</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>CPU Performance Analysis Report (Brief Report) created.</p></td>
<td><p>CPU Performance Analysis Report (Brief Report) is created.</p></td>
</tr>
<tr class="row-odd"><td><p>CPU Performance Analysis Report (Standard Report) created.</p></td>
<td><p>CPU Performance Analysis Report (Standard Report) is created.</p></td>
</tr>
<tr class="row-even"><td><p>CPU Performance Analysis Report (Detail Report) created.</p></td>
<td><p>CPU Performance Analysis Report (Detail Report) is created.</p></td>
</tr>
</tbody>
</table>
</div></blockquote>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<ul class="simple">
<li><p>For an overview and details of the output results of the created CPU Performance Analysis Report, see “Profiler User’s Guide” - “4.2 CPU Performance Analysis Report Output Result”.</p></li>
<li><p>‘Floating-point operation peak ratio (%)’ in Statistics section shows the ratio of the performance of cpu frequency 2.2 GHz  (peak performance on Fugaku).</p></li>
<li><p>The type of CPU performance analysis report to be created is determined by the existence of CSV format files in the directory. The priorities are as follows:</p>
<ol class="arabic simple">
<li><p>If pa1.csv to pa17.csv files are all existing, create a detail report.</p></li>
<li><p>If pa1.csv to pa11.csv files are all existing, create a standard report.</p></li>
<li><p>If pa1.csv to pa5.csv files are all existing, create a brief report.</p></li>
<li><p>If pa1.csvfiles is existing, create a unit report.</p></li>
</ol>
</li>
</ul>
</div>
</section>
</section>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <div>
    <h3><a href="../../../index.html">Table of Contents</a></h3>
    <ul>
<li><a class="reference internal" href="#">3.1.11.4. CPU Performance Analysis Report</a><ul>
<li><a class="reference internal" href="#overview">3.1.11.4.1. Overview</a></li>
<li><a class="reference internal" href="#cpu-performance-analysis-report-type">3.1.11.4.2. CPU Performance Analysis Report type</a></li>
<li><a class="reference internal" href="#addition-of-measurement-interval-specification-routine">3.1.11.4.3. Addition of measurement interval specification routine</a></li>
<li><a class="reference internal" href="#compiling-linking">3.1.11.4.4. Compiling / Linking</a><ul>
<li><a class="reference internal" href="#about-fortran-translation-options">3.1.11.4.4.1. About Fortran translation options</a></li>
<li><a class="reference internal" href="#about-c-c-translation-options">3.1.11.4.4.2. About C/C++ translation options</a></li>
</ul>
</li>
<li><a class="reference internal" href="#measurement-of-profile-data">3.1.11.4.5. Measurement of profile data</a></li>
<li><a class="reference internal" href="#profiler-option">3.1.11.4.6. Profiler option</a></li>
<li><a class="reference internal" href="#output-profile-result">3.1.11.4.7. Output profile result</a></li>
<li><a class="reference internal" href="#create-a-cpu-performance-analysis-report">3.1.11.4.8. Create a CPU Performance Analysis Report</a></li>
</ul>
</li>
</ul>

  </div>
  <div>
    <h4>Previous topic</h4>
    <p class="topless"><a href="InstantProfiler.html"
                          title="previous chapter"><span class="section-number">3.1.11.3. </span>Instant Performance Profiler</a></p>
  </div>
  <div>
    <h4>Next topic</h4>
    <p class="topless"><a href="ImportantPoints.html"
                          title="next chapter"><span class="section-number">3.1.11.5. </span>Notes</a></p>
  </div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>document.getElementById('searchbox').style.display = "block"</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="ImportantPoints.html" title="3.1.11.5. Notes"
             >next</a></li>
        <li class="right" >
          <a href="InstantProfiler.html" title="3.1.11.3. Instant Performance Profiler"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../../index.html">Supercomputer Fugaku User Guide －Language and development environment－  documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../../index.html" ><span class="section-number">3. </span>Compilers that generate binaries for compute nodes</a> &#187;</li>
          <li class="nav-item nav-item-2"><a href="../index.html" ><span class="section-number">3.1. </span>Fujitsu compiler</a> &#187;</li>
          <li class="nav-item nav-item-3"><a href="index.html" ><span class="section-number">3.1.11. </span>Profiler</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href=""><span class="section-number">3.1.11.4. </span>CPU Performance Analysis Report</a></li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2026, RIKEN Center for Computational Science.
    &nbsp;&nbsp;<a href="https://www.fugaku.r-ccs.riken.jp/en/">Fugaku website Top</a>
    </div>
  </body>
</html>